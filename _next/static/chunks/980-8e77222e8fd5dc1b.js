"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{1544:(e,t,r)=>{r.d(t,{S:()=>a});var o=r(8012);class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}async login(e){try{let t={id:"user_001",name:"張小明",email:e.email,level:"進階投資者",location:"台北",joinDate:"2023年1月加入",preferences:{theme:"light",language:"zh-TW",notifications:{email:!0,push:!0,priceAlerts:!0,newsAlerts:!1},riskTolerance:"moderate"},portfolio:{totalValue:125e4,totalReturn:125e3,monthlyReturn:8.5}},r="jwt_token_".concat(Date.now());return{user:t,token:r}}catch(e){throw Error("登入失敗：用戶名或密碼錯誤")}}async register(e){try{let t=await this.userModel.createUser({name:e.name,email:e.email,level:"新手投資者",location:e.location,joinDate:new Date().toLocaleDateString("zh-TW"),preferences:{theme:"light",language:"zh-TW",notifications:{email:!0,push:!0,priceAlerts:!0,newsAlerts:!0},riskTolerance:"conservative"},portfolio:{totalValue:0,totalReturn:0,monthlyReturn:0}}),r="jwt_token_".concat(Date.now());return{user:t,token:r}}catch(e){throw Error("註冊失敗：請檢查輸入資料")}}async getUserProfile(e){let t=await this.userModel.getUserById(e);if(!t)throw Error("用戶不存在");return t}async updateUserProfile(e,t){try{return await this.userModel.updateUser(e,t)}catch(e){throw Error("更新用戶資料失敗")}}async getUserActivities(e){try{return await this.userModel.getUserActivities(e)}catch(e){throw Error("獲取用戶活動記錄失敗")}}async updateUserPreferences(e,t){let r=await this.userModel.getUserById(e);if(!r)throw Error("用戶不存在");let o={...r.preferences,...t};return await this.userModel.updateUser(e,{preferences:o})}async logout(e){return!0}async getInvestmentStats(e){try{return{totalValue:125e4,totalReturn:125e3,returnRate:12.5,portfolioCount:3,watchlistCount:15,articlesRead:42,coursesCompleted:8,monthlyReturn:8.5,bestStock:"台積電",winRate:68.5}}catch(e){throw Error("獲取投資統計失敗")}}async getAchievements(e){try{return[{id:1,name:"首次投資",description:"完成第一筆投資交易",icon:"\uD83D\uDE80",unlocked:!0,color:"text-blue-600"},{id:2,name:"學習達人",description:"完成10堂投資課程",icon:"\uD83D\uDCDA",unlocked:!0,color:"text-green-600"},{id:3,name:"風險管理師",description:"建立多元化投資組合",icon:"\uD83D\uDEE1️",unlocked:!1,color:"text-purple-600"}]}catch(e){throw Error("獲取成就失敗")}}async getRecentActivities(e){try{return[{id:1,type:"investment",action:"買入",target:"台積電",amount:"50,000",time:"2小時前",icon:"\uD83D\uDCC8",color:"text-green-600",bgColor:"bg-green-50"},{id:2,type:"analysis",action:"分析",target:"半導體產業",time:"4小時前",icon:"\uD83D\uDD0D",color:"text-blue-600",bgColor:"bg-blue-50"},{id:3,type:"learning",action:"完成課程",target:"技術分析基礎",time:"1天前",icon:"\uD83C\uDF93",color:"text-purple-600",bgColor:"bg-purple-50"}]}catch(e){throw Error("獲取活動記錄失敗")}}async updateNotificationSettings(e,t){try{console.log("Updated notification settings for user ".concat(e,":"),t)}catch(e){throw Error("更新通知設定失敗")}}async requestPasswordReset(e){try{return console.log("Password reset requested for email: ".concat(e)),await new Promise(e=>setTimeout(e,1e3)),{message:"密碼重設郵件已發送至 ".concat(e)}}catch(e){throw Error("發送密碼重設郵件失敗")}}constructor(){this.userModel=o.F.getInstance()}}},3180:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(7876);r(4232);var a=r(9694),i=r(3679);let n=()=>(0,o.jsxs)("footer",{className:"bg-gray-900 text-gray-300 relative overflow-hidden",children:[(0,o.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,o.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20"})}),(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10 pt-12",children:[(0,o.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,o.jsxs)("div",{className:"lg:col-span-2",children:[(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4",children:(0,o.jsx)(a.A,{className:"w-6 h-6 text-white"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-2xl font-bold text-white",children:"FinTech Studio"}),(0,o.jsx)("p",{className:"text-gray-400",children:"智慧金融分析平台"})]})]}),(0,o.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6 max-w-md",children:"金融走勢智慧分析，讓投資更簡單。透過 AI 技術，提供即時市場分析、投資組合建議和風險評估，助您做出明智的投資決策。"}),(0,o.jsx)("div",{className:"flex space-x-4",children:(0,o.jsx)("a",{href:"https://github.com/HaoXun97/financial-analysis",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center transition-colors group",children:(0,o.jsx)(i.hL4,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-white font-semibold mb-6",children:"功能"}),(0,o.jsx)("ul",{className:"space-y-3",children:["市場分析","投資組合","AI 預測","風險管理"].map(e=>(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-white font-semibold mb-6",children:"支援"}),(0,o.jsx)("ul",{className:"space-y-3",children:["幫助中心","聯絡我們","隱私政策","服務條款"].map(e=>(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]})]}),(0,o.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-center",children:(0,o.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["\xa9 ",new Date().getFullYear()," FinTech Studio. All rights reserved."]})})]})]})},7310:(e,t,r)=>{r.d(t,{R:()=>s});var o=r(7093),a=r(7907),i=r(1930);class n extends i.d{static getInstance(){return n.instance||(n.instance=new n),n.instance}async getUserPortfolios(e){try{return this.validateServiceInput(e,"用戶ID"),await this.executeWithRetry(async()=>(await new Promise(e=>setTimeout(e,300)),[{id:"portfolio_1",name:"主要投資組合",description:"長期投資的核心持股",userId:e,totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:[],transactions:[],createdAt:"2024-01-01T00:00:00Z",isDefault:!0},{id:"portfolio_2",name:"短期交易組合",description:"短期交易和波段操作",userId:e,totalValue:"500000",totalCost:48e4,totalGainLoss:2e4,totalGainLossPercent:4.17,dayChange:-5e3,dayChangePercent:-1,holdings:[],transactions:[],createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-06-01T10:00:00Z",isDefault:!1}]))}catch(e){return this.handleServiceError(e,"獲取用戶投資組合")}}async getPortfolioById(e){try{return this.validateServiceInput(e,"投資組合ID"),await this.executeWithRetry(async()=>{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioHoldings(e),r=await this.getPortfolioTransactions(e);return{id:e,name:"主要投資組合",description:"長期投資的核心持股",userId:"user_001",totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:t,transactions:r,createdAt:"2024-01-01T00:00:00Z",isDefault:!0}})}catch(e){return this.handleServiceError(e,"獲取投資組合詳情")}}async getPortfolioHoldings(e){try{return await new Promise(e=>setTimeout(e,200)),[{id:"holding_1",portfolioId:e,symbol:"2330",name:"台積電",quantity:1e3,averagePrice:"500",currentPrice:"580",marketValue:58e4,costBasis:5e5,gainLoss:8e4,gainLossPercent:16,dayChange:1e4,dayChangePercent:1.75,weight:46.4,lastUpdated:"2024-06-01T10:00:00Z"},{id:"holding_2",portfolioId:e,symbol:"2317",name:"鴻海",quantity:2e3,averagePrice:"100",currentPrice:"105.5",marketValue:211e3,costBasis:2e5,gainLoss:11e3,gainLossPercent:5.5,dayChange:5e3,dayChangePercent:2.43,weight:16.9,lastUpdated:"2024-06-01T10:00:00Z"}]}catch(e){throw console.error("Error fetching portfolio holdings:",e),Error("無法獲取持股明細")}}async getPortfolioTransactions(e){try{return await new Promise(e=>setTimeout(e,250)),[{id:"tx_1",date:"2024-05-15",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"520",total:"260000",note:"分批建倉"},{id:"tx_2",date:"2024-04-10",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"480",total:"240000",note:"逢低加碼"},{id:"tx_3",date:"2024-03-20",type:"買入",symbol:"2317",name:"鴻海",quantity:2e3,price:"100",total:"200000",note:"新增持股"}]}catch(e){throw console.error("Error fetching portfolio transactions:",e),Error("無法獲取交易記錄")}}async createPortfolio(e){try{return await new Promise(e=>setTimeout(e,400)),{id:"portfolio_".concat(Date.now()),name:e.name,description:e.description,userId:e.userId,totalValue:"0",totalCost:0,totalGainLoss:0,totalGainLossPercent:0,dayChange:0,dayChangePercent:0,holdings:[],transactions:[],createdAt:new Date().toISOString(),isDefault:e.isDefault||!1}}catch(e){throw console.error("Error creating portfolio:",e),Error("無法創建投資組合")}}async updatePortfolio(e,t){try{await new Promise(e=>setTimeout(e,300));let r=await this.getPortfolioById(e);if(!r)throw Error("投資組合不存在");return{...r,...t,updatedAt:new Date().toISOString()}}catch(e){throw console.error("Error updating portfolio:",e),Error("無法更新投資組合")}}async deletePortfolio(e){try{await new Promise(e=>setTimeout(e,200)),console.log("Portfolio ".concat(e," deleted"))}catch(e){throw console.error("Error deleting portfolio:",e),Error("無法刪除投資組合")}}async addTransaction(e){try{return await new Promise(e=>setTimeout(e,300)),{id:"tx_".concat(Date.now()),date:e.date,type:"buy"===e.type?"買入":"賣出",symbol:e.symbol,name:e.symbol,quantity:e.quantity,price:e.price.toString(),total:(e.quantity*e.price).toString(),note:e.notes}}catch(e){throw console.error("Error adding transaction:",e),Error("無法新增交易記錄")}}async getPortfolioPerformance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1y";try{return await new Promise(e=>setTimeout(e,400)),(e=>{let t=new Date,r=[],o=[],a=0;switch(e){case"1m":a=30;break;case"3m":a=90;break;case"6m":a=180;break;default:a=365}let i=1e6;for(let e=0;e<a;e++){let n=new Date(t.getTime()-(a-1-e)*864e5);r.push(n.toISOString().split("T")[0]);let s=(Math.random()-.5)*.03;i*=1+s,o.push(Math.round(i))}return{labels:r,values:o}})(t)}catch(e){throw console.error("Error fetching portfolio performance:",e),Error("無法獲取投資組合績效")}}async getAssetAllocation(e){try{return await new Promise(e=>setTimeout(e,200)),[{name:"科技股",category:"科技股",value:75e4,percentage:60,color:"#3B82F6"},{name:"金融股",category:"金融股",value:25e4,percentage:20,color:"#10B981"},{name:"傳統產業",category:"傳統產業",value:15e4,percentage:12,color:"#F59E0B"},{name:"現金",category:"現金",value:1e5,percentage:8,color:"#6B7280"}]}catch(e){throw console.error("Error fetching asset allocation:",e),Error("無法獲取資產配置")}}async getPortfolioAnalysis(e){try{await new Promise(e=>setTimeout(e,300));let t=await this.getPortfolioHoldings(e),r=t.reduce((e,t)=>e+(t.marketValue||0),0),o=t.reduce((e,t)=>e+(t.costBasis||0),0),a=r-o,i=t.reduce((e,t)=>e+(t.dayChange||0),0),n=[...t].sort((e,t)=>(t.gainLossPercent||0)-(e.gainLossPercent||0)),s=n[0],l=n[n.length-1];return{totalValue:r,totalCost:o,totalGainLoss:a,totalGainLossPercent:a/o*100,dayChange:i,dayChangePercent:i/r*100,bestPerformer:{symbol:s.symbol,gainLoss:s.gainLoss||0,gainLossPercent:s.gainLossPercent||0},worstPerformer:{symbol:l.symbol,gainLoss:l.gainLoss||0,gainLossPercent:l.gainLossPercent||0}}}catch(e){throw console.error("Error analyzing portfolio:",e),Error("無法分析投資組合")}}async searchTransactions(e){try{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioTransactions("portfolio_1");if(e.symbol&&(t=t.filter(t=>t.symbol===e.symbol)),e.type){let r="buy"===e.type?"買入":"賣出";t=t.filter(e=>e.type===r)}return t}catch(e){throw console.error("Error searching transactions:",e),Error("無法搜索交易記錄")}}constructor(){super()}}class s extends a.wp{static getInstance(){return s.instance||(s.instance=new s),s.instance}convertServicePortfolioToModel(e){var t,r;return{id:e.id,userId:e.userId,totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdings:e.holdings.map(e=>this.convertServiceHoldingToModel(e)),allocation:(null==(t=e.allocation)?void 0:t.map(e=>this.convertServiceAllocationToModel(e)))||[],performance:this.convertServicePerformanceToModel(e.performance),transactions:(null==(r=e.transactions)?void 0:r.map(e=>this.convertServiceTransactionToModel(e)))||[],risk:{riskScore:5,volatility:15,beta:1,sharpeRatio:1,maxDrawdown:-10,riskLevel:"medium"},overview:{totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdingsCount:e.holdings.length,lastUpdated:e.updatedAt||new Date().toISOString()},aiRecommendations:[]}}convertServiceHoldingToModel(e){return{symbol:e.symbol,name:e.name,price:e.currentPrice,priceChange:e.dayChange||0,quantity:e.quantity.toString(),marketValue:e.totalValue||"0",costBasis:(e.costBasis||0).toString(),totalReturn:{value:e.unrealizedReturn||"0",percentage:e.unrealizedReturnPercent||"0%"},weight:e.weight?"".concat(e.weight,"%"):"0%"}}convertServiceAllocationToModel(e){return{category:e.category||e.name,percentage:e.percentage,value:e.value,color:e.color}}convertServicePerformanceToModel(e){return e?{labels:e.labels,portfolioValue:e.values,benchmarkValue:e.benchmarkValues||[],timeRange:"1M"}:{labels:[],portfolioValue:[],benchmarkValue:[],timeRange:"1M"}}convertServiceTransactionToModel(e){return{id:e.id,symbol:e.symbol,type:"買入"===e.type?"buy":"sell",quantity:"string"==typeof e.quantity?parseFloat(e.quantity):e.quantity,price:parseFloat(e.price.replace(/[^\d.-]/g,"")),amount:parseFloat(e.total.replace(/[^\d.-]/g,"")),date:e.date,fee:0,status:"completed"}}async getPortfolio(e){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");try{let t=await this.portfolioService.getUserPortfolios(e),r=t.find(e=>e.isDefault)||t[0];if(r)return this.convertServicePortfolioToModel(r)}catch(e){console.warn("服務層獲取失敗，使用模型層:",e)}let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t},"獲取投資組合")}async getUserPortfolios(e){return this.executeWithErrorHandling(async()=>(this.validateRequired(e,"用戶ID"),(await this.portfolioService.getUserPortfolios(e)).map(e=>this.convertServicePortfolioToModel(e))),"獲取用戶投資組合列表")}async addTransaction(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID"),this.validateRequired(t.symbol,"股票代碼"),this.validatePositiveNumber(t.quantity,"數量"),this.validatePositiveNumber(t.price,"價格");let r={portfolioId:t.portfolioId||"".concat(e,"_default"),symbol:t.symbol,type:t.type,quantity:t.quantity,price:t.price,date:t.date||new Date().toISOString(),fees:t.fees,notes:t.notes},o=await this.portfolioService.addTransaction(r);return this.convertServiceTransactionToModel(o)},"新增交易記錄")}async getPortfolioPerformance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1M";return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let r=await this.getPortfolio(e),o=await this.portfolioService.getPortfolioPerformance(r.id,t.toLowerCase());return this.convertServicePerformanceToModel(o)},"獲取投資組合績效")}async getAssetAllocation(e){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let t=await this.getPortfolio(e);return(await this.portfolioService.getAssetAllocation(t.id)).map(e=>this.convertServiceAllocationToModel(e))},"獲取資產配置")}async getTransactionHistory(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let r=await this.getPortfolio(e),o=(await this.portfolioService.getPortfolioTransactions(r.id)).map(e=>this.convertServiceTransactionToModel(e));return t?o.slice(0,t):o},"獲取交易歷史")}async updateHolding(e,t){try{return await this.portfolioModel.updateHolding(e,t.symbol,t.updates)}catch(e){throw Error("更新持股失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getPortfolioSummary(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let r=t.holdings.length>0?t.holdings.reduce((e,t)=>parseFloat(e.marketValue.replace(",",""))>parseFloat(t.marketValue.replace(",",""))?e:t):null;return{totalValue:t.totalValue,totalReturn:t.totalReturn,dayChange:t.dayChange,dayChangePercent:t.dayChangePercent,holdingsCount:t.holdings.length,topHolding:r}}catch(e){throw Error("獲取投資組合摘要失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getPerformanceAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t.performance}catch(e){throw Error("獲取績效分析失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getRiskAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let r=this.generateRiskRecommendations(t.risk.riskLevel);return{riskScore:t.risk.riskScore,riskLevel:t.risk.riskLevel,volatility:t.risk.volatility,sharpeRatio:t.risk.sharpeRatio,maxDrawdown:t.risk.maxDrawdown,beta:t.risk.beta,recommendations:r}}catch(e){throw Error("獲取風險分析失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async exportPortfolioReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";try{if(!await this.portfolioModel.getPortfolio(e))throw Error("投資組合不存在");let r="portfolio_report_".concat(e,"_").concat(new Date().toISOString().split("T")[0],".").concat(t);return{downloadUrl:"/api/reports/".concat(r),fileName:r}}catch(e){throw Error("匯出投資組合報表失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getAllocation(e){return this.getAssetAllocation(e)}async exportReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";return this.exportPortfolioReport(e,t)}calculateTransactionFee(e){return Math.max(.001425*e,20)}generateRiskRecommendations(e){switch(e){case"low":return["您的投資組合風險較低，適合穩健型投資者","可考慮增加一些成長型股票以提升報酬率","建議維持適當的現金比例"];case"medium":return["您的投資組合風險適中，配置較為均衡","建議定期檢視並調整資產配置","可考慮分散投資至不同產業"];case"high":return["您的投資組合風險較高，請注意風險控制","建議增加防御性資產的比例","考慮設定停損點以控制損失"];default:return["建議諮詢專業理財顧問"]}}constructor(){super(),this.portfolioModel=o.g.getInstance(),this.portfolioService=n.getInstance()}}}}]);