(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{1192:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(3303)}])},1539:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(7876);a(4232);var s=a(7021),l=a(9038);let n=()=>(0,r.jsxs)("footer",{className:"bg-gray-900 text-gray-300 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20"})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10 pt-12",children:[(0,r.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4",children:(0,r.jsx)(s.A,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-white",children:"FinTech Studio"}),(0,r.jsx)("p",{className:"text-gray-400",children:"智慧金融分析平台"})]})]}),(0,r.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6 max-w-md",children:"金融走勢智慧分析，讓投資更簡單。透過 AI 技術，提供即時市場分析、投資組合建議和風險評估，助您做出明智的投資決策。"}),(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)("a",{href:"https://github.com/HaoXun97/financial-analysis",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center transition-colors group",children:(0,r.jsx)(l.hL4,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-white font-semibold mb-6",children:"功能"}),(0,r.jsx)("ul",{className:"space-y-3",children:["市場分析","投資組合","AI 預測","風險管理"].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-white font-semibold mb-6",children:"支援"}),(0,r.jsx)("ul",{className:"space-y-3",children:["幫助中心","聯絡我們","隱私政策","服務條款"].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-center",children:(0,r.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["\xa9 ",new Date().getFullYear()," FinTech Studio. All rights reserved."]})})]})]})},3303:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(7876),s=a(4232),l=a(2120),n=a(4395);let i={messageEnter:{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.3,ease:"easeOut"}},avatarScale:{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:300}},buttonHover:{scale:1.05,transition:{duration:.1}},buttonTap:{scale:.95,transition:{duration:.1}}},o=s.memo(()=>(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}));o.displayName="AttachIcon",s.memo(()=>(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})).displayName="ImageIcon";let c=s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}));c.displayName="FileIcon";let d=s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}));d.displayName="RemoveIcon",s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})).displayName="RefreshIcon";let m=s.memo(()=>(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}));m.displayName="SendIcon";let h=s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}));h.displayName="CopyIcon";let x=s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}));x.displayName="CheckIcon",s.memo(()=>(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})).displayName="SettingsIcon",s.memo(()=>(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})).displayName="ClearIcon";let u=s.memo(()=>(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}));u.displayName="BotIcon";let p=s.memo(()=>(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}));p.displayName="UserIcon";let g={Send:m,Copy:h,Check:x,Bot:u,User:p,Attach:o,File:c,Remove:d},f=s.memo(e=>{let{msg:t,index:a,onCopy:l,copiedIndex:o}=e,c="user"===t.role,d=(0,s.useCallback)(()=>l(a),[l,a]);return(0,r.jsxs)(n.P.div,{initial:i.messageEnter.initial,animate:i.messageEnter.animate,transition:i.messageEnter.transition,className:"flex gap-3 mb-6 items-end ".concat(c?"justify-end":"justify-start"),children:[!c&&(0,r.jsx)(n.P.div,{initial:i.avatarScale.initial,animate:i.avatarScale.animate,transition:i.avatarScale.transition,className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center shadow-lg",children:(0,r.jsx)(g.Bot,{})}),(0,r.jsxs)("div",{className:"max-w-[75%] flex flex-col ".concat(c?"items-end":"items-start"),children:[t.files&&t.files.length>0&&(0,r.jsx)("div",{className:"mb-2 ".concat(c?"mr-0":"ml-0"),children:t.files.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 mb-1",children:[(0,r.jsx)(g.File,{}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},t))}),t.images&&t.images.length>0&&(0,r.jsx)("div",{className:"mb-2 ".concat(c?"mr-0":"ml-0"),children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2 max-w-xs",children:t.images.map((e,t)=>(0,r.jsx)("img",{src:"data:image/jpeg;base64,".concat(e),alt:"附件圖片 ".concat(t+1),className:"rounded-lg border border-gray-200 max-w-full h-auto",style:{maxHeight:"200px"}},t))})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,x:c?20:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},className:"px-5 py-3 rounded-2xl text-sm whitespace-pre-wrap break-words leading-relaxed transition-all duration-200 shadow-md hover:shadow-lg ".concat(c?"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-br-md":"bg-white text-gray-800 border border-gray-100 rounded-bl-md"),children:t.content}),(0,r.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex gap-3 items-center mt-2 px-1",children:[(0,r.jsx)("div",{className:"text-xs text-gray-400",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,r.jsxs)(n.P.button,{whileHover:i.buttonHover,whileTap:i.buttonTap,"aria-label":"複製第 ".concat(a+1," 則訊息"),onClick:d,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-gray-600 px-2 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[o===a?(0,r.jsx)(g.Check,{}):(0,r.jsx)(g.Copy,{}),(0,r.jsx)("span",{children:o===a?"已複製":"複製"})]})]})]}),c&&(0,r.jsx)(n.P.div,{initial:i.avatarScale.initial,animate:i.avatarScale.animate,transition:i.avatarScale.transition,className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-blue-600 text-white flex items-center justify-center shadow-lg",children:(0,r.jsx)(g.User,{})})]},t.id)});var y=a(1539);let b="gpt-oss",v=()=>{let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),[v,j]=(0,s.useState)(!0),[w,N]=(0,s.useState)(b),[k,C]=(0,s.useState)(!1),[L]=(0,s.useState)(["gpt-oss","gemma3:12b","deepseek-r1:8b","deepseek-r1:14b","llama3.2-vision","llava"]),[O,E]=(0,s.useState)([]),[P,S]=(0,s.useState)([]),I=(0,s.useRef)(null),M=(0,s.useRef)(null),H=(0,s.useRef)(null),T=(0,s.useRef)(null),B=()=>Math.random().toString(36).substr(2,9);(0,s.useEffect)(()=>{var e;v&&(null==(e=I.current)||e.scrollIntoView({behavior:"smooth"}))},[e,v]),(0,s.useEffect)(()=>{var e;null==(e=M.current)||e.focus()},[]);let W=(0,s.useCallback)(e=>{E(t=>t.filter((t,a)=>a!==e))},[]),z=(0,s.useCallback)(e=>{S(t=>t.filter((t,a)=>a!==e))},[]);(0,s.useEffect)(()=>{let e=M.current;if(!e)return;e.style.height="auto";let t=Math.min(200,e.scrollHeight);e.style.height="".concat(t,"px")},[a]),(0,s.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>x(null),1600);return()=>clearTimeout(e)},[h]);let A=(0,s.useMemo)(()=>e.filter(e=>""!==e.content.trim()),[e]),R=(0,s.useCallback)(e=>{let t=e.target.files;t&&(Array.from(t).forEach(e=>{let t=new FileReader;t.onload=t=>{var a;let r=(null==(a=t.target)?void 0:a.result).split(",")[1];e.type.startsWith("image/")?S(e=>[...e,r]):E(t=>[...t,{name:e.name,type:e.type,content:r}])},t.readAsDataURL(e)}),e.target&&(e.target.value=""))},[]),_=(0,s.useCallback)(async()=>{if(!a.trim()&&0===O.length&&0===P.length)return;m(null);let r=Date.now(),s={role:"user",content:a,timestamp:r,id:B(),images:P.length>0?P:void 0,files:O.length>0?O:void 0},l={role:"assistant",content:"",timestamp:r,id:B()};t(e=>[...e,s,l]),i(""),E([]),S([]),c(!0);let n=0,o=!1,d="";for(;n<=3&&!o;)try{let a=[...e,s].map(e=>{let t={role:e.role,content:e.content};if(e.images&&e.images.length>0&&(t.images=e.images),e.files&&e.files.length>0){let a=e.files.map(e=>{if(!(e.type.includes("text")||e.type.includes("json")||e.type.includes("javascript")||e.type.includes("typescript")||e.name.endsWith(".csv")||e.name.endsWith(".md")||e.name.endsWith(".txt")||e.type.includes("csv")))return"檔案：".concat(e.name," (").concat(e.type,")");try{let t=atob(e.content);return"檔案：".concat(e.name,"\n內容：\n").concat(t)}catch(t){return"檔案：".concat(e.name," (無法解析內容)")}}).join("\n\n");t.content=t.content?"".concat(t.content,"\n\n附加檔案：\n").concat(a):"附加檔案：\n".concat(a)}return t}),r=w||b,l=await fetch("http://172.25.1.24:11434/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:a})});if(!l.body)throw Error("API 無回應 body");let n=l.body.getReader(),i=new TextDecoder,c="",m=!1,f="";for(;!m;){let{value:e,done:a}=await n.read();if(m=a,e){let a=(c+=i.decode(e,{stream:!0})).split("\n");for(let e of(c=a.pop()||"",a))try{var h,x,u,p,g;let a=JSON.parse(e),r=null!=(g=null==(h=a.message)?void 0:h.content)?g:null==(p=a.choices)||null==(u=p[0])||null==(x=u.message)?void 0:x.content;"string"==typeof r&&(f+=r,t(e=>{let t=e.slice(),a=t.map(e=>e.role).lastIndexOf("assistant");return a>=0&&(t[a]={...t[a],content:f}),t}))}catch(e){}}}d=f||"（無回應）",o=!0}catch(a){if((n+=1)>3){let e=a instanceof Error?a.message||"發生錯誤":"未知錯誤";m("請求失敗：".concat(e," (嘗試 ").concat(n," 次)")),t(t=>{let a=t.slice(),r=a.map(e=>e.role).lastIndexOf("assistant");return r>=0&&(a[r]={...a[r],content:"（回應失敗） ".concat(e)}),a});break}let e=500*Math.pow(2,n);await new Promise(t=>setTimeout(t,e))}o&&t(e=>{let t=e.slice(),a=t.map(e=>e.role).lastIndexOf("assistant");return a>=0&&(t[a]={...t[a],content:d}),t}),c(!1)},[a,w,O,P,e]),D=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},[_]);(0,s.useEffect)(()=>{let e=H.current;if(!e)return;let t=()=>{j(e.scrollHeight-e.scrollTop-e.clientHeight<80)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]);let F=(0,s.useCallback)(async t=>{try{await navigator.clipboard.writeText(e[t].content),p(t),x("已複製到剪貼簿"),setTimeout(()=>p(null),1200)}catch(e){x("複製失敗")}},[e]),V=(0,s.useMemo)(()=>!o&&(a.trim().length>0||O.length>0||P.length>0),[o,a,O,P]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"w-full max-w-6xl h-[85vh] bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:(0,r.jsx)("div",{className:"flex h-full",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-gray-50/50 to-white",ref:H,children:[(0,r.jsxs)(l.N,{children:[0===e.length&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col items-center justify-center h-full text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-6 shadow-lg text-white",children:(0,r.jsx)(g.Bot,{})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"開始與 AI 對話"}),(0,r.jsx)("p",{className:"text-gray-600 max-w-md leading-relaxed",children:"輸入任何問題或想法，AI 助手將會即時為您提供幫助和回答"}),(0,r.jsx)("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-md",children:["解釋一個複雜的概念","請幫我分析數據","創意寫作協助","程式碼問題解答"].map((e,t)=>(0,r.jsx)(n.P.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t+.3},whileHover:{scale:1.02,backgroundColor:"rgb(239 246 255)"},onClick:()=>i(e),className:"p-3 text-sm text-gray-600 bg-white border border-gray-200 rounded-xl hover:border-blue-300 transition-all duration-200 shadow-sm",children:e},t))})]}),A.map((e,t)=>(0,r.jsx)(f,{msg:e,index:t,onCopy:F,copiedIndex:u},e.id)),o&&(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex justify-start mb-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white border border-gray-200 rounded-2xl rounded-bl-md px-5 py-3 shadow-md",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white",children:(0,r.jsx)(g.Bot,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex space-x-1",children:[0,1,2].map(e=>(0,r.jsx)(n.P.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2*e},className:"w-2 h-2 bg-blue-500 rounded-full"},e))}),(0,r.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:"AI 正在思考中..."})]})]})})]}),(0,r.jsx)("div",{ref:I})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 bg-white p-6",children:[d&&(0,r.jsx)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm",children:d}),(0,r.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{let t=e.slice().reverse().find(e=>"user"===e.role);if(t){var a;i(t.content),m(null),null==(a=M.current)||a.focus()}},className:"text-sm px-3 py-1 bg-red-100 hover:bg-red-200 border border-red-300 rounded-lg transition-colors",children:"重試"})]})}),(O.length>0||P.length>0)&&(0,r.jsxs)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-xl",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 mb-3 font-medium",children:"附加的檔案:"}),P.length>0&&(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:P.map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:"data:image/jpeg;base64,".concat(e),alt:"預覽 ".concat(t+1),className:"w-20 h-20 object-cover rounded-lg border border-gray-300"}),(0,r.jsx)("button",{onClick:()=>z(t),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,r.jsx)(g.Remove,{})})]},t))})}),O.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:O.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-lg px-3 py-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.File,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-800",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]})]}),(0,r.jsx)("button",{onClick:()=>W(t),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50 transition-colors",children:(0,r.jsx)(g.Remove,{})})]},t))})]}),(0,r.jsx)("div",{className:"flex gap-6",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("input",{ref:T,type:"file",multiple:!0,accept:"image/*,text/*,.pdf,.doc,.docx,.json,.js,.ts,.jsx,.tsx,.py,.java,.cpp,.c,.h,.css,.html,.xml,.md,.csv,.xlsx,.xls",onChange:R,className:"hidden"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 bg-white border border-gray-200 rounded-2xl px-3 py-2 shadow-sm",children:[(0,r.jsx)(n.P.button,{type:"button",title:"添加附件",whileHover:{scale:o?1:1.05},whileTap:{scale:o?1:.95},onClick:()=>{var e;return null==(e=T.current)?void 0:e.click()},disabled:o,"aria-label":"添加附件",className:"flex items-center justify-center w-10 h-10 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(g.Attach,{})}),(0,r.jsx)("textarea",{ref:M,value:a,onChange:e=>i(e.target.value),onKeyDown:D,placeholder:"輸入您的訊息... (Shift+Enter 換行，Enter 送出)",rows:1,className:"flex-1 bg-transparent resize-none outline-none px-2 py-2 text-base hide-scrollbar",disabled:o,style:{minHeight:"56px",maxHeight:"200px"}}),(0,r.jsx)(n.P.button,{type:"button",title:"傳送訊息",whileHover:{scale:V?1.05:1},whileTap:{scale:V?.95:1},onClick:()=>_(),disabled:!V,"aria-label":"傳送訊息",className:"flex items-center justify-center w-10 h-10 rounded-md text-white transition-all duration-200 ".concat(V?"bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-xl":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:o?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(g.Send,{})})]})})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between mt-4 text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C(e=>!e),className:"flex items-center gap-2 px-3 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("span",{children:"當前模型："}),(0,r.jsx)("span",{className:"font-medium text-blue-600",children:w}),(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(k?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,r.jsx)(l.N,{children:k&&(0,r.jsx)(n.P.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 p-2 min-w-[200px] z-50",children:(0,r.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:L.map(e=>(0,r.jsx)("button",{onClick:()=>{N(e),C(!1)},className:"w-full text-left px-3 py-2 rounded text-sm transition-colors ".concat(w===e?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:e},e))})})})]})})]})]})})}),(0,r.jsx)(l.N,{children:h&&(0,r.jsx)(n.P.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},className:"fixed bottom-6 right-6 bg-gray-900 text-white px-4 py-3 rounded-xl shadow-lg z-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.Check,{}),(0,r.jsx)("span",{children:h})]})})})]}),(0,r.jsx)(y.A,{})]})};if("undefined"!=typeof document){let e="hide-scrollbar-global-style";if(!document.getElementById(e)){let t=document.createElement("style");t.id=e,t.innerHTML="\n      .hide-scrollbar {\n        -ms-overflow-style: none; /* IE and Edge */\n        scrollbar-width: none; /* Firefox */\n      }\n      .hide-scrollbar::-webkit-scrollbar {\n        display: none; /* WebKit */\n      }\n    ",document.head.appendChild(t)}}},4684:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var r=a(4232),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(s),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){var r,s,l;r=e,s=t,l=a[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>r.createElement(m,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var a,{attr:s,size:l,title:o}=e,d=function(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,n),m=l||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(s)}},7021:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(4232);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))})}},e=>{e.O(0,[938,636,593,792],()=>e(e.s=1192)),_N_E=e.O()}]);