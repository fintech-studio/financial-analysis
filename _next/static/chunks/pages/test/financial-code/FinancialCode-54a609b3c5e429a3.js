(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{392:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/test/financial-code/FinancialCode",function(){return l(8199)}])},8199:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r});var s=l(7876),a=l(4232);let n=[{key:"tw-stock",label:"台股",api:"/api/financial-code?symbol=all_tw_stock",columns:[{key:"symbol",label:"股票代號"},{key:"name",label:"股票名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市/發行/登記日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣股票代號一覽表"},{key:"etf",label:"ETF",api:"/api/financial-code?symbol=all_etf",columns:[{key:"symbol",label:"ETF 代號"},{key:"name",label:"ETF 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETF 代號一覽表"},{key:"etn",label:"ETN",api:"/api/financial-code?symbol=all_etn",columns:[{key:"symbol",label:"ETN 代號"},{key:"name",label:"ETN 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETN 代號一覽表"},{key:"tw-index",label:"台灣指數",api:"/api/financial-code?symbol=all_tw_index",columns:[{key:"symbol",label:"指數代號"},{key:"name",label:"指數名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"發布日期"}],title:"台灣指數代號一覽表"}],r=()=>{let[e,t]=(0,a.useState)(n[0].key),[l,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),[u,b]=(0,a.useState)(""),[m,x]=(0,a.useState)(null),[p,y]=(0,a.useState)("asc"),[h,g]=(0,a.useState)(20),[k,f]=(0,a.useState)(1),[j,N]=(0,a.useState)(""),[w,v]=(0,a.useState)(""),[_,S]=(0,a.useState)(""),[C,E]=(0,a.useState)(""),[I,T]=(0,a.useState)(""),F=n.find(t=>t.key===e);(0,a.useEffect)(()=>{i(!0),d(""),b(""),x(null),y("asc"),f(1),N(""),v(""),S(""),E(""),fetch(F.api).then(e=>e.json()).then(e=>{r(e.results||[]),i(!1)}).catch(()=>{d("查詢失敗，請稍後再試。"),i(!1)})},[e]),(0,a.useEffect)(()=>{f(1)},[u,j,w,_,C,h]);let M=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.market_type).filter(Boolean))),[l]),L=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.industry_type).filter(Boolean))),[l]),O=(0,a.useMemo)(()=>l.filter(e=>{if(j&&e.market_type!==j||w&&e.industry_type!==w)return!1;if((_||C)&&e.date){let t=X(e.date);if(_&&t<_||C&&t>C)return!1}return!u.trim()||F.columns.some(t=>{let l=e[t.key];return l&&l.toString().toLowerCase().includes(u.toLowerCase())})}),[l,j,w,_,C,u,F.columns]),D=(0,a.useMemo)(()=>m?[...O].sort((e,t)=>{let l=e[m]||"",s=t[m]||"";return l<s?"asc"===p?-1:1:l>s?"asc"===p?1:-1:0}):O,[O,m,p]),B=(0,a.useMemo)(()=>D.slice((k-1)*h,k*h),[D,k,h]),A=Math.ceil(D.length/h)||1,P=e=>{m===e?y("asc"===p?"desc":"asc"):(x(e),y("asc"))};function X(e){if(!e)return"-";let t=e.trim();if(/^\d{8}$/.test(t))return"".concat(t.slice(0,4),"-").concat(t.slice(4,6),"-").concat(t.slice(6,8));if(/^\d{4}[-\/]\d{2}[-\/]\d{2}$/.test(t))return t.replace(/\//g,"-");let l=new Date(t);return isNaN(l.getTime())?t:l.toISOString().slice(0,10)}let $=()=>{let e=Number(I);!isNaN(e)&&e>=1&&e<=A&&f(e),T("")};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-pink-100 flex flex-col items-center py-10",children:(0,s.jsxs)("div",{className:"bg-white/90 p-8 rounded-2xl shadow-xl w-full max-w-7xl border border-blue-100 relative",children:[(0,s.jsxs)("button",{className:"absolute left-6 top-6 flex items-center gap-1 px-3 py-1 rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 shadow-sm transition-colors duration-150",onClick:()=>window.history.length>1?window.history.back():window.location.assign("/"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"返回"]}),(0,s.jsx)("div",{className:"flex justify-center mb-6",children:n.map(l=>(0,s.jsx)("button",{className:"px-6 py-2 mx-1 rounded-t-lg font-semibold border-b-2 transition-colors duration-200 focus:outline-none ".concat(e===l.key?"bg-blue-100 text-blue-700 border-blue-500":"bg-white text-gray-500 border-transparent hover:bg-blue-50"),onClick:()=>t(l.key),children:l.label},l.key))}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-blue-700 mb-6 text-center",children:F.title}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 ",children:[F.columns.some(e=>"market_type"===e.key)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"市場類別"}),(0,s.jsxs)("select",{className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:j,onChange:e=>{N(e.target.value),f(1)},children:[(0,s.jsx)("option",{value:"",children:"全部"}),M.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),F.columns.some(e=>"industry_type"===e.key)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"產業類別"}),(0,s.jsxs)("select",{className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:w,onChange:e=>{v(e.target.value),f(1)},children:[(0,s.jsx)("option",{value:"",children:"全部"}),L.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),F.columns.some(e=>"date"===e.key)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"日期範圍"}),(0,s.jsx)("input",{type:"date",className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:_,max:C||new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;S(t),C&&t&&t>C&&E(t),f(1)}}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"至"}),(0,s.jsx)("input",{type:"date",className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:C,min:_||void 0,max:new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;E(t),_&&t&&t<_&&S(t),f(1)}})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"每頁顯示"}),(0,s.jsx)("select",{className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:h,onChange:e=>{g(Number(e.target.value)),f(1)},children:[10,20,50,100].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"筆"})]}),(0,s.jsx)("input",{type:"text",className:"border border-blue-200 rounded px-3 py-2 w-64 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"搜尋...",value:u,onChange:e=>b(e.target.value)})]}),o?(0,s.jsx)("div",{className:"text-blue-500 text-center py-8",children:"載入中..."}):c?(0,s.jsx)("div",{className:"text-red-500 text-center py-8",children:c}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-blue-100 shadow-sm bg-white/80",children:(0,s.jsxs)("table",{className:"w-full text-sm text-center table-fixed",children:[(0,s.jsx)("colgroup",{children:F.columns.map(e=>(0,s.jsx)("col",{style:{width:"symbol"===e.key?"110px":"name"===e.key?"140px":"isin_code"===e.key?"180px":"date"===e.key?"130px":"market_type"===e.key?"110px":"industry_type"===e.key?"130px":"100px"}},e.key))}),(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-blue-100 text-blue-800",children:F.columns.map(e=>(0,s.jsx)("th",{className:"px-3 py-2 font-semibold whitespace-nowrap border-b border-blue-200 cursor-pointer select-none hover:bg-blue-200 transition",onClick:()=>P(e.key),children:(0,s.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[e.label,m===e.key&&(0,s.jsx)("span",{children:"asc"===p?"▲":"▼"})]})},e.key))})}),(0,s.jsx)("tbody",{children:B.map((e,t)=>(0,s.jsx)("tr",{className:t%2==0?"bg-white":"bg-blue-50",children:F.columns.map(t=>{let l=e[t.key];return"date"===t.key&&l&&(l=X(l)),(0,s.jsx)("td",{className:"px-3 py-2 border-b border-blue-100 whitespace-nowrap overflow-hidden text-ellipsis",children:null!=l&&""!==l?l:(0,s.jsx)("span",{className:"text-gray-300",children:"-"})},t.key)})},e.symbol+e.name))})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>f(1),disabled:1===k,children:"首頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>f(k-1),disabled:1===k,children:"上一頁"}),(0,s.jsxs)("span",{className:"text-gray-600 text-sm",children:["第 ",k," / ",A," 頁"]}),(0,s.jsx)("input",{type:"number",min:1,max:A,value:I,onChange:e=>T(e.target.value.replace(/[^\d]/g,"")),onKeyDown:e=>{"Enter"===e.key&&$()},className:"w-16 px-2 py-1 border rounded text-center text-sm",placeholder:"跳頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm",onClick:$,disabled:!I||1>Number(I)||Number(I)>A,children:"跳頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>f(k+1),disabled:k===A,children:"下一頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>f(A),disabled:k===A,children:"末頁"})]})]}),(0,s.jsxs)("div",{className:"mt-4 mb-[-8px] text-sm text-gray-400 text-center select-none",children:["共 ",O.length," 筆資料",(0,s.jsx)("br",{}),"資料更新：2025-06-26"]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(392)),_N_E=e.O()}]);