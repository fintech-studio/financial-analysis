(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{392:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/test/financial-code/FinancialCode",function(){return l(6058)}])},6058:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(7876),a=l(4232);let n=[{key:"tw-stock",label:"台股",api:"/api/financial-code?symbol=all_tw_stock",columns:[{key:"symbol",label:"股票代號"},{key:"name",label:"股票名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市/發行/登記日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣股票代號一覽表"},{key:"us-stock",label:"美股",api:"/api/financial-code?symbol=all_us_stock",columns:[{key:"symbol",label:"股票代號"},{key:"name",label:"股票名稱"},{key:"chinese_name",label:"中文股票名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"country",label:"國家"},{key:"ipo_year",label:"上市年份"},{key:"sector_type",label:"產業類股"},{key:"industry_type",label:"產業類別"}],title:"美國股票代號一覽表"},{key:"etf",label:"ETF",api:"/api/financial-code?symbol=all_etf",columns:[{key:"symbol",label:"ETF 代號"},{key:"name",label:"ETF 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETF 代號一覽表"},{key:"etn",label:"ETN",api:"/api/financial-code?symbol=all_etn",columns:[{key:"symbol",label:"ETN 代號"},{key:"name",label:"ETN 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETN 代號一覽表"},{key:"tw-index",label:"台灣指數",api:"/api/financial-code?symbol=all_tw_index",columns:[{key:"symbol",label:"指數代號"},{key:"name",label:"指數名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"發布日期"}],title:"台灣指數代號一覽表"}],r=e=>{let{label:t,value:l,options:a,onChange:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:t}),(0,s.jsxs)("select",{className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:l,onChange:e=>n(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"全部"}),a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})},o=()=>{let[e,t]=(0,a.useState)(n[0].key),[l,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(""),[b,m]=(0,a.useState)(""),[y,x]=(0,a.useState)(null),[p,h]=(0,a.useState)("asc"),[k,f]=(0,a.useState)(20),[g,j]=(0,a.useState)(1),[N,w]=(0,a.useState)(""),[_,v]=(0,a.useState)(""),[S,C]=(0,a.useState)(""),[E,I]=(0,a.useState)(""),[T,F]=(0,a.useState)(""),[M,L]=(0,a.useState)(""),[O,A]=(0,a.useState)(""),D=n.find(t=>t.key===e);(0,a.useEffect)(()=>{c(!0),u(""),m(""),x(null),h("asc"),j(1),w(""),v(""),C(""),I(""),fetch(D.api).then(e=>e.json()).then(e=>{o(e.results||[]),c(!1)}).catch(()=>{u("查詢失敗，請稍後再試。"),c(!1)})},[e,D.api]),(0,a.useEffect)(()=>{j(1)},[b,N,_,M,O,S,E,k]);let B=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.market_type).filter(e=>!!e))),[l]),P=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.industry_type).filter(e=>!!e))),[l]),X=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.sector_type).filter(e=>!!e))),[l]),$=(0,a.useMemo)(()=>Array.from(new Set(l.map(e=>e.country).filter(e=>!!e))),[l]),K=(0,a.useMemo)(()=>l.filter(t=>{if(N&&t.market_type!==N||_&&t.industry_type!==_||"us-stock"===e&&(M&&t.sector_type!==M||O&&t.country!==O))return!1;if((S||E)&&t.date){let e=G(t.date);if(S&&e<S||E&&e>E)return!1}return!b.trim()||D.columns.some(e=>{let l=t[e.key];return l&&l.toString().toLowerCase().includes(b.toLowerCase())})}),[l,N,_,S,E,b,D.columns,e,M,O]),W=(0,a.useMemo)(()=>y?[...K].sort((e,t)=>{let l=e[y]||"",s=t[y]||"";return l<s?"asc"===p?-1:1:l>s?"asc"===p?1:-1:0}):K,[K,y,p]),q=(0,a.useMemo)(()=>W.slice((g-1)*k,g*k),[W,g,k]),z=Math.ceil(W.length/k)||1;function G(e){if(!e)return"-";let t=e.trim();if(/^\d{8}$/.test(t))return"".concat(t.slice(0,4),"-").concat(t.slice(4,6),"-").concat(t.slice(6,8));if(/^\d{4}[-/]\d{2}[-/]\d{2}$/.test(t))return t.replace(/\//g,"-");let l=new Date(t);return isNaN(l.getTime())?t:l.toISOString().slice(0,10)}let H=(0,a.useCallback)(()=>{let e=Number(T);!isNaN(e)&&e>=1&&e<=z&&j(e),F("")},[T,z]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-pink-100 flex flex-col items-center py-10",children:(0,s.jsxs)("div",{className:"bg-white/90 p-8 rounded-2xl shadow-xl w-full max-w-7xl border border-blue-100 relative",children:[(0,s.jsxs)("button",{className:"absolute left-6 top-6 flex items-center gap-1 px-3 py-1 rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 shadow-sm transition-colors duration-150",onClick:()=>window.history.length>1?window.history.back():window.location.assign("/"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"返回"]}),(0,s.jsx)("div",{className:"flex justify-center mb-6",children:n.map(l=>(0,s.jsx)("button",{className:"px-6 py-2 mx-1 rounded-t-lg font-semibold border-b-2 transition-colors duration-200 focus:outline-none ".concat(e===l.key?"bg-blue-100 text-blue-700 border-blue-500":"bg-white text-gray-500 border-transparent hover:bg-blue-50"),onClick:()=>t(l.key),children:l.label},l.key))}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-blue-700 mb-6 text-center",children:D.title}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 ",children:[D.columns.some(e=>"market_type"===e.key)&&(0,s.jsx)(r,{label:"市場類別",value:N,options:B,onChange:e=>{w(e),j(1)}}),D.columns.some(e=>"industry_type"===e.key)&&(0,s.jsx)(r,{label:"產業類別",value:_,options:P,onChange:e=>{v(e),j(1)}}),"us-stock"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{label:"產業類股",value:M,options:X,onChange:e=>{L(e),j(1)}}),(0,s.jsx)(r,{label:"國家",value:O,options:$,onChange:e=>{A(e),j(1)}})]}),D.columns.some(e=>"date"===e.key)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"日期範圍"}),(0,s.jsx)("input",{type:"date",className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:S,max:E||new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;C(t),E&&t&&t>E&&I(t),j(1)}}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"至"}),(0,s.jsx)("input",{type:"date",className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:E,min:S||void 0,max:new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;I(t),S&&t&&t<S&&C(t),j(1)}})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"每頁顯示"}),(0,s.jsx)("select",{className:"border border-blue-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-200",value:k,onChange:e=>{f(Number(e.target.value)),j(1)},children:[10,20,50,100,200,500].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"筆"})]}),(0,s.jsx)("input",{type:"text",className:"border border-blue-200 rounded px-3 py-2 w-64 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"搜尋...",value:b,onChange:e=>m(e.target.value)})]}),i?(0,s.jsx)("div",{className:"text-blue-500 text-center py-8",children:"載入中..."}):d?(0,s.jsx)("div",{className:"text-red-500 text-center py-8",children:d}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-blue-100 shadow-sm bg-white/80",children:(0,s.jsxs)("table",{className:"w-full text-sm text-center table-fixed",children:[(0,s.jsx)("colgroup",{children:D.columns.map(e=>(0,s.jsx)("col",{style:{width:"symbol"===e.key?"110px":"name"===e.key?"140px":"isin_code"===e.key?"180px":"date"===e.key?"130px":"market_type"===e.key?"110px":"industry_type"===e.key?"130px":"100px"}},e.key))}),(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-blue-100 text-blue-800",children:D.columns.map(e=>(0,s.jsx)("th",{className:"px-3 py-2 font-semibold whitespace-nowrap border-b border-blue-200 cursor-pointer select-none hover:bg-blue-200 transition",onClick:()=>(e=>{y===e?h("asc"===p?"desc":"asc"):(x(e),h("asc")),j(1)})(e.key),children:(0,s.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[e.label,y===e.key&&(0,s.jsx)("span",{children:"asc"===p?"▲":"▼"})]})},e.key))})}),(0,s.jsx)("tbody",{children:q.map((e,t)=>(0,s.jsx)("tr",{className:t%2==0?"bg-white":"bg-blue-50",children:D.columns.map(t=>{let l=e[t.key];return"date"===t.key&&l&&(l=G(l)),(0,s.jsx)("td",{className:"px-3 py-2 border-b border-blue-100 whitespace-nowrap overflow-hidden text-ellipsis",children:null!=l&&""!==l?l:(0,s.jsx)("span",{className:"text-gray-300",children:"-"})},t.key)})},e.symbol+e.name))})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>j(1),disabled:1===g,children:"首頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>j(g-1),disabled:1===g,children:"上一頁"}),(0,s.jsxs)("span",{className:"text-gray-600 text-sm",children:["第 ",g," / ",z," 頁"]}),(0,s.jsx)("input",{type:"number",min:1,max:z,value:T,onChange:e=>F(e.target.value.replace(/[^\d]/g,"")),onKeyDown:e=>{"Enter"===e.key&&H()},onBlur:H,className:"w-16 px-2 py-1 border rounded text-center text-sm",placeholder:"跳頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm",onClick:H,disabled:!T||1>Number(T)||Number(T)>z,children:"跳頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>j(g+1),disabled:g===z,children:"下一頁"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded border text-sm disabled:opacity-50",onClick:()=>j(z),disabled:g===z,children:"末頁"})]})]}),(0,s.jsxs)("div",{className:"mt-4 mb-[-8px] text-sm text-gray-400 text-center select-none",children:["共 ",K.length," 筆資料",(0,s.jsx)("br",{}),"資料更新：2025-06-26"]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=392)),_N_E=e.O()}]);