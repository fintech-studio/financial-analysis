(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{1425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(7876),a=s(4232),l=s(5364),c=s(8304),n=s(643),i=s(5024),o=s(9252),d=s(8569),m=s(5395),x=s(7186),h=s(9456),u=s(5148),g=s(6284),b=s(3814),p=s(3180),j=s(1544),y=s(7310),v=s(5210),f=s(7377),N=s(6486);let w=()=>{var e,t,s,w,k;let[S,E]=(0,a.useState)("overview"),[A,C]=(0,a.useState)(!1),[P,_]=(0,a.useState)([]),[L,M]=(0,a.useState)(null),F=[{id:1,type:"buy",action:"買入",target:"台積電 (2330)",amount:"48,500",time:"2小時前",icon:l.A,color:"text-green-600",bgColor:"bg-green-100"},{id:2,type:"sell",action:"賣出",target:"鴻海 (2317)",amount:"25,100",time:"1天前",icon:c.A,color:"text-red-600",bgColor:"bg-red-100"},{id:3,type:"dividend",action:"收到股息",target:"中華電信 (2412)",amount:"3,200",time:"3天前",icon:n.A,color:"text-blue-600",bgColor:"bg-blue-100"},{id:4,type:"education",action:"完成課程",target:"技術分析基礎",time:"1週前",icon:i.A,color:"text-purple-600",bgColor:"bg-purple-100"}],{isLoading:T,isInitialized:D,error:R}=(0,N.j)({enableCache:!0,enableMockData:!0}),I=j.S.getInstance(),$=y.R.getInstance(),H=v.J.getInstance(),{data:U,loading:O,errors:W,progress:q,isComplete:V,reload:Y}=(0,f.Zi)({user:()=>I.getUserProfile("user_001"),investmentStats:()=>I.getInvestmentStats("user_001"),achievements:()=>I.getAchievements("user_001"),activities:()=>I.getRecentActivities("user_001"),watchlist:()=>H.getWatchlist("user_001"),allocation:()=>$.getAllocation("user_001"),portfolios:()=>$.getUserPortfolios("user_001")},{priority:["user","investmentStats","allocation","watchlist","activities","achievements","portfolios"],concurrent:!1,onProgress:(e,t)=>{console.log("用戶資料預加載進度: ".concat(e,"/").concat(t))}}),{values:J,errors:X,setValue:K,handleSubmit:Z,submitting:z,reset:B}=(0,f.u3)({name:(null==(e=U.user)?void 0:e.name)||"",email:(null==(t=U.user)?void 0:t.email)||"",phone:(null==(s=U.user)?void 0:s.phone)||"",bio:(null==(w=U.user)?void 0:w.bio)||"",riskLevel:(null==(k=U.user)?void 0:k.riskLevel)||"穩健型"},async e=>{U.user&&(await I.updateUserProfile(U.user.id,{name:e.name,email:e.email,phone:e.phone,bio:e.bio,riskLevel:e.riskLevel}),C(!1),await Y())},e=>({name:e.name.trim()?null:"姓名不能為空",email:e.email.includes("@")?null:"請輸入有效的電子郵件",phone:e.phone&&!/^\d{10}$/.test(e.phone.replace(/\D/g,""))?"請輸入有效的電話號碼":null,bio:null,riskLevel:null})),{data:G,loading:Q,error:ee,retry:et}=(0,f.Au)(()=>I.getInvestmentStats("user_001"),{maxRetries:3,retryDelay:2e3,retryCondition:e=>e.message.includes("網路"),onRetry:(e,t)=>{console.log("重試獲取投資統計第 ".concat(e," 次，錯誤:"),t.message)},cacheKey:"user_investment_stats",cacheTTL:6e4}),es=[{id:1,name:"投資新手",description:"完成第一筆投資交易",icon:n.A,unlocked:!0,color:"text-yellow-600"},{id:2,name:"學習達人",description:"完成5個投資課程",icon:i.A,unlocked:!0,color:"text-blue-600"},{id:3,name:"穩健投資者",description:"連續3個月獲得正報酬",icon:l.A,unlocked:!1,color:"text-green-600"},{id:4,name:"多元化專家",description:"投資組合包含5種不同資產類別",icon:o.A,unlocked:!1,color:"text-purple-600"}],{user:er,investmentStats:ea,achievements:el=es,activities:ec,watchlist:en,allocation:ei,portfolios:eo}=U;(0,a.useEffect)(()=>{U.user&&!A&&(M(U.user),K("name",U.user.name),K("email",U.user.email),K("phone",U.user.phone||""),K("bio",U.user.bio||""),K("riskLevel",U.user.riskLevel||"穩健型"))},[U.user,A,K]);let ed=async()=>{try{await Z()}catch(e){console.error("保存個人資料失敗:",e)}},em=[{id:"overview",name:"總覽",icon:o.A},{id:"portfolio",name:"投資組合",icon:d.A},{id:"activities",name:"活動記錄",icon:m.A},{id:"achievements",name:"成就",icon:n.A},{id:"settings",name:"設定",icon:x.A}];if(!D)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"正在初始化應用程式..."}),R&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:R})]})});if(O&&!V)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,r.jsx)("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2 mt-4",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(q.loaded/q.total*100,"%")}})}),(0,r.jsxs)("p",{className:"mt-4 text-gray-600",children:["載入個人資料中... (",q.loaded,"/",q.total,")"]})]})});if(Object.keys(W).length>0)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"載入失敗"}),(0,r.jsx)("ul",{className:"text-red-700 text-sm space-y-1",children:Object.entries(W).map(e=>{let[t,s]=e;return(0,r.jsxs)("li",{children:[t,": ",s]},t)})}),(0,r.jsx)("button",{onClick:Y,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"重新載入"})]})})});if(!L&&!U.user)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg p-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"找不到用戶資料"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"請先登入您的帳戶"}),(0,r.jsx)("button",{onClick:()=>window.location.href="/auth",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"前往登入"})]})})});let ex=L||U.user;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white text-2xl font-bold border-4 border-white/30",children:null==ex?void 0:ex.name.charAt(0)}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,r.jsx)(g.A,{className:"h-4 w-4 text-white"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:null==ex?void 0:ex.name}),(0,r.jsx)("p",{className:"text-blue-100 text-lg",children:null==ex?void 0:ex.level}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-blue-100",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1"}),null==ex?void 0:ex.location]}),(0,r.jsxs)("div",{className:"flex items-center text-blue-100",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-1"}),null==ex?void 0:ex.joinDate]})]})]})]})})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 border border-gray-100",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"核心數據"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"總資產"}),(0,r.jsxs)("p",{className:"font-bold text-gray-900",children:["NT$"," ",ea?(ea.totalValue/1e4).toFixed(0):"0","萬"]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm text-green-600",children:["+",(null==ea?void 0:ea.returnRate)||0,"%"]})})]}),(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"月報酬率"}),(0,r.jsxs)("p",{className:"font-bold text-gray-900",children:[(null==ea?void 0:ea.monthlyReturn)||0,"%"]})]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"勝率"}),(0,r.jsxs)("p",{className:"font-bold text-gray-900",children:[(null==ea?void 0:ea.winRate)||0,"%"]})]})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"關注股票"}),(0,r.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,r.jsx)(b.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:"space-y-3",children:[{symbol:"2330",name:"台積電",price:485.5,change:12.5,changePercent:2.65,volume:"45,231"},{symbol:"2317",name:"鴻海",price:125.5,change:-2,changePercent:-1.57,volume:"89,456"},{symbol:"2454",name:"聯發科",price:765,change:8.5,changePercent:1.12,volume:"23,789"}].map(e=>(0,r.jsx)("div",{className:"p-4 border border-gray-100 rounded-xl hover:shadow-md transition-all cursor-pointer group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.symbol}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["成交量: ",e.volume]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900",children:e.price}),(0,r.jsxs)("div",{className:"text-sm font-medium ".concat(e.change>=0?"text-green-600":"text-red-600"),children:[e.change>=0?"+":"",e.change," (",e.changePercent,"%)"]})]})]})},e.symbol))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 border border-gray-100",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"資產配置"}),(0,r.jsx)("div",{className:"space-y-4",children:[{category:"台灣股票",percentage:45,amount:45e4,color:"bg-blue-500"},{category:"美國股票",percentage:30,amount:3e5,color:"bg-green-500"},{category:"債券基金",percentage:15,amount:15e4,color:"bg-yellow-500"},{category:"現金",percentage:10,amount:1e5,color:"bg-gray-500"}].map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:e.category}),(0,r.jsxs)("span",{className:"text-gray-900",children:[e.percentage,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"".concat(e.color," h-2 rounded-full transition-all duration-500"),style:{width:"".concat(e.percentage,"%")}})}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:["NT$ ",e.amount.toLocaleString()]})]},e.category))})]})]}),(0,r.jsx)("div",{className:"lg:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl mb-8 border border-gray-100",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"flex space-x-1 px-6",children:em.map(e=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>E(e.id),className:"flex items-center py-4 px-6 font-medium text-sm transition-all duration-200 border-b-3 ".concat(S===e.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.id)})})}),(0,r.jsxs)("div",{className:"p-8",children:["overview"===S&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"績效概覽"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-2xl text-white shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"總資產價值"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["NT$"," ",ea?(ea.totalValue/1e4).toFixed(0):"0","萬"]}),(0,r.jsxs)("p",{className:"text-blue-100 text-sm mt-1",children:["較上月 +",(null==ea?void 0:ea.monthlyReturn)||0,"%"]})]}),(0,r.jsx)(c.A,{className:"h-12 w-12 text-blue-200"})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-2xl text-white shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"總收益"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["NT$"," ",ea?(ea.totalReturn/1e4).toFixed(0):"0","萬"]}),(0,r.jsxs)("p",{className:"text-green-100 text-sm mt-1",children:["報酬率 ",(null==ea?void 0:ea.returnRate)||0,"%"]})]}),(0,r.jsx)(l.A,{className:"h-12 w-12 text-green-200"})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-2xl text-white shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"最佳持股"}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:(null==ea?void 0:ea.bestStock)||"暫無數據"}),(0,r.jsxs)("p",{className:"text-purple-100 text-sm mt-1",children:["勝率 ",(null==ea?void 0:ea.winRate)||0,"%"]})]}),(0,r.jsx)(n.A,{className:"h-12 w-12 text-purple-200"})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"最近活動"}),(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"查看全部"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:F.map(e=>{let t=e.icon;return(0,r.jsxs)("div",{className:"flex items-center p-6 bg-white border border-gray-100 rounded-2xl hover:shadow-lg transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.bgColor),children:(0,r.jsx)(t,{className:"h-6 w-6 ".concat(e.color)})}),(0,r.jsxs)("div",{className:"ml-4 flex-1",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.action," ",e.target]}),e.amount&&(0,r.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["金額：NT$ ",e.amount]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-400 font-medium",children:e.time})]},e.id)})})]})]}),"portfolio"===S&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"我的投資組合"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"新增投資"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,t)=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900",children:["投資組合 ",t+1]}),(0,r.jsx)("span",{className:"text-green-600 text-sm font-medium",children:"+12.5%"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"總價值"}),(0,r.jsx)("span",{className:"font-medium",children:"NT$ 45.6萬"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"持股數量"}),(0,r.jsx)("span",{className:"font-medium",children:"8檔"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"最佳表現"}),(0,r.jsx)("span",{className:"font-medium text-green-600",children:"台積電 +15.2%"})]})]})]},t))})]}),"activities"===S&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"活動記錄"}),(0,r.jsx)("div",{className:"space-y-4",children:F.map(e=>{let t=e.icon;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border border-gray-200 rounded-2xl hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(e.bgColor),children:(0,r.jsx)(t,{className:"h-5 w-5 ".concat(e.color)})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.action," ",e.target]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.time})]})]}),e.amount&&(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["NT$ ",e.amount]})]},e.id)})})]}),"achievements"===S&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"我的成就"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:el.map(e=>{let t=e.icon;return(0,r.jsxs)("div",{className:"p-6 border-2 rounded-2xl transition-all ".concat(e.unlocked?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(e.unlocked?"bg-yellow-100":"bg-gray-200"),children:(0,r.jsx)(t,{className:"h-6 w-6 ".concat(e.unlocked?e.color:"text-gray-400")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold ".concat(e.unlocked?"text-gray-900":"text-gray-500"),children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),e.unlocked&&(0,r.jsxs)("div",{className:"mt-3 flex items-center text-sm text-yellow-600",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"已解鎖"]})]},e.id)})})]}),"settings"===S&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"個人設定"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"個人資料"}),(0,r.jsx)("button",{onClick:()=>C(!A),className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:A?"取消編輯":"編輯資料"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"姓名"}),(0,r.jsx)("input",{type:"text",value:J.name,disabled:!A,onChange:e=>K("name",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"電子信箱"}),(0,r.jsx)("input",{type:"email",value:J.email,disabled:!A,onChange:e=>K("email",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"電話號碼"}),(0,r.jsx)("input",{type:"tel",value:J.phone,disabled:!A,onChange:e=>K("phone",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"風險偏好"}),(0,r.jsxs)("select",{value:J.riskLevel,disabled:!A,onChange:e=>K("riskLevel",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 transition-colors",children:[(0,r.jsx)("option",{value:"保守型",children:"保守型"}),(0,r.jsx)("option",{value:"穩健型",children:"穩健型"}),(0,r.jsx)("option",{value:"積極型",children:"積極型"})]})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"個人簡介"}),(0,r.jsx)("textarea",{value:J.bio,disabled:!A,onChange:e=>K("bio",e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 transition-colors",placeholder:"請介紹您的投資理念和經驗..."})]}),A&&(0,r.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,r.jsx)("button",{onClick:ed,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"保存變更"}),(0,r.jsx)("button",{onClick:()=>C(!1),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition-colors",children:"取消"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"通知設定"}),(0,r.jsx)("div",{className:"space-y-6",children:[{title:"電子郵件通知",desc:"接收投資組合變動和市場動態通知",checked:!0},{title:"價格提醒",desc:"當關注股票價格達到設定條件時通知",checked:!0},{title:"學習提醒",desc:"新課程和文章發布通知",checked:!1},{title:"成就通知",desc:"解鎖新成就時的通知",checked:!0}].map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.desc})]}),(0,r.jsx)("input",{type:"checkbox",defaultChecked:e.checked,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},t))})]})]})]})]})})]})})]}),(0,r.jsx)(p.A,{})]})}},5210:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}async getStock(e){if(this.stocks.has(e))return this.stocks.get(e);let t={symbol:e,name:"2330"===e?"台積電":"股票名稱",price:"580.00",change:"+10.00",changePercent:"+1.75%",open:"570.00",high:"585.00",low:"568.00",volume:"35,862",industry:"半導體",marketCap:"15.05兆",pe:"18.5",dividend:"11.00",chartData:{labels:["09:00","10:00","11:00","12:00","13:00"],prices:[570,575,580,578,580]}};return this.stocks.set(e,t),t}async searchStocks(e){return[await this.getStock("2330"),await this.getStock("2454")].filter(e=>null!==e).filter(t=>t.symbol.includes(e)||t.name.includes(e))}async getMarketData(){return this.marketData={stock:{index:"16,234.56",change:"+123.45",changePercent:"+0.77%",volume:"2.1億",highlights:"台積電領漲科技股"},global:{dow:"34,567.89",change:"+234.56",changePercent:"+0.68%",volume:"3.2億",highlights:"美股持續上漲"},forex:{usdtwd:"31.25",change:"+0.15",changePercent:"+0.48%",volume:"12億",highlights:"台幣相對穩定"}},this.marketData}async getHotStocks(){return(await Promise.all(["2330","2454","2317","3008"].map(e=>this.getStock(e)))).filter(e=>null!==e)}async getStocks(){return[{symbol:"2330",name:"台積電",price:580,change:"+1.75%",changePercent:"+1.75%",open:570,high:585,low:568,volume:35862,industry:"半導體",marketCap:1505e4,pe:18.5,pb:4.2,dividendYield:1.9,high52w:625,low52w:445,priceHistory:[570,575,580,578,580]},{symbol:"2454",name:"聯發科",price:950,change:"+2.15%",changePercent:"+2.15%",open:925,high:955,low:920,volume:28450,industry:"半導體",marketCap:152e4,pe:15.2,pb:3.8,dividendYield:2.1,high52w:1100,low52w:680,priceHistory:[925,930,950,948,950]},{symbol:"2317",name:"鴻海",price:105,change:"-0.95%",changePercent:"-0.95%",open:106,high:107,low:104,volume:45200,industry:"電子",marketCap:146e4,pe:12.8,pb:1.2,dividendYield:4.5,high52w:115,low52w:88,priceHistory:[106,105,105,104,105]}]}constructor(){this.stocks=new Map,this.marketData={}}}class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}async getStock(e){try{let t=await this.stockModel.getStock(e);if(!t)throw Error("找不到股票代號 ".concat(e));return t}catch(e){throw Error("獲取股票資料失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async searchStocks(e){try{if(!e.query||0===e.query.trim().length)throw Error("搜尋關鍵字不能為空");let t=await this.stockModel.searchStocks(e.query);if(e.limit&&e.limit>0)return t.slice(0,e.limit);return t}catch(e){throw Error("股票搜尋失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getMarketData(e){try{let t=await this.stockModel.getMarketData();switch(e.type){case"stock":return{stock:t.stock};case"global":return{global:t.global};case"forex":return{forex:t.forex};default:return t}}catch(e){throw Error("獲取市場資料失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getHotStocks(){try{return await this.stockModel.getHotStocks()}catch(e){throw Error("獲取熱門股票失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getStockPrice(e){try{let t=await this.stockModel.getStock(e.symbol);if(!t)throw Error("找不到股票代號 ".concat(e.symbol));let s=parseFloat(t.price),r=parseFloat(t.change.replace("+","")),a=parseFloat(t.changePercent.replace("%","").replace("+",""));return{symbol:t.symbol,currentPrice:s,change:r,changePercent:a,volume:t.volume,timestamp:new Date().toISOString()}}catch(e){throw Error("獲取股價失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getStockNews(e){try{let t=await this.stockModel.getStock(e);if(!t)throw Error("找不到股票代號 ".concat(e));return t.news||[{title:"".concat(t.name,"第三季財報超預期"),date:"2024-06-01",source:"經濟日報"},{title:"分析師上調".concat(t.name,"目標價"),date:"2024-05-30",source:"工商時報"}]}catch(e){throw Error("獲取股票新聞失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async addToWatchlist(e,t){try{if(!await this.stockModel.getStock(t))throw Error("找不到股票代號 ".concat(t));return!0}catch(e){throw Error("添加到觀察清單失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async removeFromWatchlist(e,t){try{return!0}catch(e){throw Error("從觀察清單移除失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getWatchlist(e){try{return(await Promise.all(["2330","2454","2317","3008","2882"].map(async e=>await this.stockModel.getStock(e)))).filter(e=>null!==e)}catch(e){throw console.error("Error fetching watchlist:",e),Error("無法獲取關注列表")}}async getStocks(e){try{let t=await this.stockModel.getStocks();if(!e)return t;let s=t;if(e.sector&&"all"!==e.sector&&(s=s.filter(t=>{var s;return null==(s=t.industry)?void 0:s.toLowerCase().includes(e.sector.toLowerCase())})),e.search){let t=e.search.toLowerCase();s=s.filter(e=>e.name.toLowerCase().includes(t)||e.symbol.toLowerCase().includes(t))}return s}catch(e){throw Error("獲取股票列表失敗")}}async getTechnicalAnalysis(){try{return{bullish:[{symbol:"2330",name:"台積電",pattern:"突破阻力線",confidence:85},{symbol:"2454",name:"聯發科",pattern:"黃金交叉",confidence:78}],bearish:[{symbol:"2317",name:"鴻海",pattern:"頭肩頂",confidence:72},{symbol:"3008",name:"大立光",pattern:"死亡交叉",confidence:68}]}}catch(e){throw Error("獲取技術分析失敗")}}async addFavoriteStock(e,t){try{console.log("User ".concat(e," added ").concat(t," to favorites"))}catch(e){throw Error("添加收藏股票失敗")}}async removeFavoriteStock(e,t){try{console.log("User ".concat(e," removed ").concat(t," from favorites"))}catch(e){throw Error("移除收藏股票失敗")}}convertStockForUI(e){return{symbol:e.symbol,name:e.name,price:parseFloat(e.price.replace(/,/g,"")),change:parseFloat(e.change.replace(/[+,]/g,"")),changePercent:parseFloat(e.changePercent.replace(/[+%]/g,"")),volume:e.volume}}constructor(){this.stockModel=r.getInstance()}}},8172:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(1425)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[938,386,980,636,593,792],()=>t(8172)),_N_E=e.O()}]);