(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6084:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/market-analysis/financial-code/FinancialCode",function(){return a(6085)}])},6085:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(7876),l=a(4232);let r=[{key:"tw-stock",label:"台股",api:"/api/financial-code?symbol=all_tw_stock",columns:[{key:"symbol",label:"股票代號"},{key:"name",label:"股票名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市/發行/登記日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣股票代號一覽表",icon:"\uD83C\uDDF9\uD83C\uDDFC",color:"from-blue-500 to-indigo-600"},{key:"us-stock",label:"美股",api:"/api/financial-code?symbol=all_us_stock",columns:[{key:"symbol",label:"股票代號"},{key:"name",label:"股票名稱"},{key:"chinese_name",label:"中文股票名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"country",label:"國家"},{key:"ipo_year",label:"上市年份"},{key:"sector_type",label:"產業類股"},{key:"industry_type",label:"產業類別"}],title:"美國股票代號一覽表",icon:"\uD83C\uDDFA\uD83C\uDDF8",color:"from-emerald-500 to-teal-600"},{key:"etf",label:"ETF",api:"/api/financial-code?symbol=all_etf",columns:[{key:"symbol",label:"ETF 代號"},{key:"name",label:"ETF 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETF 代號一覽表",icon:"\uD83D\uDCC8",color:"from-purple-500 to-violet-600"},{key:"etn",label:"ETN",api:"/api/financial-code?symbol=all_etn",columns:[{key:"symbol",label:"ETN 代號"},{key:"name",label:"ETN 名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"上市日期"},{key:"market_type",label:"市場類別"},{key:"industry_type",label:"產業類別"}],title:"台灣 ETN 代號一覽表",icon:"\uD83D\uDCCA",color:"from-orange-500 to-red-600"},{key:"tw-index",label:"台灣指數",api:"/api/financial-code?symbol=all_tw_index",columns:[{key:"symbol",label:"指數代號"},{key:"name",label:"指數名稱"},{key:"isin_code",label:"ISIN 國際證券識別號碼"},{key:"date",label:"發布日期"}],title:"台灣指數代號一覽表",icon:"\uD83D\uDCC9",color:"from-cyan-500 to-blue-600"}],o=e=>{let{label:t,value:a,options:l,onChange:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600 text-xs font-medium",children:t}),(0,s.jsxs)("select",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent hover:border-gray-300 transition-all duration-200 shadow-sm min-w-[120px]",value:a,onChange:e=>r(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"全部"}),l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})},n=()=>{let[e,t]=(0,l.useState)(r[0].key),[a,n]=(0,l.useState)([]),[i,d]=(0,l.useState)(!0),[c,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[b,y]=(0,l.useState)(null),[p,h]=(0,l.useState)("asc"),[g,f]=(0,l.useState)(20),[w,j]=(0,l.useState)(1),[k,v]=(0,l.useState)(""),[N,_]=(0,l.useState)(""),[S,C]=(0,l.useState)(""),[E,I]=(0,l.useState)(""),[M,T]=(0,l.useState)(""),[L,F]=(0,l.useState)(""),[z,B]=(0,l.useState)(""),O=r.find(t=>t.key===e);(0,l.useEffect)(()=>{d(!0),m(""),x(""),y(null),h("asc"),j(1),v(""),_(""),C(""),I(""),F(""),B(""),fetch(O.api).then(e=>e.json()).then(e=>{n(e.results||[]),d(!1)}).catch(()=>{m("查詢失敗，請稍後再試。"),d(!1)})},[e,O.api]),(0,l.useEffect)(()=>{j(1)},[u,k,N,L,z,S,E,g]);let A=(0,l.useMemo)(()=>Array.from(new Set(a.map(e=>e.market_type).filter(e=>!!e))),[a]),D=(0,l.useMemo)(()=>Array.from(new Set(a.map(e=>e.industry_type).filter(e=>!!e))),[a]),P=(0,l.useMemo)(()=>Array.from(new Set(a.map(e=>e.sector_type).filter(e=>!!e))),[a]),W=(0,l.useMemo)(()=>Array.from(new Set(a.map(e=>e.country).filter(e=>!!e))),[a]),X=(0,l.useMemo)(()=>a.filter(t=>{if(k&&t.market_type!==k||N&&t.industry_type!==N||"us-stock"===e&&(L&&t.sector_type!==L||z&&t.country!==z))return!1;if((S||E)&&t.date){let e=G(t.date);if(S&&e<S||E&&e>E)return!1}return!u.trim()||O.columns.some(e=>{let a=t[e.key];return a&&a.toString().toLowerCase().includes(u.toLowerCase())})}),[a,k,N,S,E,u,O.columns,e,L,z]),$=(0,l.useMemo)(()=>b?[...X].sort((e,t)=>{let a=e[b]||"",s=t[b]||"";return a<s?"asc"===p?-1:1:a>s?"asc"===p?1:-1:0}):X,[X,b,p]),K=(0,l.useMemo)(()=>$.slice((w-1)*g,w*g),[$,w,g]),q=Math.ceil($.length/g)||1;function G(e){if(!e)return"-";let t=e.trim();if(/^\d{8}$/.test(t))return"".concat(t.slice(0,4),"-").concat(t.slice(4,6),"-").concat(t.slice(6,8));if(/^\d{4}[-/]\d{2}[-/]\d{2}$/.test(t))return t.replace(/\//g,"-");let a=new Date(t);return isNaN(a.getTime())?t:a.toISOString().slice(0,10)}let H=(0,l.useCallback)(()=>{let e=Number(M);!isNaN(e)&&e>=1&&e<=q&&j(e),T("")},[M,q]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex flex-col items-center py-10",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm p-8 rounded-3xl shadow-2xl w-full max-w-7xl border border-white/20 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-100/30 to-indigo-200/30 rounded-full -translate-y-32 translate-x-32 blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-purple-100/30 to-pink-200/30 rounded-full translate-y-24 -translate-x-24 blur-3xl"}),(0,s.jsxs)("button",{className:"absolute left-4 top-4 flex items-center gap-2 px-4 py-2 rounded-xl bg-white/90 hover:bg-white hover:scale-105 text-gray-700 hover:text-blue-600 border border-gray-200 shadow-lg transition-all duration-200 backdrop-blur-sm z-50",onClick:()=>window.history.length>1?window.history.back():window.location.assign("/"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),(0,s.jsx)("span",{className:"font-medium",children:"返回"})]}),(0,s.jsx)("div",{className:"flex justify-center mb-8 relative z-10 mt-4",children:r.map(a=>(0,s.jsxs)("button",{className:"relative px-6 py-3 mx-1 rounded-t-2xl font-semibold border-b-3 transition-all duration-300 focus:outline-none group ".concat(e===a.key?"bg-gradient-to-b ".concat(a.color," text-white border-transparent shadow-lg transform -translate-y-1"):"bg-white/70 text-gray-600 border-transparent hover:bg-white hover:text-gray-800 hover:shadow-md"),onClick:()=>t(a.key),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:a.icon}),(0,s.jsx)("span",{children:a.label})]}),e!==a.key&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/50 to-white/20 rounded-t-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},a.key))}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r ".concat(O.color," bg-clip-text text-transparent mb-8 text-center"),children:O.title}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50/50 rounded-2xl p-6 mb-6 border border-gray-100 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-end mb-4 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-end gap-4 flex-wrap",children:[O.columns.some(e=>"market_type"===e.key)&&(0,s.jsx)(o,{label:"市場類別",value:k,options:A,onChange:e=>{v(e),j(1)}}),O.columns.some(e=>"industry_type"===e.key)&&(0,s.jsx)(o,{label:"產業類別",value:N,options:D,onChange:e=>{_(e),j(1)}}),"us-stock"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{label:"產業類股",value:L,options:P,onChange:e=>{F(e),j(1)}}),(0,s.jsx)(o,{label:"國家",value:z,options:W,onChange:e=>{B(e),j(1)}})]}),O.columns.some(e=>"date"===e.key)&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600 text-xs font-medium",children:"日期範圍"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"date",className:"bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent shadow-sm",value:S,max:E||new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;C(t),E&&t&&t>E&&I(t),j(1)}}),(0,s.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"至"}),(0,s.jsx)("input",{type:"date",className:"bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent shadow-sm",value:E,min:S||void 0,max:new Date().toISOString().slice(0,10),onChange:e=>{let t=e.target.value;I(t),S&&t&&t<S&&C(t),j(1)}})]})]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600 text-xs font-medium",children:"每頁顯示"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("select",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent shadow-sm",value:g,onChange:e=>{f(Number(e.target.value)),j(1)},children:[10,20,50,100,200,500].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("span",{className:"text-gray-500 text-sm font-medium",children:"筆"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600 text-xs font-medium",children:"搜尋"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",className:"bg-white border border-gray-200 rounded-lg pl-10 pr-4 py-2 w-64 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent shadow-sm",placeholder:"輸入關鍵字搜尋...",value:u,onChange:e=>x(e.target.value)}),(0,s.jsx)("svg",{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]})]})}),i?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-blue-100 rounded-full animate-spin border-t-blue-500"}),(0,s.jsx)("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent rounded-full animate-ping border-t-blue-300"})]}),(0,s.jsx)("div",{className:"mt-4 text-blue-600 font-medium animate-pulse",children:"載入中..."})]}):c?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,s.jsx)("div",{className:"text-red-500 text-lg font-medium mb-2",children:c}),(0,s.jsx)("div",{className:"text-gray-500",children:"請檢查網路連線或稍後再試"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-center table-fixed",children:[(0,s.jsx)("colgroup",{children:O.columns.map(e=>(0,s.jsx)("col",{style:{width:"symbol"===e.key?"110px":"name"===e.key?"140px":"isin_code"===e.key?"180px":"date"===e.key?"130px":"market_type"===e.key?"110px":"industry_type"===e.key?"130px":"100px"}},e.key))}),(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-gradient-to-r ".concat(O.color," text-white"),children:O.columns.map(e=>(0,s.jsx)("th",{className:"px-3 py-4 font-bold whitespace-nowrap border-b-2 border-white/20 cursor-pointer select-none hover:bg-white/10 transition-all duration-200",onClick:()=>(e=>{b===e?h("asc"===p?"desc":"asc"):(y(e),h("asc")),j(1)})(e.key),children:(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("svg",{className:"w-3 h-3 transition-colors ".concat(b===e.key&&"asc"===p?"text-yellow-300":"text-white/50"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})}),(0,s.jsx)("svg",{className:"w-3 h-3 transition-colors ".concat(b===e.key&&"desc"===p?"text-yellow-300":"text-white/50"),fill:"currentColor",viewBox:"0 0 20 20",style:{transform:"rotate(180deg)"},children:(0,s.jsx)("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})]})]})},e.key))})}),(0,s.jsx)("tbody",{children:K.map((e,t)=>(0,s.jsx)("tr",{className:"border-b border-gray-100 hover:bg-blue-50/70 transition-all duration-200 ".concat(t%2==0?"bg-white":"bg-gray-50/50"),children:O.columns.map(t=>{let a=e[t.key];return"date"===t.key&&a&&(a=G(a)),(0,s.jsx)("td",{className:"px-3 py-3 border-b border-gray-50 whitespace-nowrap overflow-hidden text-ellipsis",children:null!=a&&""!==a?(0,s.jsx)("span",{className:"font-medium text-gray-700",children:a}):(0,s.jsx)("span",{className:"text-gray-300",children:"-"})},t.key)})},e.symbol+e.name))})]})})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-3 mt-6",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg bg-white border border-gray-200 text-sm font-medium hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",onClick:()=>j(1),disabled:1===w,children:"首頁"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg bg-white border border-gray-200 text-sm font-medium hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",onClick:()=>j(w-1),disabled:1===w,children:"上一頁"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"第"}),(0,s.jsx)("span",{className:"text-blue-600 font-bold",children:w}),(0,s.jsxs)("span",{className:"text-gray-600 text-sm font-medium",children:["/ ",q," 頁"]})]}),(0,s.jsx)("input",{type:"number",min:1,max:q,value:M,onChange:e=>T(e.target.value.replace(/[^\d]/g,"")),onKeyDown:e=>{"Enter"===e.key&&H()},onBlur:H,className:"w-20 px-3 py-2 border border-gray-200 rounded-lg text-center text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent shadow-sm",placeholder:"跳頁"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",onClick:H,disabled:!M||1>Number(M)||Number(M)>q,children:"跳頁"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg bg-white border border-gray-200 text-sm font-medium hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",onClick:()=>j(w+1),disabled:w===q,children:"下一頁"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg bg-white border border-gray-200 text-sm font-medium hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm",onClick:()=>j(q),disabled:w===q,children:"末頁"})]})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center space-y-2",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["共 ",(0,s.jsx)("span",{className:"font-bold text-blue-600",children:X.length})," 筆資料"]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"資料更新：2025-06-26"})]})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=6084)),_N_E=e.O()}]);