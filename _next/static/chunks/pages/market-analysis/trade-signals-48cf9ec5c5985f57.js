(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{992:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/market-analysis/trade-signals",function(){return r(6275)}])},1539:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(7876);r(4232);var a=r(7021),l=r(9038);let i=()=>(0,s.jsxs)("footer",{className:"bg-gray-900 text-gray-300 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20"})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10 pt-12",children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)(a.A,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-white",children:"FinTech Studio"}),(0,s.jsx)("p",{className:"text-gray-400",children:"智慧金融分析平台"})]})]}),(0,s.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6 max-w-md",children:"金融走勢智慧分析，讓投資更簡單。透過 AI 技術，提供即時市場分析、訊號分析和交易建議，助您做出明智的投資決策。"}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)("a",{href:"https://github.com/fintech-studio/financial-analysis",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center transition-colors group",children:(0,s.jsx)(l.hL4,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-semibold mb-6",children:"功能"}),(0,s.jsx)("ul",{className:"space-y-3",children:["市場分析","財經新聞","AI 預測","AI 助理"].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:["/market-analysis","/news","/predict","/chat"][["市場分析","財經新聞","AI 預測","AI 助理"].indexOf(e)],className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-semibold mb-6",children:"支援"}),(0,s.jsx)("ul",{className:"space-y-3",children:["幫助中心","聯絡我們","隱私政策","服務條款"].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-center",children:(0,s.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["\xa9 ",new Date().getFullYear()," FinTech Studio. All rights reserved."]})})]})]})},2283:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var s=r(6971);class a extends s.d{static getInstance(){return a.instance||(a.instance=new a),a.instance}logInfo(e,t){this.enableLog&&console.log("[DatabaseService] ".concat(e),t||"")}logError(e,t){this.enableLog&&console.error("[DatabaseService] ".concat(e),t||"")}getApiBaseUrl(){return window.location.origin}extractError(e){return e.error||e.message||"操作失敗"}validateConnectionConfig(e){if(!e.server)throw Error("伺服器地址不能為空");if(!e.user||!e.password)throw Error("SQL Server 驗證模式需要提供用戶名和密碼")}async testConnection(e){try{this.logInfo("開始測試數據庫連接",{server:e.server,database:e.database||"預設",user:e.user}),this.validateConnectionConfig(e);let t=this.getApiBaseUrl(),r=await fetch("".concat(t,"/api/database/test-connection"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();if(s.success)return this.logInfo("數據庫連接測試成功",s.message),s;return this.logError("數據庫連接測試失敗",s.message),s}catch(e){return this.logError("數據庫連接測試發生錯誤",e),{success:!1,message:"連接失敗：".concat(e instanceof Error?e.message:"網路錯誤")}}}async executeQuery(e,t,r){try{var s,a;if(this.logInfo("開始執行 SQL 查詢",{query:t.substring(0,100)+"..."}),!t||!t.trim())return{success:!1,error:"SQL 查詢語句不能為空"};let l=this.getApiBaseUrl(),i=await fetch("".concat(l,"/api/database/execute-query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e,query:t,params:r})}),n=await i.json();if(!n.success)return this.logError("SQL 查詢執行失敗",this.extractError(n)),{success:!1,error:this.extractError(n)};return this.logInfo("SQL 查詢執行成功",{recordCount:(null==(s=n.data)?void 0:s.length)||0}),{success:!0,data:n.data||[],count:(null==(a=n.data)?void 0:a.length)||0,message:n.message}}catch(e){return this.logError("SQL 查詢執行發生錯誤",e),{success:!1,error:"查詢失敗：".concat(e instanceof Error?e.message:"網路錯誤")}}}async getTableList(e){try{this.logInfo("開始獲取數據庫表列表");let t=await this.executeQuery(e,"SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME");if(t.success&&t.data){let e=t.data.map(e=>e.TABLE_NAME);return this.logInfo("成功獲取表列表",{tableCount:e.length}),e}{let e=this.extractError(t);if(e.includes("登入失敗"))return this.logError("登入失敗：請檢查使用者名稱、密碼，或確認帳號是否有存取該資料庫的權限。如有疑問請聯絡資料庫管理員。",e),[];return this.logError("獲取表列表失敗",e),[]}}catch(e){return this.logError("獲取表列表失敗",e),[]}}async getTableSchema(e,t){try{this.logInfo("開始獲取表結構",{tableName:t});let r=await this.executeQuery(e,"SELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE, COLUMN_DEFAULT, CHARACTER_MAXIMUM_LENGTH, NUMERIC_PRECISION, NUMERIC_SCALE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName ORDER BY ORDINAL_POSITION",{tableName:t});if(r.success&&r.data)return this.logInfo("成功獲取表結構",{columnCount:r.data.length}),r.data;throw Error(this.extractError(r))}catch(e){throw this.logError("獲取表結構失敗",e),Error(e instanceof Error?e.message:"獲取表結構失敗")}}async getDatabaseList(e){try{this.logInfo("開始獲取資料庫列表");let t={...e,database:"master"},r=await this.executeQuery(t,"SELECT name FROM sys.databases WHERE database_id > 4 ORDER BY name");if(r.success&&r.data){let e=r.data.map(e=>e.name);return this.logInfo("成功獲取資料庫列表",{databaseCount:e.length}),e}throw Error(this.extractError(r))}catch(e){throw this.logError("獲取資料庫列表失敗",e),Error(e instanceof Error?e.message:"獲取資料庫列表失敗")}}constructor(){super(),this.enableLog=!0}}},4254:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4232);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},4684:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(4232),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=s.createContext&&s.createContext(a),i=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,a,l;s=e,a=t,l=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(x,n({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function x(e){var t=t=>{var r,{attr:a,size:l,title:o}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)r=l[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),x=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==l?s.createElement(l.Consumer,null,e=>t(e)):t(a)}},6275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(7876),a=r(4232),l=r(1539),i=r(2283),n=r(294),o=r(1306),c=r(7043),d=r(8787),x=r(4254);function u(e){if(!e)return"";let t=new Date(String(e));return isNaN(t.getTime())?String(e):t.toLocaleString()}function m(e){return e?e.includes("買")?{text:e,cls:"border-green-200 text-green-700 bg-white"}:e.includes("賣")?{text:e,cls:"border-red-200 text-red-700 bg-white"}:{text:e,cls:"border-gray-200 text-gray-700 bg-white"}:{text:"無訊號",cls:"border-gray-200 text-gray-600 bg-white"}}function h(e){if(null==e||""===e)return"-";let t=Number(e);return isNaN(t)?String(e):t.toLocaleString()}let g=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,s.jsx)("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-indigo-400 rounded-full animate-spin",style:{animationDelay:"0.3s",animationDuration:"1.2s"}})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl font-semibold text-gray-700 mb-2",children:"查詢中..."}),(0,s.jsx)("p",{className:"text-gray-500",children:"正在搜尋交易訊號資料"})]})]}),b=e=>{let{signal:t}=e,r=m(t);return(0,s.jsx)("span",{className:"inline-block px-3 py-1 text-sm rounded-full border ".concat(r.cls),children:r.text})},p=e=>{let{children:t,className:r=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat(r),children:[t,(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white/70 transition-all duration-300 group-hover:text-white group-focus-within:text-white group-focus-within:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})},f=e=>{let{className:t="",children:r,...a}=e;return(0,s.jsx)(p,{children:(0,s.jsx)("select",{...a,className:"".concat(t," appearance-none cursor-pointer pr-10"),children:r})})},j=()=>{let[e,t]=(0,a.useState)(""),[r,p]=(0,a.useState)("1d"),[j,v]=(0,a.useState)("market_stock_tw"),[y,N]=(0,a.useState)(!1),[w,E]=(0,a.useState)(""),[S,C]=(0,a.useState)({}),[_,k]=(0,a.useState)({}),[O,D]=(0,a.useState)(null),[L,A]=(0,a.useState)("desc");(0,a.useEffect)(()=>{let e=Object.keys(S);k(t=>{let r={...t};return e.forEach(e=>{r[e]||(r[e]={visible:!0,search:"",page:1,pageSize:10})}),Object.keys(r).forEach(t=>{e.includes(t)||delete r[t]}),r})},[S]);let T=e=>{var t;return null!=(t=_[e])?t:{visible:!0,search:"",page:1,pageSize:10}},M=(e,t)=>{k(r=>({...r,[e]:{...T(e),...t}}))},R=(0,a.useCallback)(e=>"market_futures"===j||"market_forex"===j||"market_index"===j||"market_etf"===j||"market_stock_us"===j||"market_stock_tw"===j||"market_crypto"===j?e.replace(RegExp("[^0-9A-Za-z_/.\\-=^]","g"),"").toUpperCase():e.replace(/[^0-9A-Za-z]/g,"").toUpperCase(),[j]),I=(0,a.useCallback)(async()=>{let t=R(e);if(!t)return void E("請輸入股票代號，例如 2330 或 0050");N(!0),E(""),C({});try{let e=i.B.getInstance(),s={user:"",password:"",server:"",database:j},a=[];("1d"===r||"both"===r)&&a.push({key:"1d",sql:"SELECT TOP (500) * FROM trade_signals_1d WHERE symbol = @symbol ORDER BY [datetime] DESC"}),("1h"===r||"both"===r)&&a.push({key:"1h",sql:"SELECT TOP (500) * FROM trade_signals_1h WHERE symbol = @symbol ORDER BY [datetime] DESC"});let l={};for(let r of a){let a=await e.executeQuery(s,r.sql,{symbol:t});if(!a.success){E(a.error||"查詢失敗"),N(!1);return}l[r.key]=a.data||[]}C(l)}catch(e){E(e instanceof Error?e.message:"未知錯誤")}finally{N(!1)}},[e,r,R]),B=(0,a.useCallback)(e=>{let t={},r={},s=[],a=["MA_Cross","BB_Signal","MACD_Cross","MACD_Div","RSI_Signal","KD_Signal","SR_Signal","Volume_Anomaly","EMA_Cross","CCI_Signal","WILLR_Signal","MOM_Signal","Anomaly"];for(let g of e.slice(0,200)){var l,i,n,o,c,d,x,m;let e=String(null!=(i=null!=(l=g.Trade_Signal)?l:g.signal)?i:"");e&&(t[e]=(t[e]||0)+1),a.forEach(e=>{let t=g[e];null!=t&&""!==String(t)&&"0"!==String(t)&&(r[e]=(r[e]||0)+1)}),s.push({date:u(null!=(n=g.datetime)?n:g.date),price:h(null!=(o=g.close_price)?o:g.close),signal:String(null!=(d=null!=(c=g.Trade_Signal)?c:g.signal)?d:""),strength:String(null!=(m=null!=(x=g.Signal_Strength)?x:g.strength)?m:"")})}return{counts:t,indicatorsSorted:Object.entries(r).sort((e,t)=>t[1]-e[1]),timeline:s}},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:"relative bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center overflow-hidden shadow-2xl",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-20",children:(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n                linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),\n                linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px)\n              ",backgroundSize:"50px 50px"}})}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full",children:[(0,s.jsx)("div",{className:"absolute top-12 left-12 w-24 h-24 bg-white opacity-5 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"absolute bottom-12 right-24 w-36 h-36 bg-white opacity-5 rounded-full animate-pulse",style:{animationDelay:"1s"}}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-72 h-72 bg-gradient-radial from-white/10 to-transparent rounded-full"}),(0,s.jsx)("div",{className:"absolute top-24 right-12 w-4 h-4 bg-white opacity-20 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"absolute bottom-24 left-24 w-3 h-3 bg-white opacity-30 rounded-full animate-pulse",style:{animationDelay:"1.5s"}}),(0,s.jsx)("div",{className:"absolute top-48 left-1/4 w-5 h-5 bg-white opacity-15 rounded-full animate-bounce",style:{animationDelay:"2s"}}),(0,s.jsx)("div",{className:"absolute top-32 right-1/3 w-2 h-2 bg-white opacity-25 rounded-full animate-pulse",style:{animationDelay:"0.5s"}})]}),(0,s.jsx)("div",{className:"relative max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-16 z-10 w-full",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-8",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"p-4 bg-white/10 rounded-3xl backdrop-blur-sm mr-6 group hover:bg-white/20 transition-all duration-300 shadow-lg",children:(0,s.jsx)("div",{className:"w-10 h-10 flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"h-8 w-8 text-white"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl lg:text-5xl font-bold text-white tracking-tight leading-tight",children:"進階交易訊號分析"}),(0,s.jsx)("p",{className:"text-blue-200 mt-3 text-xl font-medium",children:"提供股票與加密貨幣等等的交易訊號查詢與分析工具。"})]})]}),(0,s.jsx)("p",{className:"text-blue-200 text-xl max-w-3xl leading-relaxed mb-8",children:"查詢並分析技術指標產生的交易訊號，協助投資人做出更明智的交易決策。"}),(0,s.jsxs)("form",{className:"flex flex-col xl:flex-row gap-4 max-w-5xl",onSubmit:e=>{e.preventDefault(),y||I()},children:[(0,s.jsx)("div",{className:"flex-1 min-w-0 relative",children:(0,s.jsx)("input",{type:"text",className:"w-full px-6 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-2xl text-white placeholder-blue-200 focus:outline-none focus:border-white/40 transition-all duration-300 text-lg min-w-80",placeholder:"輸入市場代號...",value:e,onChange:e=>t(e.target.value),maxLength:15,autoFocus:!0})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 flex-shrink-0",children:[(0,s.jsxs)(f,{value:r,onChange:e=>p(e.target.value),className:"px-5 py-4 border-2 border-white/20 rounded-2xl bg-white/10 backdrop-blur-sm text-white focus:outline-none focus:border-white/40 transition-all duration-300 hover:border-white/30 min-w-32",children:[(0,s.jsx)("option",{value:"1d",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCCA 日線"}),(0,s.jsx)("option",{value:"1h",className:"bg-white text-gray-900 py-2",children:"⏰ 小時線"}),(0,s.jsx)("option",{value:"both",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCC8 日線&小時線"})]}),(0,s.jsxs)(f,{value:j,onChange:e=>v(e.target.value),className:"px-5 py-4 border-2 border-white/20 rounded-2xl bg-white/10 backdrop-blur-sm text-white focus:outline-none focus:border-white/40 transition-all duration-300 hover:border-white/30 min-w-48",children:[(0,s.jsx)("option",{value:"market_stock_tw",className:"bg-white text-gray-900 py-2",children:"\uD83C\uDDF9\uD83C\uDDFC 台股"}),(0,s.jsx)("option",{value:"market_stock_us",className:"bg-white text-gray-900 py-2",children:"\uD83C\uDDFA\uD83C\uDDF8 美股"}),(0,s.jsx)("option",{value:"market_crypto",className:"bg-white text-gray-900 py-2",children:"\uD83C\uDF10 加密貨幣"}),(0,s.jsx)("option",{value:"market_forex",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCB1 外匯"}),(0,s.jsx)("option",{value:"market_etf",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCCA ETF"}),(0,s.jsx)("option",{value:"market_futures",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCC8 期貨"}),(0,s.jsx)("option",{value:"market_index",className:"bg-white text-gray-900 py-2",children:"\uD83D\uDCC9 指數"})]}),(0,s.jsxs)("button",{type:"submit",className:"px-8 py-4 bg-white text-blue-900 font-bold rounded-2xl hover:bg-blue-50 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 relative overflow-hidden group flex items-center gap-2 min-w-28 justify-center",disabled:y||!e,children:[(0,s.jsx)("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-500 opacity-0 group-hover:opacity-10 transition-opacity"}),y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 relative",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"relative",children:"查詢中..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"h-5 w-5 relative"}),(0,s.jsx)("span",{className:"relative",children:"查詢"})]})]})]})]})]}),(0,s.jsx)("div",{className:"flex flex-col lg:items-end space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 lg:gap-8",children:[(0,s.jsxs)("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 shadow-lg",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-white",children:Object.values(S).reduce((e,t)=>e+t.length,0)}),(0,s.jsx)("div",{className:"text-blue-200 text-sm font-medium",children:"資料筆數"})]}),(0,s.jsxs)("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 shadow-lg",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-white",children:"多市場"}),(0,s.jsx)("div",{className:"text-blue-200 text-sm font-medium",children:"支援類型"})]})]})})]})})]}),(0,s.jsxs)("div",{className:"relative bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-20 left-20 w-64 h-64 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full opacity-30 blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full opacity-20 blur-3xl"})]}),(0,s.jsx)("div",{className:"relative max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-16",children:(0,s.jsxs)("div",{className:"grid gap-6",id:"signalsList",children:[w&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-8",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl",children:"⚠️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-red-800 font-semibold text-lg mb-1",children:"查詢錯誤"}),(0,s.jsx)("div",{className:"text-red-700",children:w})]})]})}),y&&(0,s.jsx)(g,{}),0===Object.keys(S).length&&!y&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-6",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full flex items-center justify-center shadow-lg",children:(0,s.jsx)(o.A,{className:"w-12 h-12 text-blue-600"})}),(0,s.jsxs)("div",{className:"text-center bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-blue-200/50 max-w-md",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"開始分析交易訊號"}),(0,s.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"請輸入股票代號，獲取交易訊號與投資建議"})]})]}),!y&&Object.entries(S).map(t=>{let[r,a]=t;return(0,s.jsxs)("div",{className:"bg-white/90 rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-gray-100 p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:"1d"===r?(0,s.jsx)(d.A,{className:"h-6 w-6 text-blue-600"}):(0,s.jsx)(x.A,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"1d"===r?"日線交易訊號":"小時線交易訊號"}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"1d"===r?"trade_signals_1d":"trade_signals_1h"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:["共 ",a.length.toLocaleString()," 筆"]}),(0,s.jsxs)("button",{type:"button",className:"px-4 py-2 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg text-sm inline-flex items-center gap-2 text-green-700 font-medium transition-colors",onClick:()=>(t=>{let r=function(e){if(!e||0===e.length)return"";let t=Object.keys(e[0]),r=[t.join(",")];for(let s of e){let e=t.map(e=>{let t=s[e];if(null==t)return"";let r=String(t).replace(/"/g,'""');return'"'.concat(r,'"')}).join(",");r.push(e)}return r.join("\n")}(S[t]||[]);if(!r)return;let s=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="".concat(e||"symbol","_").concat(j,"_").concat(t,"_trade_signals.csv"),document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(a)})(r),children:[(0,s.jsx)(n.a4x,{className:"text-base"}),"匯出 CSV"]}),(0,s.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium transition-colors",onClick:()=>M(r,{visible:!T(r).visible}),children:T(r).visible?"\uD83D\uDC41️ 隱藏":"\uD83D\uDC41️ 顯示"})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[a.length>0&&(e=>{let t=e.length,r=e[0],a=r&&(r.datetime||r.date)||"",l=r&&(r.close_price||r.close)||"",i=r?r.Trade_Signal:void 0,n=e.slice(0,40).map(e=>{var t;return Number(null!=(t=e.close_price)?t:e.close)||0}).filter(e=>e>0),o=n.length>0?n[n.length-1]:0,c=n.length>0?n[0]:0,d=o?(c-o)/o*100:0;return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/90 rounded-2xl shadow-lg border border-blue-100 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,s.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded"})})}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-1",children:"總筆數"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-white/90 rounded-2xl shadow-lg border border-green-100 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("div",{className:"p-2 bg-green-50 rounded-lg",children:(0,s.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded"})})}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-1",children:"最新時間"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:u(a)})]}),(0,s.jsxs)("div",{className:"bg-white/90 rounded-2xl shadow-lg border border-purple-100 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,s.jsx)("div",{className:"w-5 h-5 bg-purple-500 rounded"})})}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-1",children:"當前訊號"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(b,{signal:i})})]}),(0,s.jsxs)("div",{className:"bg-white/90 rounded-2xl shadow-lg border border-orange-100 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("div",{className:"p-2 bg-orange-50 rounded-lg",children:(0,s.jsx)("div",{className:"w-5 h-5 bg-orange-500 rounded"})})}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-1",children:"最新收盤價"}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-900",children:l?"NT$ ".concat(h(l)):"-"}),(0,s.jsx)("div",{className:"text-sm font-medium mt-1 ".concat(d>=0?"text-green-600":"text-red-600"),children:d?"".concat(d>0?"+":"").concat(d.toFixed(2),"%"):"-"})]})]})})(a),a.length>0&&(()=>{let e=B(a),t=Object.entries(e.counts).sort((e,t)=>t[1]-e[1]);return(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"訊號分布"})]}),0===t.length?(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"無資料"}):(0,s.jsx)("div",{className:"space-y-2",children:t.map(e=>{let[t,r]=e,a=m(String(t));return(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg",children:[(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(a.cls),children:a.text}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:r})]},t)})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"熱門指標 (前200筆)"})]}),0===e.indicatorsSorted.length?(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"無資料"}):(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.indicatorsSorted.slice(0,12).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-700 font-medium",children:t}),(0,s.jsx)("div",{className:"text-sm font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded",children:r})]},t)})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 lg:col-span-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"最近訊號時間線"})]}),0===e.timeline.length?(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"無資料"}):(0,s.jsx)("div",{className:"space-y-3 max-h-64 overflow-auto",children:e.timeline.slice(0,8).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[(0,s.jsx)("div",{className:"text-xs text-gray-600 font-medium w-48 truncate",children:e.date}),(0,s.jsx)("div",{className:"flex-1 text-sm text-gray-800 font-semibold mx-4",children:e.price}),(0,s.jsx)("div",{children:(0,s.jsx)(b,{signal:e.signal})})]},t))})]})]})})(),0===a.length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:"查無資料"}):T(r).visible&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6 p-4 bg-gray-50 rounded-xl",children:[(0,s.jsx)("input",{type:"search",placeholder:"搜尋列（含 signal / datetime / price）",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 flex-1 max-w-79",value:T(r).search,onChange:e=>M(r,{search:e.target.value,page:1})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"每頁"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("select",{value:T(r).pageSize,className:"px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white backdrop-blur-sm transition-all duration-300 appearance-none cursor-pointer hover:border-blue-400",onChange:e=>M(r,{pageSize:Number(e.target.value),page:1}),children:[10,20,50,100].map(e=>(0,s.jsx)("option",{value:e,className:"py-2",children:e},e))}),(0,s.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-gray-400 transition-all duration-300 group-hover:text-blue-500 group-focus-within:text-blue-500 group-focus-within:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:(()=>{let e=T(r),t=e.search.trim().toLowerCase(),l=t?a.filter(e=>Object.values(e).some(e=>String(null!=e?e:"").toLowerCase().includes(t))):a,i=O?[...l].sort((e,t)=>{let r=e[O],s=t[O],a=Number(r),l=Number(s);if(!isNaN(a)&&!isNaN(l))return"asc"===L?a-l:l-a;let i=String(null!=r?r:"").toLowerCase(),n=String(null!=s?s:"").toLowerCase();return i<n?"asc"===L?-1:1:i>n?"asc"===L?1:-1:0}):l,n=Math.max(1,Math.ceil(i.length/e.pageSize)),o=Math.min(Math.max(1,e.page),n),c=(o-1)*e.pageSize,d=Math.min(c+e.pageSize,i.length),x=i.slice(c,d),g=Object.keys(a[0]||{}),b=["datetime","date","signal","strength","price","close"],p=[...b.filter(e=>g.includes(e)),...g.filter(e=>!b.includes(e))];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-gray-50 border-b border-gray-200",children:p.map(e=>(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>(e=>{O===e?A("asc"===L?"desc":"asc"):(D(e),A("desc"))})(e),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:e}),O===e&&(0,s.jsx)("span",{className:"text-blue-500",children:"asc"===L?"↑":"↓"})]})},e))})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map((e,r)=>(0,s.jsx)("tr",{className:"hover:bg-gray-50 transition-colors",children:p.map(r=>{let a=e[r];if("datetime"===r||"date"===r)return(0,s.jsx)("td",{className:"px-4 py-3 text-gray-700 font-medium",children:u(a)},r);if("signal"===r||"Trade_Signal"===r){let e=m(String(a||""));return(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.cls),children:e.text})},r)}return"price"===r||"close"===r||"close_price"===r?(0,s.jsx)("td",{className:"px-4 py-3 font-semibold text-gray-900",children:a?"NT$ ".concat(h(a)):"-"},r):(0,s.jsx)("td",{className:"px-4 py-3 text-gray-700",children:(e=>{let r=null==e?"":String(e);if(!t)return r||"-";let a=r.toLowerCase().indexOf(t);return -1===a?r||"-":(0,s.jsxs)(s.Fragment,{children:[r.substring(0,a),(0,s.jsx)("mark",{className:"bg-yellow-200 px-1 rounded",children:r.substring(a,a+t.length)}),r.substring(a+t.length)]})})(a)},r)})},r))})]})}),i.length>e.pageSize&&(0,s.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["顯示 ",c+1," - ",d," / ",i.length," 筆結果"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:1===o,onClick:()=>M(r,{page:o-1}),children:"上一頁"}),(0,s.jsxs)("span",{className:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-lg",children:["第 ",o," / ",n," 頁"]}),(0,s.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:o===n,onClick:()=>M(r,{page:o+1}),children:"下一頁"})]})]})})]})})()})]})]})]},r)})]})})]}),(0,s.jsx)(l.A,{})]})}}},e=>{e.O(0,[938,141,636,593,792],()=>e(e.s=992)),_N_E=e.O()}]);