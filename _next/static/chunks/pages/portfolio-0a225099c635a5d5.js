(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var a=s(7876),r=s(4232),l=s(7802),i=s(6708),n=s(3283),o=s(3029),c=s(2122),d=s(1575),x=s(7824),m=s(8974),u=s(1288),h=s(8787),g=s(8139),b=s(8418),p=s(1815),y=s(4140),f=s(5363),N=s(3822),v=s(1047),j=s(1134);v.t1.register(v.PP,v.kc,v.FN,v.No,v.m_,v.dN,v.Bs,v.s$);let w=e=>{let{data:t}=e,[s,c]=(0,r.useState)("1M"),x=e=>{if("number"==typeof e)return e.toLocaleString();if("string"==typeof e){let t=parseFloat(e.replace(/[^\d.-]/g,""));return isNaN(t)?"0":t.toLocaleString()}return"0"},m=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e.replace(/[^\d.-]/g,""));return isNaN(t)?0:t}return 0},v=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e.replace("%",""));return isNaN(t)?0:t}return 0},w={labels:["股票","ETF","債券","加密貨幣","現金"],datasets:[{data:[45,20,15,12,8],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 99, 132, 0.6)"],borderWidth:0}]},T=(0,r.useMemo)(()=>({labels:Array.from({length:30},(e,t)=>{let s=new Date;return s.setDate(s.getDate()-(29-t)),s.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),datasets:[{data:[235e4,2355e3,236e4,2365e3,237e4,2375e3,238e4,2375e3,237e4,2375e3,238e4,2385e3,239e4,2395e3,24e5,2405e3,241e4,2415e3,242e4,2425e3,243e4,2435e3,244e4,2445e3,245e4,2445e3,244e4,2445e3,245e4,2450600],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.15)",fill:!0}]}),[]),k=(0,r.useMemo)(()=>{let e=T.datasets[0].data,t=e[0],s=e[e.length-1],a=Math.max(...e),r=Math.min(...e),l=((a-r)/t*100).toFixed(1);return{change:s-t,changePercent:parseFloat(((s-t)/t*100).toFixed(2)),maxValue:a,minValue:r,volatility:parseFloat(l),upDays:e.slice(1).filter((t,s)=>t>e[s]).length,totalDays:e.length-1}},[T]),C={currentAmount:2450600,targetAmount:5e6,progress:49.012},A={"1W":{labels:["6/10","6/11","6/12","6/13","6/14","6/15","6/16"],portfolio:[2450600,2456800,2463200,2458900,2465400,2471800,2475300],benchmark:[18500,18520,18545,18532,18558,18575,18583],return:"+1.01%",isPositive:!0},"1M":{labels:["5/17","5/24","5/31","6/7","6/14","6/16"],portfolio:[2385e3,2398500,2415600,2435800,2455200,2475300],benchmark:[18200,18280,18350,18420,18520,18583],return:"+3.79%",isPositive:!0},"3M":{labels:["4月","5月","6月"],portfolio:[228e4,2385e3,2475300],benchmark:[17800,18200,18583],return:"+8.56%",isPositive:!0},"6M":{labels:["1月","2月","3月","4月","5月","6月"],portfolio:[215e4,2195e3,2245e3,228e4,2385e3,2475300],benchmark:[17200,17350,17500,17800,18200,18583],return:"+15.13%",isPositive:!0},"1Y":{labels:["2023/6","2023/9","2023/12","2024/3","2024/6"],portfolio:[2e6,2088e3,2156e3,2245e3,2475300],benchmark:[16500,16800,17100,17500,18583],return:"+23.77%",isPositive:!0},ALL:{labels:["2022","2023","2024"],portfolio:[18e5,2156e3,2475300],benchmark:[15800,17100,18583],return:"+37.52%",isPositive:!0}}[s],$={labels:A.labels,datasets:[{label:"投資組合",data:A.portfolio,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,yAxisID:"y"},{label:"台股加權指數",data:A.benchmark,borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",borderWidth:2,fill:!1,tension:.4,borderDash:[5,5],yAxisID:"y1"}]},P=[{title:"總回報率",value:A.return,isPositive:A.isPositive,description:"".concat(s,"期間表現"),icon:A.isPositive?o.A:u.A},{title:"年化收益率",value:"+22.4%",isPositive:!0,description:"折算年度表現",icon:o.A},{title:"最大回撤",value:"-8.2%",isPositive:!1,description:"最大下跌幅度",icon:u.A},{title:"波動率",value:"15.3%",isPositive:null,description:"風險水平指標",icon:h.A}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-100/30 to-purple-100/30 rounded-full blur-3xl -translate-y-32 translate-x-32"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:(0,a.jsx)(l.A,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"投資組合摘要"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"您的財富增長概況"})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["最後更新: ",t.lastUpdate]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between space-y-6 md:space-y-0 md:space-x-8",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:"總資產價值"}),(0,a.jsxs)("div",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent pb-2",children:["NT$ ",x(t.totalValue)]}),(0,a.jsx)("div",{className:"h-1 w-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full "})]}),(0,a.jsxs)("div",{className:"space-y-1 pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:"總收益"}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full text-sm font-semibold".concat(v(t.totalReturn.percentage)>=0?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"),children:[v(t.totalReturn.percentage)>=0?"+":"",(e=>{if("number"==typeof e)return e.toFixed(2)+"%";if("string"==typeof e){let t=parseFloat(e.replace("%",""));return isNaN(t)?"0.00%":t.toFixed(2)+"%"}return"0.00%"})(t.totalReturn.percentage)]})]}),(0,a.jsxs)("div",{className:"text-4xl font-bold pb-2 ".concat(m(t.totalReturn.value)>=0?"text-emerald-600":"text-red-500"),children:[m(t.totalReturn.value)>=0?"+":"","NT$ ",x(t.totalReturn.value)]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-blue-900",children:"資金運用狀況"})]}),(0,a.jsxs)("div",{className:"text-xs text-blue-600 bg-blue-100 px-3 py-1 rounded-full",children:[(0,a.jsxs)("span",{className:"font-semibold",children:["NT$ ",C.currentAmount.toLocaleString()]})," ","/ NT$ ",C.targetAmount.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full relative transition-all duration-1000 ease-out",style:{width:"".concat(C.progress,"%")},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-white/30 animate-pulse"})})}),(0,a.jsx)("div",{className:"absolute -top-1 bg-white rounded-full p-1 shadow-lg transition-all duration-1000 ease-out -ml-2",style:{left:"".concat(Math.min(C.progress,95),"%")},children:(0,a.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"})})]}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 mt-2 flex justify-between",children:[(0,a.jsxs)("span",{children:["可用餘額"," ",(0,a.jsxs)("span",{className:"font-semibold",children:["NT$"," ",(C.targetAmount-C.currentAmount).toLocaleString()]})]}),(0,a.jsxs)("span",{children:["資金運用率"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[C.progress.toFixed(1),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-6 rounded-2xl border border-blue-100 shadow-lg relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-200/20 to-indigo-200/20 rounded-full blur-xl"}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("div",{className:"text-base font-bold text-gray-800",children:"近30日資產趨勢"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"每日資產價值變化軌跡"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:["上漲 ",k.upDays," 天"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:["下跌 ",k.totalDays-k.upDays," 天"]})]})]})]}),(0,a.jsxs)("div",{className:"text-right space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"較期初變化"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["NT$ ",k.change>=0?"+":"",k.change.toLocaleString()]}),(0,a.jsxs)("div",{className:"text-lg font-bold px-3 py-1.5 rounded-full shadow-sm ".concat(k.changePercent>=0?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"),children:[k.changePercent>=0?"+":"",k.changePercent,"%"]})]})]})]}),(0,a.jsx)("div",{className:"h-32 relative mb-4 bg-white rounded-xl p-3 shadow-inner",children:(0,a.jsx)(j.N1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(59, 130, 246, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:()=>"",label:function(e){let t=e.parsed,s=null;if(null==t)s=null;else if("number"==typeof t)s=t;else if("object"==typeof t&&"y"in t){let e=t.y;s="number"==typeof e?e:null}return null==s?"NT$ N/A":"NT$".concat(s.toLocaleString())}}}},scales:{x:{display:!1},y:{display:!1}},elements:{point:{radius:0,hoverRadius:4,backgroundColor:"rgb(59, 130, 246)",borderColor:"white",borderWidth:2},line:{tension:.4,borderWidth:2.5,shadowColor:"rgba(59, 130, 246, 0.3)",shadowBlur:10,shadowOffsetY:2}},interaction:{intersect:!1,mode:"index"}},data:T})}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100 relative z-10",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"p-1 bg-blue-500 rounded-full mt-0.5",children:(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"趨勢分析"}),(0,a.jsx)("div",{className:"text-xs text-blue-700",children:k.changePercent>0?"資產呈現上升趨勢，月內累計增長 ".concat(k.changePercent,"%，表現穩健。"):k.changePercent<-2?"資產出現調整，建議關注市場變化並考慮風險控制。":"資產表現相對穩定，波動控制在合理範圍內。"})]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-100/50 to-purple-100/50 rounded-full blur-2xl -translate-y-16 translate-x-16"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2 text-gray-600"}),"資產配置"]}),(0,a.jsx)("div",{className:"h-48 mb-6 relative",children:(0,a.jsx)(j.nu,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),(0,a.jsx)("div",{className:"space-y-3",children:w.labels.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"block w-3 h-3 rounded-full mr-3 shadow-sm",style:{backgroundColor:w.datasets[0].backgroundColor[t]}}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-full",children:[w.datasets[0].data[t],"%"]})]},t))})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"年化報酬率"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"年度化收益表現"})]}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:(0,a.jsx)(h.A,{className:"h-6 w-6 text-white"})})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"+22.4%"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["較市場指數"," ",(0,a.jsx)("span",{className:"text-emerald-600 font-semibold",children:"+3.2%"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"75%"}})})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"投資標的數"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"分散投資程度"})]}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl",children:(0,a.jsx)(n.A,{className:"h-6 w-6 text-white"})})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"10"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["最高配置:"," ",(0,a.jsx)("span",{className:"font-semibold text-indigo-600",children:"AAPL (12.8%)"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"股票: 4"}),(0,a.jsx)("span",{className:"text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"ETF: 3"}),(0,a.jsx)("span",{className:"text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:"其他: 3"})]})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"投資組合β值"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"市場波動敏感度"})]}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:(0,a.jsx)(b.A,{className:"h-6 w-6 text-white"})})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"0.85"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-3",children:"較低市場波動敏感度"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"42%"}})})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"最近交易"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"近期活動統計"})]}),(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-xl",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-white"})})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"5/15"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["買入:"," ",(0,a.jsx)("span",{className:"font-semibold text-green-600",children:"台積電 (50股)"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"3筆交易 in 最近30天"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-200/20 to-purple-200/20 rounded-full blur-3xl -translate-y-48 translate-x-48"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,a.jsx)(N.A,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI智能投資見解"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"個人化投資建議與風險提醒"})]})]}),(0,a.jsxs)("button",{className:"text-sm text-blue-600 font-medium flex items-center bg-white/70 hover:bg-white px-4 py-2 rounded-full transition-all duration-200",children:["查看完整建議",(0,a.jsx)(y.A,{className:"h-4 w-4 ml-1"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10",children:[(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex-shrink-0",children:(0,a.jsx)(f.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"再平衡建議"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"科技股比重達57.8%，明顯高於建議的35%上限。考慮減持AAPL和MSFT各15-20%。"}),(0,a.jsxs)("div",{className:"flex items-center text-xs",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 rounded-full mr-2 font-medium",children:"高優先"}),(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:"預期風險降低15%"})]})]})]})}),(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex-shrink-0",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"投資機會"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"綠能產業具增長潛力，政策支持力度增強。建議分配約5%資金至ICLN清潔能源ETF。"}),(0,a.jsxs)("div",{className:"flex items-center text-xs",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full mr-2 font-medium",children:"中優先"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"潛在年化收益+3.2%"})]})]})]})}),(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex-shrink-0",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"通膨風險防禦"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"面對攀升的通膨數據，投資組合缺少足夠的防禦性資產。建議增加GLD黃金ETF (5-8%)。"}),(0,a.jsxs)("div",{className:"flex items-center text-xs",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 rounded-full mr-2 font-medium",children:"高優先"}),(0,a.jsx)("span",{className:"text-orange-600 font-medium",children:"通膨保護能力+40%"})]})]})]})})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/30 flex justify-between items-center relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"投資組合健康度"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:"76"}),(0,a.jsx)("div",{className:"text-sm text-blue-400",children:"/100"}),(0,a.jsx)("div",{className:"w-16 h-2 bg-blue-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full",style:{width:"76%"}})})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 bg-white/50 px-3 py-1 rounded-full",children:"最後更新: 2024-05-28 10:30"})]})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-green-100/30 to-blue-100/30 rounded-full blur-3xl -translate-y-32 -translate-x-32"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4 lg:mb-0",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:(0,a.jsx)(l.A,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"績效走勢分析"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合歷史表現追蹤"})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"1週",value:"1W"},{label:"1月",value:"1M"},{label:"3月",value:"3M"},{label:"6月",value:"6M"},{label:"1年",value:"1Y"},{label:"全部",value:"ALL"}].map(e=>(0,a.jsx)("button",{onClick:()=>c(e.value),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(s===e.value?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.value))})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 relative z-10",children:P.map((e,t)=>{let s=e.icon;return(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,a.jsx)(s,{className:"h-5 w-5 ".concat(!0===e.isPositive?"text-green-500":!1===e.isPositive?"text-red-500":"text-gray-500")})]}),(0,a.jsx)("div",{className:"text-2xl font-bold mb-1 ".concat(!0===e.isPositive?"text-green-600":!1===e.isPositive?"text-red-600":"text-gray-800"),children:e.value}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},t)})}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"投資組合 vs 基準指數"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"投資組合"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-0.5 bg-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"台股加權指數"})]})]})]}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(j.N1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let t=e.dataset.label||"";t&&(t+=": ");let s=e.parsed,a=null;if(null==s)a=null;else if("number"==typeof s)a=s;else if("object"==typeof s&&"y"in s){let e=s.y;a="number"==typeof e?e:null}return null==a?t+="N/A":0===e.datasetIndex?t+="NT$"+Number(a).toLocaleString():t+=Number(a).toLocaleString(),t}}}},scales:{x:{grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"投資組合價值 (NT$)"},ticks:{callback:function(e){return"NT$"+(Number(e)/1e6).toFixed(1)+"M"}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"基準指數"},grid:{drawOnChartArea:!1}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},data:$})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"期間回報率"}),(0,a.jsx)("div",{className:"text-lg font-bold ".concat(A.isPositive?"text-green-600":"text-red-600"),children:A.return})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"超額回報率"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:"+5.2%"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"夏普比率"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-800",children:"1.65"})]})]})})]}),(0,a.jsx)("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 relative z-10",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-blue-900 mb-2",children:"績效分析洞察"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-blue-800 mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"✓ 表現優異："}),"您的投資組合在",s,"期間表現優於市場基準指數5.2%，顯示良好的選股和配置策略。"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"→ 風險控制："}),"夏普比率1.65表示在承擔相對風險下獲得了不錯的回報，風險調整後收益表現良好。"]})})]})]})]})})]})]})};var T=s(1519),k=s(4981),C=s(7021),A=s(7966),$=s(3393),P=s(1010),S=s(3764),R=s(7270),M=s(8531),E=s(6971);class _ extends E.d{static getInstance(){return _.instance||(_.instance=new _),_.instance}async getUserPortfolios(e){try{return this.validateServiceInput(e,"用戶ID"),await this.executeWithRetry(async()=>(await new Promise(e=>setTimeout(e,300)),[{id:"portfolio_1",name:"主要投資組合",description:"長期投資的核心持股",userId:e,totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:[],transactions:[],createdAt:"2024-01-01T00:00:00Z",isDefault:!0},{id:"portfolio_2",name:"短期交易組合",description:"短期交易和波段操作",userId:e,totalValue:"500000",totalCost:48e4,totalGainLoss:2e4,totalGainLossPercent:4.17,dayChange:-5e3,dayChangePercent:-1,holdings:[],transactions:[],createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-06-01T10:00:00Z",isDefault:!1}]))}catch(e){return this.handleServiceError(e,"獲取用戶投資組合")}}async getPortfolioById(e){try{return this.validateServiceInput(e,"投資組合ID"),await this.executeWithRetry(async()=>{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioHoldings(e),s=await this.getPortfolioTransactions();return{id:e,name:"主要投資組合",description:"長期投資的核心持股",userId:"user_001",totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:t,transactions:s,createdAt:"2024-01-01T00:00:00Z",isDefault:!0}})}catch(e){return this.handleServiceError(e,"獲取投資組合詳情")}}async getPortfolioHoldings(e){try{return await new Promise(e=>setTimeout(e,200)),[{id:"holding_1",portfolioId:e,symbol:"2330",name:"台積電",quantity:1e3,averagePrice:"500",currentPrice:"580",marketValue:58e4,costBasis:5e5,gainLoss:8e4,gainLossPercent:16,dayChange:1e4,dayChangePercent:1.75,weight:46.4,lastUpdated:"2024-06-01T10:00:00Z"},{id:"holding_2",portfolioId:e,symbol:"2317",name:"鴻海",quantity:2e3,averagePrice:"100",currentPrice:"105.5",marketValue:211e3,costBasis:2e5,gainLoss:11e3,gainLossPercent:5.5,dayChange:5e3,dayChangePercent:2.43,weight:16.9,lastUpdated:"2024-06-01T10:00:00Z"}]}catch(e){throw console.error("Error fetching portfolio holdings:",e),Error("無法獲取持股明細")}}async getPortfolioTransactions(){try{return await new Promise(e=>setTimeout(e,250)),[{id:"tx_1",date:"2024-05-15",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"520",total:"260000",note:"分批建倉"},{id:"tx_2",date:"2024-04-10",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"480",total:"240000",note:"逢低加碼"},{id:"tx_3",date:"2024-03-20",type:"買入",symbol:"2317",name:"鴻海",quantity:2e3,price:"100",total:"200000",note:"新增持股"}]}catch(e){throw console.error("Error fetching portfolio transactions:",e),Error("無法獲取交易記錄")}}async createPortfolio(e){try{return await new Promise(e=>setTimeout(e,400)),{id:"portfolio_".concat(Date.now()),name:e.name,description:e.description,userId:e.userId,totalValue:"0",totalCost:0,totalGainLoss:0,totalGainLossPercent:0,dayChange:0,dayChangePercent:0,holdings:[],transactions:[],createdAt:new Date().toISOString(),isDefault:e.isDefault||!1}}catch(e){throw console.error("Error creating portfolio:",e),Error("無法創建投資組合")}}async updatePortfolio(e,t){try{await new Promise(e=>setTimeout(e,300));let s=await this.getPortfolioById(e);if(!s)throw Error("投資組合不存在");return{...s,...t,updatedAt:new Date().toISOString()}}catch(e){throw console.error("Error updating portfolio:",e),Error("無法更新投資組合")}}async deletePortfolio(e){try{await new Promise(e=>setTimeout(e,200)),console.log("Portfolio ".concat(e," deleted"))}catch(e){throw console.error("Error deleting portfolio:",e),Error("無法刪除投資組合")}}async addTransaction(e){try{return await new Promise(e=>setTimeout(e,300)),{id:"tx_".concat(Date.now()),date:e.date,type:"buy"===e.type?"買入":"賣出",symbol:e.symbol,name:e.symbol,quantity:e.quantity,price:e.price.toString(),total:(e.quantity*e.price).toString(),note:e.notes}}catch(e){throw console.error("Error adding transaction:",e),Error("無法新增交易記錄")}}async getPortfolioPerformance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1y";try{return await new Promise(e=>setTimeout(e,400)),(e=>{let t=new Date,s=[],a=[],r=0;switch(e){case"1m":r=30;break;case"3m":r=90;break;case"6m":r=180;break;default:r=365}let l=1e6;for(let e=0;e<r;e++){let i=new Date(t.getTime()-(r-1-e)*864e5);s.push(i.toISOString().split("T")[0]);let n=(Math.random()-.5)*.03;l*=1+n,a.push(Math.round(l))}return{labels:s,portfolio:a}})(t)}catch(e){throw console.error("Error fetching portfolio performance:",e),Error("無法獲取投資組合績效")}}async getAssetAllocation(){try{return await new Promise(e=>setTimeout(e,200)),[{name:"科技股",category:"科技股",value:75e4,percentage:60,color:"#3B82F6"},{name:"金融股",category:"金融股",value:25e4,percentage:20,color:"#10B981"},{name:"傳統產業",category:"傳統產業",value:15e4,percentage:12,color:"#F59E0B"},{name:"現金",category:"現金",value:1e5,percentage:8,color:"#6B7280"}]}catch(e){throw console.error("Error fetching asset allocation:",e),Error("無法獲取資產配置")}}async getPortfolioAnalysis(e){try{await new Promise(e=>setTimeout(e,300));let t=await this.getPortfolioHoldings(e),s=t.reduce((e,t)=>e+(t.marketValue||0),0),a=t.reduce((e,t)=>e+(t.costBasis||0),0),r=s-a,l=t.reduce((e,t)=>e+(t.dayChange||0),0),i=[...t].sort((e,t)=>(t.gainLossPercent||0)-(e.gainLossPercent||0)),n=i[0],o=i[i.length-1];return{totalValue:s,totalCost:a,totalGainLoss:r,totalGainLossPercent:r/a*100,dayChange:l,dayChangePercent:l/s*100,bestPerformer:{symbol:n.symbol,gainLoss:n.gainLoss||0,gainLossPercent:n.gainLossPercent||0},worstPerformer:{symbol:o.symbol,gainLoss:o.gainLoss||0,gainLossPercent:o.gainLossPercent||0}}}catch(e){throw console.error("Error analyzing portfolio:",e),Error("無法分析投資組合")}}async searchTransactions(e){try{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioTransactions();if(e.symbol&&(t=t.filter(t=>t.symbol===e.symbol)),e.type){let s="buy"===e.type?"買入":"賣出";t=t.filter(e=>e.type===s)}return t}catch(e){throw console.error("Error searching transactions:",e),Error("無法搜索交易記錄")}}constructor(){super()}}class L extends M.wp{static getInstance(){return L.instance||(L.instance=new L),L.instance}convertServicePortfolioToModel(e){var t,s;return{id:e.id,userId:e.userId,totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdings:e.holdings.map(e=>this.convertServiceHoldingToModel(e)),allocation:(null==(t=e.allocation)?void 0:t.map(e=>this.convertServiceAllocationToModel(e)))||[],performance:this.convertServicePerformanceToModel(e.performance),transactions:(null==(s=e.transactions)?void 0:s.map(e=>this.convertServiceTransactionToModel(e)))||[],risk:{riskScore:5,volatility:15,beta:1,sharpeRatio:1,maxDrawdown:-10,riskLevel:"medium"},overview:{totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdingsCount:e.holdings.length,lastUpdated:e.updatedAt||new Date().toISOString()},aiRecommendations:[]}}convertServiceHoldingToModel(e){return{symbol:e.symbol,name:e.name,price:e.currentPrice,priceChange:e.dayChange||0,quantity:e.quantity.toString(),marketValue:e.totalValue||"0",costBasis:(e.costBasis||0).toString(),totalReturn:{value:e.unrealizedReturn||"0",percentage:e.unrealizedReturnPercent||"0%"},weight:e.weight?"".concat(e.weight,"%"):"0%"}}convertServiceAllocationToModel(e){return{category:e.category||e.name,percentage:e.percentage,value:e.value,color:e.color}}convertServicePerformanceToModel(e){return e?{labels:e.labels,portfolioValue:Array.isArray(e.values)?e.values.map(e=>"string"==typeof e?parseFloat(e):e):[],benchmarkValue:e.benchmarkValues?e.benchmarkValues.map(e=>"string"==typeof e?parseFloat(e):e):[],timeRange:"1M"}:{labels:[],portfolioValue:[],benchmarkValue:[],timeRange:"1M"}}convertServiceTransactionToModel(e){return{id:e.id,symbol:e.symbol,type:"買入"===e.type?"buy":"sell",quantity:"string"==typeof e.quantity?parseFloat(e.quantity):e.quantity,price:parseFloat(e.price.replace(/[^\d.-]/g,"")),amount:parseFloat(e.total.replace(/[^\d.-]/g,"")),date:e.date,fee:0,status:"completed"}}async getPortfolio(e){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");try{let t=await this.portfolioService.getUserPortfolios(e),s=t.find(e=>e.isDefault)||t[0];if(s)return this.convertServicePortfolioToModel(s)}catch(e){console.warn("服務層獲取失敗，使用模型層:",e)}let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t},"獲取投資組合")}async getUserPortfolios(e){return this.executeWithErrorHandling(async()=>(this.validateRequired(e,"用戶ID"),(await this.portfolioService.getUserPortfolios(e)).map(e=>this.convertServicePortfolioToModel(e))),"獲取用戶投資組合列表")}async addTransaction(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID"),this.validateRequired(t.symbol,"股票代碼"),this.validatePositiveNumber(t.quantity,"數量"),this.validatePositiveNumber(t.price,"價格");let s={portfolioId:t.portfolioId||"".concat(e,"_default"),symbol:t.symbol,type:t.type,quantity:t.quantity,price:t.price,date:t.date||new Date().toISOString(),fees:t.fees,notes:t.notes},a=await this.portfolioService.addTransaction(s);return this.convertServiceTransactionToModel(a)},"新增交易記錄")}async getPortfolioPerformance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1M";return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let s=await this.getPortfolio(e),a=await this.portfolioService.getPortfolioPerformance(s.id,t.toLowerCase());return this.convertServicePerformanceToModel(a)},"獲取投資組合績效")}async getAssetAllocation(e){return this.executeWithErrorHandling(async()=>(this.validateRequired(e,"用戶ID"),(await this.portfolioService.getAssetAllocation()).map(e=>this.convertServiceAllocationToModel(e))),"獲取資產配置")}async getTransactionHistory(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let s=(await this.portfolioService.getPortfolioTransactions()).map(e=>this.convertServiceTransactionToModel(e));return t?s.slice(0,t):s},"獲取交易歷史")}async updateHolding(e,t){try{return await this.portfolioModel.updateHolding(e,t.symbol,t.updates)}catch(e){throw Error("更新持股失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getPortfolioSummary(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let s=t.holdings.length>0?t.holdings.reduce((e,t)=>parseFloat(e.marketValue.replace(",",""))>parseFloat(t.marketValue.replace(",",""))?e:t):null;return{totalValue:t.totalValue,totalReturn:t.totalReturn,dayChange:t.dayChange,dayChangePercent:t.dayChangePercent,holdingsCount:t.holdings.length,topHolding:s}}catch(e){throw Error("獲取投資組合摘要失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getPerformanceAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t.performance}catch(e){throw Error("獲取績效分析失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getRiskAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let s=this.generateRiskRecommendations(t.risk.riskLevel);return{riskScore:t.risk.riskScore,riskLevel:t.risk.riskLevel,volatility:t.risk.volatility,sharpeRatio:t.risk.sharpeRatio,maxDrawdown:t.risk.maxDrawdown,beta:t.risk.beta,recommendations:s}}catch(e){throw Error("獲取風險分析失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async exportPortfolioReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";try{if(!await this.portfolioModel.getPortfolio(e))throw Error("投資組合不存在");let s="portfolio_report_".concat(e,"_").concat(new Date().toISOString().split("T")[0],".").concat(t);return{downloadUrl:"/api/reports/".concat(s),fileName:s}}catch(e){throw Error("匯出投資組合報表失敗: ".concat(e instanceof Error?e.message:"未知錯誤"))}}async getAllocation(e){return this.getAssetAllocation(e)}async exportReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";return this.exportPortfolioReport(e,t)}generateRiskRecommendations(e){switch(e){case"low":return["您的投資組合風險較低，適合穩健型投資者","可考慮增加一些成長型股票以提升報酬率","建議維持適當的現金比例"];case"medium":return["您的投資組合風險適中，配置較為均衡","建議定期檢視並調整資產配置","可考慮分散投資至不同產業"];case"high":return["您的投資組合風險較高，請注意風險控制","建議增加防御性資產的比例","考慮設定停損點以控制損失"];default:return["建議諮詢專業理財顧問"]}}constructor(){super(),this.portfolioModel=R.g.getInstance(),this.portfolioService=_.getInstance()}}var F=s(6112);v.t1.register(v.Bs,v.m_,v.s$,v.PP,v.kc,v.E8);let q={assetClass:["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(139, 92, 246, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(156, 163, 175, 0.7)"],assetClassBorder:["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(139, 92, 246, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(156, 163, 175, 1)"],sector:["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)","rgba(236, 72, 153, 0.7)","rgba(20, 184, 166, 0.7)","rgba(34, 197, 94, 0.7)"],sectorBorder:["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(139, 92, 246, 1)","rgba(236, 72, 153, 1)","rgba(20, 184, 166, 1)","rgba(34, 197, 94, 1)"],region:["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)"],regionBorder:["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(139, 92, 246, 1)"]},D=e=>{let{data:t}=e,[s,l]=(0,r.useState)("assetClass"),[n,o]=(0,r.useState)(!1),c=L.getInstance(),{data:d,execute:x}=(0,F.aE)(),u=(0,r.useCallback)(async()=>{await x(async()=>{let e=await c.getAssetAllocation("user_001");return console.log("資產配置載入成功:",e),e})},[x,c]);(0,r.useEffect)(()=>{t&&t.byAssetClass&&0!==t.byAssetClass.length||u().catch(e=>{e instanceof Error?console.error("載入資產配置失敗:",e.message):console.error("載入資產配置失敗:",e)})},[t,u]);let h=async()=>{try{let e=await c.getRiskAnalysis("user_001");console.log("重新平衡分析:",e)}catch(e){console.error("重新平衡分析失敗:",e)}},g=(0,r.useMemo)(()=>d&&d.length>0?{byAssetClass:d.map(e=>({name:e.category,percentage:e.percentage})),bySector:[],byRegion:[],recommendations:[]}:t,[d,t]),p={assetClass:[{name:"股票",percentage:60},{name:"ETF",percentage:25},{name:"債券",percentage:10},{name:"加密貨幣",percentage:3},{name:"現金",percentage:2}]},{chartData:y,targetData:f}=(e=>{let t,s;switch(e){case"assetClass":t={labels:(g.byAssetClass||[]).map(e=>e.name),datasets:[{data:(g.byAssetClass||[]).map(e=>e.percentage),backgroundColor:[...q.assetClass],borderColor:[...q.assetClassBorder],borderWidth:2}]},n&&(s={labels:(g.byAssetClass||[]).map(e=>e.name),datasets:[{label:"目前配置",data:(g.byAssetClass||[]).map(e=>e.percentage),backgroundColor:["rgba(59, 130, 246, 0.7)"],borderColor:["rgba(59, 130, 246, 1)"],borderWidth:1},{label:"推薦配置",data:p.assetClass.map(e=>e.percentage),backgroundColor:["rgba(16, 185, 129, 0.7)"],borderColor:["rgba(16, 185, 129, 1)"],borderWidth:1}]});break;case"sector":t={labels:(g.bySector||[]).map(e=>e.name),datasets:[{data:(g.bySector||[]).map(e=>e.percentage),backgroundColor:[...q.sector],borderColor:[...q.sectorBorder],borderWidth:2}]};break;case"region":t={labels:(g.byRegion||[]).map(e=>e.name),datasets:[{data:(g.byRegion||[]).map(e=>e.percentage),backgroundColor:[...q.region],borderColor:[...q.regionBorder],borderWidth:2}]};break;default:t={labels:[],datasets:[{data:[],backgroundColor:[],borderColor:[],borderWidth:2}]}}return{chartData:t,targetData:s}})(s),v=("assetClass"!==s?[]:(g.byAssetClass||[]).map(e=>{let t=p.assetClass.find(t=>t.name===e.name)||{name:e.name,percentage:0},s=Number((e.percentage-t.percentage).toFixed(1));return{name:e.name,current:e.percentage,target:t.percentage,deviation:s,status:s>5?"過高":s<-5?"過低":"適中"}})).filter(e=>Math.abs(e.deviation)>5),w=(0,r.useCallback)(e=>{l(e)},[]),R=(0,r.useCallback)(()=>{o(e=>!e)},[]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-100/30 to-indigo-100/30 rounded-full blur-3xl -translate-y-32 translate-x-32"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:(0,a.jsx)(i.A,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"資產配置分析"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合多元化配置概況"})]})]}),(0,a.jsx)("div",{className:"flex space-x-3",children:(0,a.jsxs)("button",{onClick:R,className:"flex items-center px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 ".concat(n?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"對比目標配置"]})})]}),(0,a.jsxs)("div",{className:"flex border-b border-gray-200 mb-8 relative z-10",children:[(0,a.jsx)("button",{onClick:()=>w("assetClass"),className:"py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ".concat("assetClass"===s?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"按資產類別"]})}),(0,a.jsx)("button",{onClick:()=>w("sector"),className:"py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ".concat("sector"===s?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(T.A,{className:"h-5 w-5 mr-2"}),"按產業分布"]})}),(0,a.jsx)("button",{onClick:()=>w("region"),className:"py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ".concat("region"===s?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 mr-2"}),"按地區分布"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 relative z-10",children:[(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50",children:(0,a.jsx)("div",{className:"h-80",children:n&&"assetClass"===s&&f?(0,a.jsx)(j.yP,{data:f,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{position:"top",labels:{font:{size:13,weight:500},usePointStyle:!0,pointStyle:"circle",color:"#374151"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:12,callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),t+=e.parsed.x+"%"}}}},scales:{x:{stacked:!1,title:{display:!0,text:"資產配置百分比",font:{size:12,weight:500},color:"#6B7280"},ticks:{callback:function(e){return e+"%"},color:"#6B7280"},grid:{color:"rgba(156, 163, 175, 0.2)"}},y:{stacked:!1,ticks:{color:"#374151",font:{size:12,weight:500}},grid:{display:!1}}}}}):(0,a.jsx)(j.nu,{data:y,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:13,weight:500},padding:20,usePointStyle:!0,pointStyle:"circle",color:"#374151"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:12,callbacks:{label:function(e){let t=e.label||"";return t&&(t+=": "),t+=e.parsed+"%"}}}},cutout:"65%"}})})}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(C.A,{className:"h-5 w-5 text-blue-500 mr-2"}),"配置明細"]}),(0,a.jsxs)("div",{className:"space-y-3",children:["assetClass"===s&&(0,a.jsx)("div",{className:"overflow-hidden bg-white rounded-xl shadow-sm",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"資產類別"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"目前配置"}),n&&(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"目標配置"}),n&&(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"差異"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(g.byAssetClass||[]).map((e,t)=>{let s=n?p.assetClass.find(t=>t.name===e.name)||{name:e.name,percentage:0}:null,r=n&&s?Number((e.percentage-s.percentage).toFixed(1)):0;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:q.assetClass[t%q.assetClass.length]}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:[e.percentage,"%"]}),n&&s&&(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-600",children:[s.percentage,"%"]}),n&&(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs ".concat(r>0?"bg-red-100 text-red-800":r<0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[r>0?"+":"",r,"%"]})})]},"".concat(e.name,"-").concat(t))})})]})}),"sector"===s&&(0,a.jsx)("div",{className:"space-y-3",children:(g.bySector||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:function(e){let t=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)","rgba(236, 72, 153, 0.7)","rgba(20, 184, 166, 0.7)","rgba(34, 197, 94, 0.7)"];return t[e%t.length]}(t)}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]}),(0,a.jsxs)("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded-full",children:[e.percentage,"%"]})]},"sector-".concat(e.name,"-").concat(t)))}),"region"===s&&(0,a.jsx)("div",{className:"space-y-3",children:(g.byRegion||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:q.region[t%q.region.length]}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]}),(0,a.jsxs)("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded-full",children:[e.percentage,"%"]})]},"region-".concat(e.name,"-").concat(t)))})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-red-100/40 to-orange-100/40 rounded-full blur-2xl -translate-y-16 -translate-x-16"}),(0,a.jsxs)("div",{className:"flex items-center mb-6 relative z-10",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl mr-3",children:(0,a.jsx)(A.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"配置風險分析"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合風險評估"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 relative z-10",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"集中度風險"}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-200 text-yellow-900",children:[(0,a.jsx)($.A,{className:"h-3 w-3 mr-1"}),"中等"]})]}),(0,a.jsx)("div",{className:"w-full bg-yellow-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all duration-1000",style:{width:"60%"}})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"科技股佔比57.8%，高於建議的35%上限"})]}),(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"區域風險"}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-900",children:[(0,a.jsx)(P.A,{className:"h-3 w-3 mr-1"}),"適中"]})]}),(0,a.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-1000",style:{width:"55%"}})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"台灣市場佔比40%，地域集中度較高"})]}),(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl border border-red-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"通膨抵禦力"}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-200 text-red-900",children:[(0,a.jsx)($.A,{className:"h-3 w-3 mr-1"}),"較低"]})]}),(0,a.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 h-2 rounded-full transition-all duration-1000",style:{width:"30%"}})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"抗通膨資產配置僅占8%，建議至少15%"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-100/40 to-blue-100/40 rounded-full blur-2xl -translate-y-16 translate-x-16"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-blue-500 rounded-xl mr-3",children:(0,a.jsx)(S.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"配置優化建議"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"AI智能調整方案"})]})]}),(0,a.jsxs)("button",{onClick:h,className:"flex items-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-xl transition-all duration-200",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"再平衡"]})]}),(0,a.jsx)("div",{className:"relative z-10",children:n&&v.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[v.map((e,t)=>(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-200 hover:shadow-md transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"ml-3 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.deviation>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.status})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["現在:"," ",(0,a.jsxs)("span",{className:"font-medium",children:[e.current,"%"]})," | 目標:"," ",(0,a.jsxs)("span",{className:"font-medium",children:[e.target,"%"]})," | 差異:"," ",(0,a.jsxs)("span",{className:"font-medium ".concat(e.deviation>0?"text-red-600":"text-green-600"),children:[e.deviation>0?"+":"",e.deviation,"%"]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("button",{className:"text-xs px-3 py-1 rounded-lg font-medium transition-colors ".concat(e.deviation>0?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"),children:e.deviation>0?"減持":"增持"})})]})},t)),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-gray-200",children:(0,a.jsxs)("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 inline mr-2"}),"生成AI再平衡計畫"]})})]}):(0,a.jsx)("div",{className:"space-y-3",children:(g.recommendations||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-all duration-200",children:[(0,a.jsx)("span",{className:"flex-shrink-0 p-2 rounded-lg mt-0.5 ".concat("positive"===e.type?"bg-green-100":"neutral"===e.type?"bg-yellow-100":"bg-red-100"),children:(0,a.jsx)("span",{className:"block w-2 h-2 rounded-full ".concat("positive"===e.type?"bg-green-500":"neutral"===e.type?"bg-yellow-500":"bg-red-500")})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.text}),"negative"===e.type&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{className:"text-xs px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium transition-colors",children:"查看調整方案"})})]})]},t))})})]})]})]})};var V=s(8408),B=s(1545),I=s(7043),U=s(1629);let z=e=>{let{data:t,color:s="#6366f1"}=e,l=(0,r.useMemo)(()=>{if(!t||0===t.length)return[];let e=Math.min(...t),s=Math.max(...t)-e;return 0===s?t.map(()=>50):t.map(t=>100-Math.round((t-e)/s*100))},[t]);if(!l.length)return(0,a.jsx)("div",{className:"h-10"});let i=l.map((e,t)=>{let s=t/(l.length-1)*80;return"".concat(s,",").concat(e/100*30)}).join(" "),n=l[0]>l[l.length-1]?"down":"up";return(0,a.jsx)("svg",{width:60,height:20,className:"overflow-visible",children:(0,a.jsx)("polyline",{points:i,fill:"none",stroke:"up"===n?s||"#10B981":"#EF4444",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},W=e=>{let{holdings:t,onSelectHolding:s,selectedHolding:l}=e,i=t&&t.length>0?t:[{symbol:"2330",name:"台積電",price:"NT$ 585.00",priceChange:1.75,quantity:"1000",marketValue:"NT$ 585,000",totalReturn:{value:"NT$ 85,000",percentage:"+17.0%"},costBasis:"NT$ 500,000",assetType:"tw_stock"},{symbol:"NVDA",name:"輝達",price:"US$ 875.28",priceChange:3.25,quantity:"50",marketValue:"NT$ 1,360,850",totalReturn:{value:"NT$ 485,350",percentage:"+55.4%"},costBasis:"NT$ 875,500",assetType:"us_stock"},{symbol:"AAPL",name:"蘋果公司",price:"US$ 192.35",priceChange:2.43,quantity:"100",marketValue:"NT$ 598,400",totalReturn:{value:"NT$ 76,200",percentage:"+14.6%"},costBasis:"NT$ 522,200",assetType:"us_stock"},{symbol:"VTI",name:"Vanguard整體股市ETF",price:"US$ 245.73",priceChange:.82,quantity:"200",marketValue:"NT$ 1,528,530",totalReturn:{value:"NT$ 228,530",percentage:"+17.6%"},costBasis:"NT$ 1,300,000",assetType:"etf"},{symbol:"MSFT",name:"微軟",price:"US$ 424.73",priceChange:1.18,quantity:"80",marketValue:"NT$ 1,056,280",totalReturn:{value:"NT$ 156,280",percentage:"+17.4%"},costBasis:"NT$ 900,000",assetType:"us_stock"},{symbol:"BTC",name:"比特幣",price:"US$ 67,542.30",priceChange:4.75,quantity:"25.5",marketValue:"NT$ 1,050,690",totalReturn:{value:"NT$ 200,690",percentage:"+23.6%"},costBasis:"NT$ 850,000",assetType:"crypto"},{symbol:"META",name:"Meta Platforms",price:"US$ 502.31",priceChange:1.67,quantity:"70",marketValue:"NT$ 1,093,540",totalReturn:{value:"NT$ 143,540",percentage:"+15.1%"},costBasis:"NT$ 950,000",assetType:"us_stock"},{symbol:"SPY",name:"SPDR S&P 500 ETF",price:"US$ 521.23",priceChange:.95,quantity:"100",marketValue:"NT$ 1,620,830",totalReturn:{value:"NT$ 220,830",percentage:"+15.8%"},costBasis:"NT$ 1,400,000",assetType:"etf"},{symbol:"GOOGL",name:"Alphabet",price:"US$ 166.54",priceChange:1.35,quantity:"150",marketValue:"NT$ 777,030",totalReturn:{value:"NT$ 77,030",percentage:"+11.0%"},costBasis:"NT$ 700,000",assetType:"us_stock"},{symbol:"TLT",name:"iShares 20年期美國公債ETF",price:"US$ 94.27",priceChange:-.45,quantity:"400",marketValue:"NT$ 1,171,836",totalReturn:{value:"NT$ 71,836",percentage:"+6.5%"},costBasis:"NT$ 1,100,000",assetType:"bond"},{symbol:"VNQ",name:"Vanguard Real Estate ETF",price:"US$ 89.45",priceChange:.78,quantity:"300",marketValue:"NT$ 833,850",totalReturn:{value:"NT$ 83,850",percentage:"+11.2%"},costBasis:"NT$ 750,000",assetType:"reit"},{symbol:"AMD",name:"超微半導體",price:"US$ 158.73",priceChange:4.12,quantity:"120",marketValue:"NT$ 592,248",totalReturn:{value:"NT$ 92,248",percentage:"+18.4%"},costBasis:"NT$ 500,000",assetType:"us_stock"},{symbol:"2317",name:"鴻海",price:"NT$ 108.50",priceChange:-.92,quantity:"2000",marketValue:"NT$ 217,000",totalReturn:{value:"NT$ 17,000",percentage:"+8.5%"},costBasis:"NT$ 200,000",assetType:"tw_stock"},{symbol:"TSLA",name:"特斯拉",price:"US$ 248.42",priceChange:-2.15,quantity:"60",marketValue:"NT$ 463,235",totalReturn:{value:"-NT$ 36,765",percentage:"-7.4%"},costBasis:"NT$ 500,000",assetType:"us_stock"},{symbol:"2454",name:"聯發科",price:"NT$ 765.00",priceChange:-1.42,quantity:"300",marketValue:"NT$ 229,500",totalReturn:{value:"-NT$ 10,500",percentage:"-4.4%"},costBasis:"NT$ 240,000",assetType:"tw_stock"},{symbol:"ETH",name:"以太坊",price:"US$ 3,845.67",priceChange:2.89,quantity:"2",marketValue:"NT$ 239,200",totalReturn:{value:"NT$ 39,200",percentage:"+19.6%"},costBasis:"NT$ 200,000",assetType:"crypto"},{symbol:"2882",name:"國泰金",price:"NT$ 61.80",priceChange:.65,quantity:"3000",marketValue:"NT$ 185,400",totalReturn:{value:"NT$ 15,400",percentage:"+9.1%"},costBasis:"NT$ 170,000",assetType:"tw_stock"},{symbol:"DOT",name:"波卡幣",price:"US$ 6.82",priceChange:-2.18,quantity:"2000",marketValue:"NT$ 424,240",totalReturn:{value:"-NT$ 75,760",percentage:"-15.2%"},costBasis:"NT$ 500,000",assetType:"crypto"},{symbol:"2308",name:"台達電",price:"NT$ 312.00",priceChange:1.95,quantity:"500",marketValue:"NT$ 156,000",totalReturn:{value:"NT$ 6,000",percentage:"+4.0%"},costBasis:"NT$ 150,000",assetType:"tw_stock"},{symbol:"0050",name:"元大台灣50",price:"NT$ 142.30",priceChange:.35,quantity:"1000",marketValue:"NT$ 142,300",totalReturn:{value:"NT$ 17,300",percentage:"+13.8%"},costBasis:"NT$ 125,000",assetType:"etf"},{symbol:"2002",name:"中鋼",price:"NT$ 30.15",priceChange:-1.15,quantity:"5000",marketValue:"NT$ 150,750",totalReturn:{value:"-NT$ 14,250",percentage:"-8.6%"},costBasis:"NT$ 165,000",assetType:"tw_stock"},{symbol:"1216",name:"統一",price:"NT$ 68.50",priceChange:1.48,quantity:"1500",marketValue:"NT$ 102,750",totalReturn:{value:"NT$ 12,750",percentage:"+14.2%"},costBasis:"NT$ 90,000",assetType:"tw_stock"},{symbol:"006208",name:"富邦台50",price:"NT$ 85.40",priceChange:.47,quantity:"1200",marketValue:"NT$ 102,480",totalReturn:{value:"NT$ 12,480",percentage:"+13.9%"},costBasis:"NT$ 90,000",assetType:"etf"},{symbol:"2412",name:"中華電",price:"NT$ 124.50",priceChange:-.4,quantity:"800",marketValue:"NT$ 99,600",totalReturn:{value:"NT$ 4,600",percentage:"+4.8%"},costBasis:"NT$ 95,000",assetType:"tw_stock"},{symbol:"2891",name:"中信金",price:"NT$ 35.85",priceChange:-.28,quantity:"2500",marketValue:"NT$ 89,625",totalReturn:{value:"NT$ 4,625",percentage:"+5.4%"},costBasis:"NT$ 85,000",assetType:"tw_stock"},{symbol:"ADA",name:"艾達幣",price:"US$ 0.48",priceChange:3.45,quantity:"10000",marketValue:"NT$ 149,280",totalReturn:{value:"NT$ 29,280",percentage:"+24.4%"},costBasis:"NT$ 120,000",assetType:"crypto"},{symbol:"00679B",name:"元大美債20年",price:"NT$ 36.78",priceChange:.22,quantity:"3000",marketValue:"NT$ 110,340",totalReturn:{value:"NT$ 10,340",percentage:"+10.3%"},costBasis:"NT$ 100,000",assetType:"bond"},{symbol:"2883",name:"開發金REIT",price:"NT$ 14.85",priceChange:-.34,quantity:"5000",marketValue:"NT$ 74,250",totalReturn:{value:"NT$ 4,250",percentage:"+6.1%"},costBasis:"NT$ 70,000",assetType:"reit"},{symbol:"1301",name:"台塑",price:"NT$ 85.20",priceChange:-.93,quantity:"800",marketValue:"NT$ 68,160",totalReturn:{value:"NT$ 3,160",percentage:"+4.9%"},costBasis:"NT$ 65,000",assetType:"tw_stock"},{symbol:"GLD",name:"SPDR黃金ETF",price:"US$ 198.42",priceChange:2.15,quantity:"150",marketValue:"NT$ 925,950",totalReturn:{value:"NT$ 125,950",percentage:"+15.7%"},costBasis:"NT$ 800,000",assetType:"commodity"},{symbol:"USO",name:"美國原油基金",price:"US$ 72.18",priceChange:-1.85,quantity:"200",marketValue:"NT$ 448,518",totalReturn:{value:"-NT$ 51,482",percentage:"-10.3%"},costBasis:"NT$ 500,000",assetType:"commodity"}],[n,o]=(0,r.useState)("marketValue"),[c,d]=(0,r.useState)("desc"),[x,m]=(0,r.useState)(""),[u,g]=(0,r.useState)("all"),[b,p]=(0,r.useState)(1),y=(0,r.useMemo)(()=>{let e=i.reduce((e,t)=>e+parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),0);return i.map(t=>{let s=parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),a=e>0?(s/e*100).toFixed(1)+"%":"0.0%";return{...t,weight:a}})},[i]),f=(0,r.useMemo)(()=>y.reduce((e,t)=>{let s=parseFloat(t.totalReturn.percentage),a=s>=0,r=[],l=100,i=t.symbol.split("").reduce((e,t)=>e+t.charCodeAt(0),0),n=e=>{let t=1e4*Math.sin(i+e);return t-Math.floor(t)};for(let e=0;e<15;e++){let t=Math.abs(s)/10;t=Math.max(.5,Math.min(3,t));let i=(n(e)-.5)*t*2;a?i+=.3:i-=.3,i+=.5*Math.sin(e/3),l+=i,l=Math.max(70,Math.min(130,l)),r.push(l)}return e[t.symbol]=r,e},{}),[y]),N=(0,r.useMemo)(()=>{let e={all:{label:"全部",count:y.length},stock:{label:"股票",count:0},etf:{label:"ETF",count:0},crypto:{label:"加密貨幣",count:0},bond:{label:"債券",count:0},reit:{label:"REIT",count:0},commodity:{label:"商品",count:0}};return y.forEach(t=>{switch(t.assetType){case"tw_stock":case"us_stock":default:e.stock.count++;break;case"etf":e.etf.count++;break;case"crypto":e.crypto.count++;break;case"bond":e.bond.count++;break;case"reit":e.reit.count++;break;case"commodity":e.commodity.count++}}),e},[y]),v=e=>{e===n?d("asc"===c?"desc":"asc"):(o(e),d("desc"))},j=(0,r.useMemo)(()=>[...y].filter(e=>{let t=e.name.toLowerCase().includes(x.toLowerCase())||e.symbol.toLowerCase().includes(x.toLowerCase()),s=!0;if("all"!==u)switch(u){case"stock":s="tw_stock"===e.assetType||"us_stock"===e.assetType;break;case"etf":s="etf"===e.assetType;break;case"crypto":s="crypto"===e.assetType;break;case"bond":s="bond"===e.assetType;break;case"reit":s="reit"===e.assetType;break;case"commodity":s="commodity"===e.assetType;break;default:s=!0}return t&&s}).sort((e,t)=>{if(["marketValue","totalReturn","weight","price","quantity","costBasis"].includes(n))if("totalReturn"===n){let s=parseFloat(e.totalReturn.percentage),a=parseFloat(t.totalReturn.percentage);return"asc"===c?s-a:a-s}else{let s=e[n],a=t[n],r="string"==typeof s&&s.includes("%")?parseFloat(s):parseFloat(String(s).replace(/[^0-9.-]+/g,"")),l="string"==typeof a&&a.includes("%")?parseFloat(a):parseFloat(String(a).replace(/[^0-9.-]+/g,""));return"asc"===c?r-l:l-r}let s=e[n],a=t[n];return"asc"===c?s.localeCompare(a):a.localeCompare(s)}),[y,n,c,x,u]),w=e=>{let{field:t}=e;return n!==t?null:"asc"===c?(0,a.jsx)(V.A,{className:"h-4 w-4 ml-1 inline"}):(0,a.jsx)(B.A,{className:"h-4 w-4 ml-1 inline"})},T=Math.ceil(j.length/15),k=Math.min(15*b,j.length);r.useEffect(()=>{p(1)},[x,u]);let C=(0,r.useMemo)(()=>{let e=(b-1)*15;return j.slice(e,e+15)},[j,b,15]);return(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"持倉明細"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[j.length," 項資產"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:Object.entries(N).map(e=>{let[t,s]=e,r=u===t,l=((e,t)=>{if(!t)return{style:"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"};switch(e){case"all":return{style:"bg-blue-600 text-white border-blue-600"};case"stock":return{style:"bg-indigo-500 text-white border-indigo-500"};case"etf":return{style:"bg-purple-500 text-white border-purple-500"};case"crypto":return{style:"bg-orange-500 text-white border-orange-500"};case"bond":return{style:"bg-green-500 text-white border-green-500"};case"reit":return{style:"bg-red-500 text-white border-red-500"};case"commodity":return{style:"bg-yellow-500 text-white border-yellow-500"};default:return{style:"bg-gray-500 text-white border-gray-500"}}})(t,r);return(0,a.jsxs)("button",{onClick:()=>g(t),className:"px-3 py-1.5 text-sm rounded-full border transition-all duration-200 ".concat(l.style),children:[s.label," (",s.count,")"]},t)})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"搜尋...",className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm w-48",value:x,onChange:e=>m(e.target.value)}),(0,a.jsx)(I.A,{className:"h-4 w-4 text-gray-400 absolute left-3 top-2.5"}),x&&(0,a.jsx)("button",{className:"absolute right-2 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>m(""),children:(0,a.jsx)(U.A,{className:"h-4 w-4"})})]})]})]})}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full table-fixed",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-60",children:"資產"}),(0,a.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-32",onClick:()=>v("price"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["價格",(0,a.jsx)(w,{field:"price"})]})}),(0,a.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"趨勢"}),(0,a.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-40",onClick:()=>v("marketValue"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["市值",(0,a.jsx)(w,{field:"marketValue"})]})}),(0,a.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-32",onClick:()=>v("totalReturn"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["收益",(0,a.jsx)(w,{field:"totalReturn"})]})}),(0,a.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-28",onClick:()=>v("weight"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["權重",(0,a.jsx)(w,{field:"weight"})]})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:C.map(e=>{let t=(e=>{switch(e.assetType){case"etf":return{color:"text-purple-600",bg:"bg-purple-50",dot:"bg-purple-500",label:"ETF",labelBg:"bg-purple-100",labelText:"text-purple-700"};case"crypto":return{color:"text-orange-600",bg:"bg-orange-50",dot:"bg-orange-500",label:"加密貨幣",labelBg:"bg-orange-100",labelText:"text-orange-700"};case"bond":return{color:"text-green-600",bg:"bg-green-50",dot:"bg-green-500",label:"債券",labelBg:"bg-green-100",labelText:"text-green-700"};case"reit":return{color:"text-red-600",bg:"bg-red-50",dot:"bg-red-500",label:"REIT",labelBg:"bg-red-100",labelText:"text-red-700"};case"commodity":return{color:"text-yellow-600",bg:"bg-yellow-50",dot:"bg-yellow-500",label:"商品",labelBg:"bg-yellow-100",labelText:"text-yellow-700"};case"us_stock":return{color:"text-blue-600",bg:"bg-blue-50",dot:"bg-blue-500",label:"美股",labelBg:"bg-blue-100",labelText:"text-blue-700"};case"tw_stock":return{color:"text-indigo-600",bg:"bg-indigo-50",dot:"bg-indigo-500",label:"台股",labelBg:"bg-indigo-100",labelText:"text-indigo-700"};default:return{color:"text-gray-600",bg:"bg-gray-50",dot:"bg-gray-500",label:"其他",labelBg:"bg-gray-100",labelText:"text-gray-700"}}})(e),r=parseFloat(e.totalReturn.percentage)>=0;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors ".concat(l===e.symbol?"bg-blue-50":""),onClick:()=>s(e.symbol),children:[(0,a.jsx)("td",{className:"py-4 px-6 w-60",children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-md font-medium ".concat(t.labelBg," ").concat(t.labelText," whitespace-nowrap"),children:t.label}),(0,a.jsx)("span",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.symbol})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate mt-1",title:e.name,children:e.name})]})})}),(0,a.jsx)("td",{className:"py-4 px-6 w-32",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:((e,t)=>{let s=e.replace(/^(NT\$|US\$)\s*/,"");switch(t){case"tw_stock":case"etf":case"bond":case"reit":return"NT$ ".concat(s);case"us_stock":case"commodity":case"crypto":return"US$ ".concat(s);default:return e.includes("$")?e:"NT$ ".concat(s)}})(e.price,e.assetType)}),(0,a.jsxs)("div",{className:"text-sm whitespace-nowrap ".concat(e.priceChange>=0?"text-green-600":"text-red-600"),children:[e.priceChange>=0?"+":"",e.priceChange.toFixed(2),"%"]})]})}),(0,a.jsx)("td",{className:"py-4 px-6 w-24",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(z,{data:f[e.symbol],color:f[e.symbol]&&f[e.symbol][0]<f[e.symbol][f[e.symbol].length-1]?"#10b981":"#ef4444"})})}),(0,a.jsxs)("td",{className:"py-4 px-6 text-right w-40",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.marketValue.replace("NT$ ","NT$ ")}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:["持有:"," ",((e,t)=>{let s=parseFloat(e),a=(e=>{switch(e){case"tw_stock":case"us_stock":return"股";case"etf":case"bond":return"張";case"crypto":return"顆";default:return"單位"}})(t);return"crypto"!==t?"".concat(Math.floor(s).toLocaleString()," ").concat(a):s<1?"".concat(s.toFixed(4)," ").concat(a):s<100?"".concat(s.toFixed(2)," ").concat(a):"".concat(Math.floor(s).toLocaleString()," ").concat(a)})(e.quantity,e.assetType)]})]}),(0,a.jsxs)("td",{className:"py-4 px-6 text-right w-32",children:[(0,a.jsx)("div",{className:"font-medium whitespace-nowrap ".concat(r?"text-green-600":"text-red-600"),children:e.totalReturn.percentage}),(0,a.jsx)("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:e.totalReturn.value})]}),(0,a.jsxs)("td",{className:"py-4 px-6 text-right w-28",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.weight}),(0,a.jsx)("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full ml-auto mt-1",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(parseFloat(e.weight),100),"%")}})})]})]},e.symbol)})})]}),0===j.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:x||"all"!==u?"找不到符合的資產":"尚無持倉"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:x||"all"!==u?"試試其他搜尋條件":"開始建立您的投資組合"})]})]}),T>1&&(0,a.jsx)("div",{className:"bg-white px-6 py-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["顯示 ",(b-1)*15+1," 到 ",k," 筆，共 ",j.length," ","筆資料"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>p(Math.max(1,b-1)),disabled:1===b,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一頁"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:T},(e,t)=>t+1).map(e=>1===e||e===T||e>=b-1&&e<=b+1?(0,a.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 text-sm rounded-md ".concat(b===e?"bg-blue-500 text-white":"border border-gray-300 hover:bg-gray-50"),children:e},e):e===b-2||e===b+2?(0,a.jsx)("span",{className:"px-2 text-gray-400",children:"..."},e):null)}),(0,a.jsx)("button",{onClick:()=>p(Math.min(T,b+1)),disabled:b===T,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一頁"})]})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["總市值:"," ",(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:["NT$"," ",i.reduce((e,t)=>e+parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),0).toLocaleString()]})]}),(0,a.jsxs)("span",{className:"text-gray-600",children:["總收益:"," ",(0,a.jsxs)("span",{className:"font-semibold ".concat(i.reduce((e,t)=>e+parseFloat(t.totalReturn.value.replace(/[^0-9.-]+/g,"")),0)>=0?"text-green-600":"text-red-600"),children:["NT$"," ",i.reduce((e,t)=>e+parseFloat(t.totalReturn.value.replace(/[^0-9.-]+/g,"")),0).toLocaleString()]})]})]})})]})};v.t1.register(v.PP,v.kc,v.FN,v.No,v.E8,v.hE,v.m_,v.s$,v.dN);let O=e=>{var t;let{data:s,timeRange:i,showBenchmark:n=!1,showDetails:c=!1}=e,[d,x]=(0,r.useState)("line"),[m,g]=(0,r.useState)(["benchmark"]),[b,p]=(0,r.useState)(!1),[y]=(0,r.useState)(!1),[f,N]=(0,r.useState)(i),v=(0,r.useMemo)(()=>[{id:"benchmark",name:"大盤指數",color:"rgb(255, 99, 132)"},{id:"sp500",name:"S&P 500",color:"rgb(54, 162, 235)"},{id:"nasdaq",name:"納斯達克",color:"rgb(255, 206, 86)"},{id:"peers",name:"同類型投資者",color:"rgb(75, 192, 192)"}],[]),w=(0,r.useMemo)(()=>({"1W":{labels:["6/10","6/11","6/12","6/13","6/14","6/15","6/16"],portfolio:[2450600,2456800,2463200,2458900,2465400,2471800,2475300],benchmark:[18500,18520,18545,18532,18558,18575,18583],return:"+1.01%",isPositive:!0},"1M":{labels:["5/17","5/24","5/31","6/7","6/14","6/16"],portfolio:[2385e3,2398500,2415600,2435800,2455200,2475300],benchmark:[18200,18280,18350,18420,18520,18583],return:"+3.79%",isPositive:!0},"3M":{labels:["4月","5月","6月"],portfolio:[228e4,2385e3,2475300],benchmark:[17800,18200,18583],return:"+8.56%",isPositive:!0},"6M":{labels:["1月","2月","3月","4月","5月","6月"],portfolio:[215e4,2195e3,2245e3,228e4,2385e3,2475300],benchmark:[17200,17350,17500,17800,18200,18583],return:"+15.13%",isPositive:!0},"1Y":{labels:["2023/6","2023/9","2023/12","2024/3","2024/6"],portfolio:[2e6,2088e3,2156e3,2245e3,2475300],benchmark:[16500,16800,17100,17500,18583],return:"+23.77%",isPositive:!0},ALL:{labels:["2022","2023","2024"],portfolio:[18e5,2156e3,2475300],benchmark:[15800,17100,18583],return:"+37.52%",isPositive:!0}}),[]),T=(0,r.useMemo)(()=>{var e,t,a;let r=w[f];if(r)return{labels:r.labels,portfolio:r.portfolio,benchmark:r.benchmark};let l=(null==s||null==(e=s.daily)?void 0:e.labels)||[],i=(null==s||null==(t=s.daily)?void 0:t.portfolio)||[],n=null==s||null==(a=s.daily)?void 0:a.benchmark;switch(f){case"1W":return{labels:l.slice(-7),portfolio:i.slice(-7),benchmark:n?n.slice(-7):[]};case"1M":return{labels:l.slice(-30),portfolio:i.slice(-30),benchmark:n?n.slice(-30):[]};case"3M":return{labels:l.slice(-90),portfolio:i.slice(-90),benchmark:n?n.slice(-90):[]};case"6M":case"1Y":return(null==s?void 0:s.weekly)||{labels:[],portfolio:[]};case"YTD":return{labels:l.slice(-150),portfolio:i.slice(-150),benchmark:n?n.slice(-150):[]};default:return(null==s?void 0:s.monthly)||{labels:[],portfolio:[]}}},[s,f,w]),k=(0,r.useMemo)(()=>{let e=w[f];return[{title:"總回報率",value:(null==e?void 0:e.return)||"+0.00%",isPositive:(null==e?void 0:e.isPositive)||!1,description:"".concat(f,"期間表現"),icon:(null==e?void 0:e.isPositive)?o.A:u.A},{title:"年化收益率",value:"+22.4%",isPositive:!0,description:"折算年度表現",icon:o.A},{title:"最大回撤",value:"-8.2%",isPositive:!1,description:"最大下跌幅度",icon:u.A},{title:"波動率",value:"15.3%",isPositive:null,description:"風險水平指標",icon:h.A}]},[f,w]),C=(0,r.useMemo)(()=>{let e=T.portfolio;if(0===e.length)return{drawdown:"0.0",volatility:"0.0",totalReturn:"0.0",annualizedReturn:"0.0",highest:"0",lowest:"0",current:"0"};let t=Math.max(...e),s=Math.min(...e),a=e[e.length-1],r=e[0],l=((a-r)/r*100).toFixed(1),i=0,n=e[0];for(let t of e)t>n&&(n=t),i=Math.max(i,(n-t)/n*100);let o=e.slice(1).map((t,s)=>(t-e[s])/e[s]),c=o.reduce((e,t)=>e+t,0)/o.length,d=Math.sqrt(o.reduce((e,t)=>e+Math.pow(t-c,2),0)/o.length)*Math.sqrt(252)*100,x=Math.pow(a/r,365/e.length)-1;return{drawdown:i.toFixed(1),volatility:d.toFixed(1),totalReturn:l,annualizedReturn:(100*x).toFixed(1),highest:t.toLocaleString(),lowest:s.toLocaleString(),current:a.toLocaleString()}},[T]),A={labels:T.labels,datasets:[{label:"投資組合",data:T.portfolio,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,yAxisID:"y"},{label:"台股加權指數",data:T.benchmark||[],borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",borderWidth:2,fill:!1,tension:.4,borderDash:[5,5],yAxisID:"y1"}]};return(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden ".concat(y?"fixed inset-0 z-50 overflow-auto":""),children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-green-100/30 to-blue-100/30 rounded-full blur-3xl -translate-y-32 -translate-x-32"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4 lg:mb-0",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:(0,a.jsx)(l.A,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"績效走勢分析"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合歷史表現追蹤"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"1週",value:"1W"},{label:"1月",value:"1M"},{label:"3月",value:"3M"},{label:"6月",value:"6M"},{label:"1年",value:"1Y"},{label:"全部",value:"ALL"}].map(e=>(0,a.jsx)("button",{onClick:()=>N(e.value),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(f===e.value?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.value))})})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 relative z-10",children:k.map((e,t)=>{let s=e.icon;return(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,a.jsx)(s,{className:"h-5 w-5 ".concat(!0===e.isPositive?"text-green-500":!1===e.isPositive?"text-red-500":"text-gray-500")})]}),(0,a.jsx)("div",{className:"text-2xl font-bold mb-1 ".concat(!0===e.isPositive?"text-green-600":!1===e.isPositive?"text-red-600":"text-gray-800"),children:e.value}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},t)})}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 relative z-10",children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-2 sm:mb-0",children:[(0,a.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,a.jsx)("button",{type:"button",onClick:()=>x("line"),className:"px-4 py-2 text-xs font-medium rounded-l-lg ".concat("line"===d?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"線圖"}),(0,a.jsx)("button",{type:"button",onClick:()=>x("area"),className:"px-4 py-2 text-xs font-medium ".concat("area"===d?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border-t border-b border-gray-300"),children:"區域圖"}),(0,a.jsx)("button",{type:"button",onClick:()=>x("bar"),className:"px-4 py-2 text-xs font-medium rounded-r-lg ".concat("bar"===d?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"柱狀圖"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>p(!b),className:"px-3 py-2 text-xs font-medium rounded-lg flex items-center ".concat(b?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"顯示關鍵時期"]})]}),n&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map(e=>(0,a.jsxs)("button",{onClick:()=>(e=>{m.includes(e)?g(m.filter(t=>t!==e)):g([...m,e])})(e.id),className:"px-3 py-1 text-xs font-medium rounded-full flex items-center ".concat(m.includes(e.id)?"bg-blue-100 text-blue-700 border border-blue-200":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-1",style:{backgroundColor:e.color}}),e.name]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"投資組合 vs 基準指數"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"投資組合"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-0.5 bg-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"台股加權指數"})]})]})]}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(j.N1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let t=e.dataset.label||"";t&&(t+=": ");let s=e.parsed,a=null;if(null==s)a=null;else if("number"==typeof s)a=s;else if("object"==typeof s&&"y"in s){let e=s.y;a="number"==typeof e?e:null}else a=null;return null==a?t+="N/A":0===e.datasetIndex?t+="NT$"+Number(a).toLocaleString():t+=Number(a).toLocaleString(),t}}}},scales:{x:{grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"投資組合價值 (NT$)"},ticks:{callback:function(e){return"NT$"+(Number(e)/1e6).toFixed(1)+"M"}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"基準指數"},grid:{drawOnChartArea:!1}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},data:A})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"期間回報率"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:(null==(t=w[f])?void 0:t.return)||"+0.00%"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"超額回報率"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:"+5.2%"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"夏普比率"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-800",children:"1.65"})]})]})})]}),(0,a.jsx)("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 relative z-10",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-blue-900 mb-2",children:"績效分析洞察"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-blue-800 mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"✓ 表現優異："}),"您的投資組合在",f,"期間表現優於市場基準指數5.2%，顯示良好的選股和配置策略。"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"→ 風險控制："}),"夏普比率1.65表示在承擔相對風險下獲得了不錯的回報，風險調整後收益表現良好。"]})})]})]})]})}),c&&(0,a.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6 relative z-10",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"績效詳細數據"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-blue-700 font-medium mb-1",children:"總回報率"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(Number(C.totalReturn)>=0?"text-green-600":"text-red-600"),children:[Number(C.totalReturn)>=0?"+":"",C.totalReturn,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"期間累計收益"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-green-700 font-medium mb-1",children:"年化報酬"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",C.annualizedReturn,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"年度化收益率"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-red-700 font-medium mb-1",children:"最大回撤"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["-",C.drawdown,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"從最高點下跌"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-700 font-medium mb-1",children:"波動率"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:[C.volatility,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"年化標準差"})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h5",{className:"text-lg font-medium text-gray-900",children:"統計數據"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"指標"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"投資組合"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"基準指數"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"超額表現"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"風險指標"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"總回報率"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:["+",C.totalReturn,"%"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["+",(Number(C.totalReturn)-21.5).toFixed(1),"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:"+18.3%"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:"1.65"})]})})]})})]})]}),c&&(0,a.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6 relative z-10",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-blue-600 mr-2"}),"投資成本影響分析"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"管理費用影響"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"目前投資組合的加權平均管理費率為 1.2%，略高於建議的 0.8%。"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"年度費用影響:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:"-0.4%"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"長期影響 (10年):"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:"-7.02%"})]})]}),(0,a.jsx)("div",{className:"mt-3 text-xs text-blue-600 font-medium",children:"建議: 考慮將部分主動式基金轉為低費率ETF"})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"再平衡效益分析"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"定期再平衡可以維持您的風險水平，同時可能提高長期回報率。"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"上次再平衡:"}),(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"30天前"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"建議頻率:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:"每季度"})]})]}),(0,a.jsx)("div",{className:"mt-3 text-xs text-green-600 font-medium",children:"下次建議再平衡: 2024年9月15日"})]})]})]})]})};v.t1.register(v.PP,v.kc,v.FN,v.E8,v.No,v.Bs,v.hE,v.m_,v.s$,v.dN);let H=e=>{let{transactions:t}=e,s=L.getInstance(),l=(0,r.useMemo)(()=>[{id:"tx_001",date:"2024-06-15",type:"買入",symbol:"2330",name:"台積電",quantity:1e3,price:"NT$ 585.00",total:"NT$ 585,000",exchange:"台灣證券交易所",note:"分批建倉第一筆"},{id:"tx_002",date:"2024-06-10",type:"買入",symbol:"2317",name:"鴻海",quantity:2e3,price:"NT$ 108.50",total:"NT$ 217,000",exchange:"台灣證券交易所",note:"看好電動車趨勢"},{id:"tx_003",date:"2024-06-08",type:"賣出",symbol:"AAPL",name:"蘋果公司",quantity:50,price:"US$ 195.89",total:"NT$ 304,850",exchange:"NASDAQ",note:"獲利了結"},{id:"tx_004",date:"2024-06-05",type:"買入",symbol:"0050",name:"元大台灣50",quantity:1e3,price:"NT$ 142.30",total:"NT$ 142,300",exchange:"台灣證券交易所",note:"定期定額投資"},{id:"tx_005",date:"2024-06-03",type:"買入",symbol:"NVDA",name:"輝達",quantity:20,price:"US$ 1,208.88",total:"NT$ 751,500",exchange:"NASDAQ",note:"看好AI晶片前景"},{id:"tx_006",date:"2024-05-28",type:"賣出",symbol:"2454",name:"聯發科",quantity:500,price:"NT$ 765.00",total:"NT$ 382,500",exchange:"台灣證券交易所",note:"減倉操作"},{id:"tx_007",date:"2024-05-25",type:"買入",symbol:"MSFT",name:"微軟",quantity:30,price:"US$ 424.73",total:"NT$ 396,050",exchange:"NASDAQ",note:"長期持有"},{id:"tx_008",date:"2024-05-20",type:"買入",symbol:"2882",name:"國泰金",quantity:3e3,price:"NT$ 61.80",total:"NT$ 185,400",exchange:"台灣證券交易所",note:"金融股配息"},{id:"tx_009",date:"2024-05-15",type:"買入",symbol:"TSLA",name:"特斯拉",quantity:25,price:"US$ 178.79",total:"NT$ 138,950",exchange:"NASDAQ",note:"電動車龍頭"},{id:"tx_010",date:"2024-05-10",type:"賣出",symbol:"2308",name:"台達電",quantity:800,price:"NT$ 312.00",total:"NT$ 249,600",exchange:"台灣證券交易所",note:"技術分析賣點"},{id:"tx_011",date:"2024-05-05",type:"買入",symbol:"6505",name:"台塑化",quantity:2e3,price:"NT$ 95.50",total:"NT$ 191,000",exchange:"台灣證券交易所",note:"傳產價值投資"},{id:"tx_012",date:"2024-05-01",type:"買入",symbol:"GOOGL",name:"Alphabet",quantity:15,price:"US$ 166.54",total:"NT$ 77,630",exchange:"NASDAQ",note:"科技股布局"},{id:"tx_013",date:"2024-04-28",type:"買入",symbol:"2891",name:"中信金",quantity:2500,price:"NT$ 35.85",total:"NT$ 89,625",exchange:"台灣證券交易所",note:"金融股分散"},{id:"tx_014",date:"2024-04-25",type:"賣出",symbol:"2412",name:"中華電",quantity:1e3,price:"NT$ 124.50",total:"NT$ 124,500",exchange:"台灣證券交易所",note:"電信股整理"},{id:"tx_015",date:"2024-04-20",type:"買入",symbol:"SPY",name:"SPDR S&P 500 ETF",quantity:20,price:"US$ 521.23",total:"NT$ 324,150",exchange:"NYSE",note:"美股ETF配置"},{id:"tx_016",date:"2024-04-15",type:"買入",symbol:"1303",name:"南亞",quantity:1500,price:"NT$ 78.90",total:"NT$ 118,350",exchange:"台灣證券交易所",note:"化工類股"},{id:"tx_017",date:"2024-04-10",type:"買入",symbol:"META",name:"Meta Platforms",quantity:12,price:"US$ 502.31",total:"NT$ 187,350",exchange:"NASDAQ",note:"社群媒體龍頭"},{id:"tx_018",date:"2024-04-05",type:"賣出",symbol:"2881",name:"富邦金",quantity:2e3,price:"NT$ 82.70",total:"NT$ 165,400",exchange:"台灣證券交易所",note:"金融股調整"},{id:"tx_019",date:"2024-04-01",type:"買入",symbol:"2002",name:"中鋼",quantity:5e3,price:"NT$ 30.15",total:"NT$ 150,750",exchange:"台灣證券交易所",note:"鋼鐵股逢低承接"},{id:"tx_020",date:"2024-03-28",type:"買入",symbol:"AMD",name:"超微半導體",quantity:35,price:"US$ 180.72",total:"NT$ 196,550",exchange:"NASDAQ",note:"半導體競爭者"}],[]),{data:i,execute:n}=(0,F.aE)(),[o]=(0,r.useState)("date"),[c]=(0,r.useState)("desc"),[d,x]=(0,r.useState)(""),[m,u]=(0,r.useState)("all"),[h,g]=(0,r.useState)(1),[b,p]=(0,r.useState)("all"),[y,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),w=(0,r.useCallback)(async()=>{await n(async()=>{if(t&&t.length>0)return t;try{return(await s.getTransactionHistory("user_001")).map(e=>({...e,name:e.symbol+" 股票",total:"NT$ ".concat((e.quantity*e.price).toLocaleString()),price:"NT$ ".concat(e.price.toLocaleString()),type:"buy"===e.type?"買入":"賣出"}))}catch(e){return console.log("使用模擬交易數據"),l}})},[n,t,l,s]);(0,r.useEffect)(()=>{t&&t.length>0||w()},[t,w]);let T=i||l,k=(0,r.useMemo)(()=>{let e=i||T;if(!e||0===e.length)return T;let t=(e=>{let t=new Date,s=new Date;switch(e){case"last7days":s.setDate(t.getDate()-7);break;case"last30days":s.setDate(t.getDate()-30);break;case"last90days":s.setDate(t.getDate()-90);break;case"thisYear":s=new Date(t.getFullYear(),0,1);break;default:return()=>!0}return e=>{let a=new Date(e.date);return a>=s&&a<=t}})(b);return[...e].filter(e=>{let s=""===d||e.symbol.toLowerCase().includes(d.toLowerCase())||e.name.toLowerCase().includes(d.toLowerCase()),a="all"===m||e.type===m,r=t(e);return s&&a&&r}).sort((e,t)=>{if("date"===o){let s=new Date(e.date),a=new Date(t.date);return"asc"===c?s.getTime()-a.getTime():a.getTime()-s.getTime()}if(["quantity","price","total"].includes(o)){let s="string"==typeof e[o]?parseFloat(e[o].replace(/[^0-9.-]+/g,"")):Number(e[o]),a="string"==typeof t[o]?parseFloat(t[o].replace(/[^0-9.-]+/g,"")):Number(t[o]);return"asc"===c?s-a:a-s}let s=String(e[o]),a=String(t[o]);return"asc"===c?s.localeCompare(a):a.localeCompare(s)})},[i,T,o,c,d,m,b]),C=Math.ceil(k.length/10),A=k.slice((h-1)*10,10*h);(0,r.useEffect)(()=>{g(1)},[d,m,b]);let $=(0,r.useMemo)(()=>{let e=i||T;if(!e||0===e.length)return{basic:{買入:{count:0,total:0},賣出:{count:0,total:0}},monthly:[],symbols:[],netCashFlow:0};let t={買入:{count:0,total:0},賣出:{count:0,total:0}},s={},a={};return e.forEach(e=>{let r=e.type,l=parseFloat(e.total.replace(/[^0-9.-]+/g,"")),i=new Date(e.date),n="".concat(i.getFullYear(),"-").concat((i.getMonth()+1).toString().padStart(2,"0")),o=e.symbol;t[r].count+=1,t[r].total+=l,s[n]||(s[n]={買入:0,賣出:0}),s[n][r]+=l,a[o]||(a[o]={name:e.name,買入:0,賣出:0,count:0}),a[o][r]+=l,a[o].count+=1}),{basic:t,monthly:Object.entries(s).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}).slice(-12),symbols:Object.entries(a).map(e=>{let[t,s]=e;return{symbol:t,...s}}).sort((e,t)=>t.count-e.count).slice(0,10),netCashFlow:t.賣出.total-t.買入.total}},[i,T]),P=(0,r.useMemo)(()=>{let e=$.monthly.map(e=>{let[t]=e;return t}),t=$.monthly.map(e=>{let[,t]=e;return t.買入});return{monthlyChart:{labels:e,datasets:[{label:"買入",data:t,backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)"},{label:"賣出",data:$.monthly.map(e=>{let[,t]=e;return t.賣出}),backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgb(239, 68, 68)"}]},symbolChart:{labels:$.symbols.slice(0,5).map(e=>e.symbol),datasets:[{label:"交易金額",data:$.symbols.slice(0,5).map(e=>e.買入+e.賣出),backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:"rgba(0, 0, 0, 0.1)"}]}}},[$]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"交易歷史"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"投資交易記錄與統計"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>p(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"全部時間"}),(0,a.jsx)("option",{value:"last7days",children:"最近7天"}),(0,a.jsx)("option",{value:"last30days",children:"最近30天"}),(0,a.jsx)("option",{value:"last90days",children:"最近90天"}),(0,a.jsx)("option",{value:"thisYear",children:"本年度"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"總交易"}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900 mt-1",children:k.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"買入總額"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600 mt-1",children:[($.basic.買入.total/1e3).toFixed(0),"K"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"賣出總額"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-red-600 mt-1",children:[($.basic.賣出.total/1e3).toFixed(0),"K"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"淨現金流"}),(0,a.jsxs)("div",{className:"text-xl font-bold mt-1 ".concat($.netCashFlow>=0?"text-green-600":"text-red-600"),children:[$.netCashFlow>=0?"+":"",($.netCashFlow/1e3).toFixed(0),"K"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"月度交易趨勢"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(j.yP,{data:P.monthlyChart,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{callback:function(e){return Number(e).toLocaleString()}}}}}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"交易記錄"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[k.length," 筆"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"text-sm border border-gray-300 rounded px-3 py-1",children:[(0,a.jsx)("option",{value:"all",children:"全部"}),(0,a.jsx)("option",{value:"買入",children:"買入"}),(0,a.jsx)("option",{value:"賣出",children:"賣出"})]}),(0,a.jsx)("input",{type:"text",placeholder:"搜尋...",className:"text-sm border border-gray-300 rounded px-3 py-1 w-32 focus:outline-none focus:ring-1 focus:ring-blue-500",value:d,onChange:e=>x(e.target.value)})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"日期"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"類型"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"股票"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"數量"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"價格"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"總額"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"操作"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[A.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded ".concat("買入"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.symbol}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.name})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.quantity.toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.price}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.total}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{onClick:()=>{v(e),f(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"查看"})})]},e.id)),0===A.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"沒有找到交易記錄"})})]})]})}),C>1&&(0,a.jsxs)("div",{className:"px-6 py-3 border-t border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["第 ",h," 頁，共 ",C," 頁"]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>g(Math.max(1,h-1)),disabled:1===h,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",children:"上一頁"}),(0,a.jsx)("button",{onClick:()=>g(Math.min(C,h+1)),disabled:h===C,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",children:"下一頁"})]})]})]}),y&&N&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"交易詳情"}),(0,a.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"交易日期"}),(0,a.jsx)("div",{className:"font-medium",children:N.date})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"交易類型"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded ".concat("買入"===N.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:N.type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"股票代號"}),(0,a.jsx)("div",{className:"font-medium",children:N.symbol})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"股票名稱"}),(0,a.jsx)("div",{className:"font-medium",children:N.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"數量"}),(0,a.jsx)("div",{className:"font-medium",children:N.quantity.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"價格"}),(0,a.jsx)("div",{className:"font-medium",children:N.price})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"總額"}),(0,a.jsx)("div",{className:"text-lg font-bold",children:N.total})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"關閉"})})]})]})})]})};var G=s(1539),Y=s(6069),Q=s(603);function Z(e){return!!e&&"object"==typeof e&&"overview"in e&&"allocation"in e&&"performance"in e&&"transactions"in e}let K=()=>{let[e,t]=(0,r.useState)(null),[s,u]=(0,r.useState)("overview"),[h,g]=(0,r.useState)(new Date),{isLoading:b,isInitialized:p,error:y}=(0,Q.j)({enableCache:!0,enableMockData:!0}),f=(0,r.useMemo)(()=>L.getInstance(),[]),N=(0,r.useMemo)(()=>Y.S.getInstance(),[]),{data:v,loading:j,errors:T,isComplete:k,reload:C}=(0,F.Zi)({user:()=>N.getUserProfile("user_001"),portfolio:()=>f.getPortfolio("user_001"),portfolios:()=>f.getUserPortfolios("user_001"),performance:()=>f.getPortfolioPerformance("user_001","1M"),allocation:()=>f.getAssetAllocation("user_001"),transactions:()=>f.getTransactionHistory("user_001",10)},{priority:["user","portfolio","allocation","performance","portfolios","transactions"],concurrent:!1,onProgress:(e,t)=>{console.log("數據預加載進度: ".concat(e,"/").concat(t))}}),{data:A,loading:$,error:P,retry:S}=(0,F.Au)((0,r.useCallback)(()=>f.getPortfolio("user_001"),[f]),{maxRetries:2,retryDelay:5e3,retryCondition:e=>e.message.includes("網路")||e.message.includes("timeout"),onRetry:(e,t)=>{console.log("重試第 ".concat(e," 次，錯誤:"),t.message)},cacheKey:"portfolio_realtime",cacheTTL:6e4,enabled:p&&k}),R=(0,r.useMemo)(()=>[{id:"overview",name:"投資組合概覽",icon:l.A,description:"總體資產狀況與關鍵指標"},{id:"allocation",name:"資產配置",icon:i.A,description:"資產類別與地區分布分析"},{id:"holdings",name:"持倉明細",icon:n.A,description:"個股持倉詳細資訊"},{id:"performance",name:"績效分析",icon:o.A,description:"投資報酬與績效評估"},{id:"transactions",name:"交易歷史",icon:c.A,description:"歷史交易紀錄與分析"},{id:"risk",name:"風險與建議",icon:d.A,description:"風險評估與AI智能建議"}],[]),M=(0,r.useCallback)(async()=>{try{g(new Date),await C(),P&&await S()}catch(e){console.error("手動刷新失敗:",e)}},[C,S,P]);(0,r.useEffect)(()=>{let e=()=>{document.hidden?console.log("頁面隱藏，暫停實時更新"):(console.log("頁面顯示，恢復實時更新"),g(new Date))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]);let E=(0,r.useMemo)(()=>{let{user:e,portfolio:t,allocation:s,performance:a,transactions:r}=v;return{user:e,portfolio:A||t,allocation:s,performance:a,transactions:r}},[v,A]);return b?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"正在初始化應用程式..."}),y&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-4 bg-red-50 px-4 py-2 rounded-lg inline-block",children:y})]})}):j&&!k?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"載入投資組合數據中..."})]})}):Object.keys(T).length>0?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 shadow-xl relative overflow-hidden",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:"投資組合管理"}),(0,a.jsx)("p",{className:"text-red-200 mt-4 text-lg",children:"載入過程中發生錯誤"})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-red-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"載入失敗"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("ul",{className:"space-y-2 mb-6",children:Object.entries(T).map(e=>{let[t,s]=e;return(0,a.jsxs)("li",{className:"flex items-center text-red-700 bg-red-50 px-3 py-2 rounded-lg",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),(0,a.jsxs)("span",{className:"font-medium",children:[t,":"]}),(0,a.jsx)("span",{className:"ml-2",children:s})]},t)})}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",children:"重新載入"})]})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 shadow-xl relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full",children:[(0,a.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white opacity-5 rounded-full"}),(0,a.jsx)("div",{className:"absolute bottom-10 right-20 w-32 h-32 bg-white opacity-5 rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-radial from-white/10 to-transparent rounded-full"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{className:"mb-8 lg:mb-0",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm mr-4",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:"投資組合管理"}),(0,a.jsxs)("p",{className:"text-blue-100 mt-2",children:["歡迎回來，",(0,a.jsx)("span",{className:"font-semibold text-white ml-1",children:"object"==typeof v.user&&v.user&&"name"in v.user&&"string"==typeof v.user.name?v.user.name:"投資者"})]})]})]}),(0,a.jsx)("p",{className:"text-blue-100 text-lg max-w-2xl",children:"智能投資組合管理系統，追蹤績效表現、風險評估，並提供最佳化建議"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[$&&(0,a.jsxs)("div",{className:"flex items-center bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-full border border-white/20",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2 animate-spin"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"更新中..."})]}),P&&(0,a.jsxs)("button",{onClick:S,className:"text-red-200 hover:text-white text-sm flex items-center bg-red-500/20 hover:bg-red-500/30 px-4 py-2 rounded-full border border-red-300/30 transition-all duration-200",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"重試"]}),(0,a.jsxs)("button",{onClick:M,className:"text-white/80 hover:text-white text-sm flex items-center bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full border border-white/20 transition-all duration-200",title:"手動刷新數據",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"刷新"]}),(0,a.jsxs)("div",{className:"text-white/60 text-xs",children:["最後更新: ",h.toLocaleTimeString("zh-TW")]})]})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("nav",{className:"flex space-x-6 overflow-x-auto pb-2 scrollbar-hide",children:R.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>u(e.id),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap transition-all duration-200 ".concat(s===e.id?"bg-white text-indigo-700 shadow-lg":"text-white hover:bg-white/10 hover:text-white"),title:e.description,children:[(0,a.jsx)(t,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.name})]},e.id)})})})]})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"space-y-8",children:["overview"===s&&(0,a.jsx)("div",{className:"space-y-8 animate-fadeIn",children:Z(E.portfolio)?(0,a.jsx)(w,{data:E.portfolio.overview}):(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mx-auto"})]})})}),"allocation"===s&&(0,a.jsx)("div",{className:"animate-fadeIn",children:!function(e){return!!e&&"object"==typeof e&&Array.isArray(e.byAssetClass)&&Array.isArray(e.bySector)&&Array.isArray(e.byRegion)&&Array.isArray(e.recommendations)}(E.allocation)?(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"w-32 h-32 bg-gray-200 rounded-full mx-auto mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mx-auto"})]})}):(0,a.jsx)(D,{data:E.allocation})}),"holdings"===s&&(0,a.jsx)("div",{className:"animate-fadeIn",children:(0,a.jsx)(W,{holdings:Z(E.portfolio)&&Array.isArray(E.portfolio.holdings)?E.portfolio.holdings:[],onSelectHolding:t,selectedHolding:e||void 0})}),"performance"===s&&(0,a.jsx)("div",{className:"animate-fadeIn space-y-8",children:(0,a.jsx)(O,{data:Z(E.portfolio)&&E.performance&&function(e){return!!e&&"object"==typeof e&&"daily"in e&&"weekly"in e&&"monthly"in e&&"returns"in e}(E.performance)?E.performance:{daily:{labels:[],portfolio:[]},weekly:{labels:[],portfolio:[]},monthly:{labels:[],portfolio:[]},returns:{}},timeRange:"1M",showDetails:!0,showBenchmark:!0})}),"transactions"===s&&(0,a.jsx)("div",{className:"animate-fadeIn",children:(0,a.jsx)(H,{transactions:E.transactions&&Array.isArray(E.transactions)?E.transactions:[]})}),"risk"===s&&(0,a.jsx)("div",{className:"animate-fadeIn"})]})}),(0,a.jsx)(G.A,{})]})}},697:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolio",function(){return s(629)}])},1539:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(7876);s(4232);var r=s(7021),l=s(9038);let i=()=>(0,a.jsxs)("footer",{className:"bg-gray-900 text-gray-300 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20"})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10 pt-12",children:[(0,a.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4",children:(0,a.jsx)(r.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white",children:"FinTech Studio"}),(0,a.jsx)("p",{className:"text-gray-400",children:"智慧金融分析平台"})]})]}),(0,a.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6 max-w-md",children:"金融走勢智慧分析，讓投資更簡單。透過 AI 技術，提供即時市場分析、訊號分析和交易建議，助您做出明智的投資決策。"}),(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsx)("a",{href:"https://github.com/fintech-studio/financial-analysis",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center transition-colors group",children:(0,a.jsx)(l.hL4,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-semibold mb-6",children:"功能"}),(0,a.jsx)("ul",{className:"space-y-3",children:["市場分析","財經新聞","AI 預測","AI 助理"].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:["/market-analysis","/news","/predict","/chat"][["市場分析","財經新聞","AI 預測","AI 助理"].indexOf(e)],className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-semibold mb-6",children:"支援"}),(0,a.jsx)("ul",{className:"space-y-3",children:["幫助中心","聯絡我們","隱私政策","服務條款"].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-center",children:(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["\xa9 ",new Date().getFullYear()," FinTech Studio. All rights reserved."]})})]})]})},6069:(e,t,s)=>{"use strict";s.d(t,{S:()=>r});var a=s(1925);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}async login(e){try{let t={id:"user_001",name:"張小明",email:e.email,level:"進階投資者",location:"台北",joinDate:"2023年1月加入",preferences:{theme:"light",language:"zh-TW",notifications:{email:!0,push:!0,priceAlerts:!0,newsAlerts:!1},riskTolerance:"moderate"},portfolio:{totalValue:125e4,totalReturn:125e3,monthlyReturn:8.5}},s="jwt_token_".concat(Date.now());return{user:t,token:s}}catch(e){throw Error("登入失敗：用戶名或密碼錯誤")}}async register(e){try{let t=await this.userModel.createUser({name:e.name,email:e.email,level:"新手投資者",location:e.location,joinDate:new Date().toLocaleDateString("zh-TW"),preferences:{theme:"light",language:"zh-TW",notifications:{email:!0,push:!0,priceAlerts:!0,newsAlerts:!0},riskTolerance:"conservative"},portfolio:{totalValue:0,totalReturn:0,monthlyReturn:0}}),s="jwt_token_".concat(Date.now());return{user:t,token:s}}catch(e){throw Error("註冊失敗：請檢查輸入資料")}}async getUserProfile(e){let t=await this.userModel.getUserById(e);if(!t)throw Error("用戶不存在");return t}async updateUserProfile(e,t){try{return await this.userModel.updateUser(e,t)}catch(e){throw Error("更新用戶資料失敗")}}async getUserActivities(){try{return await this.userModel.getUserActivities()}catch(e){throw Error("獲取用戶活動記錄失敗")}}async updateUserPreferences(e,t){let s=await this.userModel.getUserById(e);if(!s)throw Error("用戶不存在");let a={...s.preferences,...t};return await this.userModel.updateUser(e,{preferences:a})}async logout(){return!0}async getInvestmentStats(){try{return{totalValue:125e4,totalReturn:125e3,returnRate:12.5,portfolioCount:3,watchlistCount:15,articlesRead:42,coursesCompleted:8,monthlyReturn:8.5,bestStock:"台積電",winRate:68.5}}catch(e){throw Error("獲取投資統計失敗")}}async getAchievements(){try{return[{id:1,name:"首次投資",description:"完成第一筆投資交易",icon:"\uD83D\uDE80",unlocked:!0,color:"text-blue-600"},{id:2,name:"學習達人",description:"完成10堂投資課程",icon:"\uD83D\uDCDA",unlocked:!0,color:"text-green-600"},{id:3,name:"風險管理師",description:"建立多元化投資組合",icon:"\uD83D\uDEE1️",unlocked:!1,color:"text-purple-600"}]}catch(e){throw Error("獲取成就失敗")}}async getRecentActivities(){try{return[{id:1,type:"investment",action:"買入",target:"台積電",amount:"50,000",time:"2小時前",icon:"\uD83D\uDCC8",color:"text-green-600",bgColor:"bg-green-50"},{id:2,type:"analysis",action:"分析",target:"半導體產業",time:"4小時前",icon:"\uD83D\uDD0D",color:"text-blue-600",bgColor:"bg-blue-50"},{id:3,type:"learning",action:"完成課程",target:"技術分析基礎",time:"1天前",icon:"\uD83C\uDF93",color:"text-purple-600",bgColor:"bg-purple-50"}]}catch(e){throw Error("獲取活動記錄失敗")}}async updateNotificationSettings(e,t){try{console.log("Updated notification settings for user ".concat(e,":"),t)}catch(e){throw Error("更新通知設定失敗")}}async requestPasswordReset(e){try{return console.log("Password reset requested for email: ".concat(e)),await new Promise(e=>setTimeout(e,1e3)),{message:"密碼重設郵件已發送至 ".concat(e)}}catch(e){throw Error("發送密碼重設郵件失敗")}}constructor(){this.userModel=a.F.getInstance()}}}},e=>{e.O(0,[938,697,21,636,593,792],()=>e(e.s=697)),_N_E=e.O()}]);