(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{851:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4232);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))})},1539:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(7876);r(4232);var a=r(7021),l=r(9038);let n=()=>(0,s.jsxs)("footer",{className:"bg-gray-900 text-gray-300 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-5",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-500/20"})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10 pt-12",children:[(0,s.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)(a.A,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-white",children:"FinTech Studio"}),(0,s.jsx)("p",{className:"text-gray-400",children:"智慧金融分析平台"})]})]}),(0,s.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6 max-w-md",children:"金融走勢智慧分析，讓投資更簡單。透過 AI 技術，提供即時市場分析、投資組合建議和風險評估，助您做出明智的投資決策。"}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsx)("a",{href:"https://github.com/HaoXun97/financial-analysis",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center transition-colors group",children:(0,s.jsx)(l.hL4,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-semibold mb-6",children:"功能"}),(0,s.jsx)("ul",{className:"space-y-3",children:["市場分析","投資組合","AI 預測","風險管理"].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-semibold mb-6",children:"支援"}),(0,s.jsx)("ul",{className:"space-y-3",children:["幫助中心","聯絡我們","隱私政策","服務條款"].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e})},e))})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-center",children:(0,s.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["\xa9 ",new Date().getFullYear()," FinTech Studio. All rights reserved."]})})]})]})},2283:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var s=r(6971);class a extends s.d{static getInstance(){return a.instance||(a.instance=new a),a.instance}logInfo(e,t){this.enableLog&&console.log("[DatabaseService] ".concat(e),t||"")}logError(e,t){this.enableLog&&console.error("[DatabaseService] ".concat(e),t||"")}getApiBaseUrl(){return window.location.origin}extractError(e){return e.error||e.message||"操作失敗"}validateConnectionConfig(e){if(!e.server)throw Error("伺服器地址不能為空");if(!e.user||!e.password)throw Error("SQL Server 驗證模式需要提供用戶名和密碼")}async testConnection(e){try{this.logInfo("開始測試數據庫連接",{server:e.server,database:e.database||"預設",user:e.user}),this.validateConnectionConfig(e);let t=this.getApiBaseUrl(),r=await fetch("".concat(t,"/api/database/test-connection"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();if(s.success)return this.logInfo("數據庫連接測試成功",s.message),s;return this.logError("數據庫連接測試失敗",s.message),s}catch(e){return this.logError("數據庫連接測試發生錯誤",e),{success:!1,message:"連接失敗：".concat(e instanceof Error?e.message:"網路錯誤")}}}async executeQuery(e,t,r){try{var s,a;if(this.logInfo("開始執行 SQL 查詢",{query:t.substring(0,100)+"..."}),!t||!t.trim())return{success:!1,error:"SQL 查詢語句不能為空"};let l=this.getApiBaseUrl(),n=await fetch("".concat(l,"/api/database/execute-query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e,query:t,params:r})}),i=await n.json();if(!i.success)return this.logError("SQL 查詢執行失敗",this.extractError(i)),{success:!1,error:this.extractError(i)};return this.logInfo("SQL 查詢執行成功",{recordCount:(null==(s=i.data)?void 0:s.length)||0}),{success:!0,data:i.data||[],count:(null==(a=i.data)?void 0:a.length)||0,message:i.message}}catch(e){return this.logError("SQL 查詢執行發生錯誤",e),{success:!1,error:"查詢失敗：".concat(e instanceof Error?e.message:"網路錯誤")}}}async getTableList(e){try{this.logInfo("開始獲取數據庫表列表");let t=await this.executeQuery(e,"SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME");if(t.success&&t.data){let e=t.data.map(e=>e.TABLE_NAME);return this.logInfo("成功獲取表列表",{tableCount:e.length}),e}{let e=this.extractError(t);if(e.includes("登入失敗"))return this.logError("登入失敗：請檢查使用者名稱、密碼，或確認帳號是否有存取該資料庫的權限。如有疑問請聯絡資料庫管理員。",e),[];return this.logError("獲取表列表失敗",e),[]}}catch(e){return this.logError("獲取表列表失敗",e),[]}}async getTableSchema(e,t){try{this.logInfo("開始獲取表結構",{tableName:t});let r=await this.executeQuery(e,"SELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE, COLUMN_DEFAULT, CHARACTER_MAXIMUM_LENGTH, NUMERIC_PRECISION, NUMERIC_SCALE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName ORDER BY ORDINAL_POSITION",{tableName:t});if(r.success&&r.data)return this.logInfo("成功獲取表結構",{columnCount:r.data.length}),r.data;throw Error(this.extractError(r))}catch(e){throw this.logError("獲取表結構失敗",e),Error(e instanceof Error?e.message:"獲取表結構失敗")}}async getDatabaseList(e){try{this.logInfo("開始獲取資料庫列表");let t={...e,database:"master"},r=await this.executeQuery(t,"SELECT name FROM sys.databases WHERE database_id > 4 ORDER BY name");if(r.success&&r.data){let e=r.data.map(e=>e.name);return this.logInfo("成功獲取資料庫列表",{databaseCount:e.length}),e}throw Error(this.extractError(r))}catch(e){throw this.logError("獲取資料庫列表失敗",e),Error(e instanceof Error?e.message:"獲取資料庫列表失敗")}}constructor(){super(),this.enableLog=!0}}},2932:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(7876),a=r(4232),l=r(7043);let n=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});var i=r(851),c=r(1539),o=r(1290),d=r(8787),h=r(5765),u=r(4316),x=r(2525),g=r(8616);let m=e=>{let{data:t,title:r="趨勢圖",height:l=500,theme:n="light",showBothLines:i=!1}=e,c=(0,a.useRef)(null),m=(0,a.useRef)(null),b=(0,a.useRef)(null),p=(0,a.useRef)(null),[f,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),[E,S]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(console.log("Chart initialization - data:",null==t?void 0:t.length),!c.current)return void console.error("Chart container is null");if(!(null==t?void 0:t.length))return void console.error("No data provided");let e="dark"===n;try{m.current&&(console.log("Removing old chart"),m.current.remove(),m.current=null),console.log("Creating chart with container width:",c.current.clientWidth);let r=(0,o.R9)(c.current,{layout:{background:{type:o.mE.Solid,color:e?"#1f2937":"#ffffff"},textColor:e?"#e5e7eb":"#374151"},width:c.current.clientWidth||800,height:f?window.innerHeight-200:l,grid:{vertLines:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},horzLines:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}},crosshair:{mode:1},rightPriceScale:{borderColor:e?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)"},timeScale:{borderColor:e?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)",timeVisible:!0,secondsVisible:!1},localization:{locale:"zh-TW"}});m.current=r,console.log("Chart created successfully");let s=[],a=[];if(t.forEach((e,t)=>{let r=e.date.includes("T")?Math.floor(new Date(e.date).getTime()/1e3):e.date.split("T")[0];console.log("Processing data point ".concat(t,":"),{date:e.date,timeValue:r,value:e.value,predictValue:e.predictValue}),null==e.value||isNaN(Number(e.value))||s.push({time:r,value:Number(e.value)}),i&&null!=e.predictValue&&!isNaN(Number(e.predictValue))&&a.push({time:r,value:Number(e.predictValue)})}),console.log("Processed data:",{lineData:s.length,predictData:a.length}),E&&s.length>0){let e=r.addSeries(o.Im,{color:"#3b82f6",lineWidth:3,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!0,crosshairMarkerRadius:6});console.log("Setting main line data:",s.length,"points"),e.setData(s),b.current=e}if(i&&a.length>0){let e=r.addSeries(o.Im,{color:"#10b981",lineWidth:2,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,lineStyle:2});console.log("Setting predict line data:",a.length,"points"),e.setData(a),p.current=e}r.subscribeCrosshairMove(e=>{if(e&&e.time&&e.point){let r=e.time.toString(),s=t.find(e=>(e.date.includes("T")?Math.floor(new Date(e.date).getTime()/1e3).toString():e.date.split("T")[0])===r);s?(N(s),w({x:e.point.x,y:e.point.y})):(N(null),w(null))}else N(null),w(null)}),r.timeScale().fitContent(),console.log("Chart initialization completed successfully")}catch(e){console.error("Chart initialization error:",e)}return()=>{m.current&&(m.current.remove(),m.current=null),b.current=null,p.current=null}},[t,n,l,f,E,i]),(0,a.useEffect)(()=>{let e=()=>{m.current&&c.current&&m.current.applyOptions({width:c.current.clientWidth,height:f?window.innerHeight-180:l})};if(f)return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[f,l]),(0,a.useEffect)(()=>{f&&window.scrollTo({top:0,behavior:"smooth"})},[f]);let _=e=>{let t=new Date(e);if(isNaN(t.getTime()))return e;let r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"00"===l&&"00"===n?"".concat(r,"/").concat(s,"/").concat(a):"".concat(r,"/").concat(s,"/").concat(a," ").concat(l,":").concat(n)};return(console.log("Render - data length:",null==t?void 0:t.length,"chart ref exists:",!!m.current),null==t?void 0:t.length)?(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden ".concat(f?"fixed inset-0 z-[9999] m-0 rounded-none shadow-lg":""),children:[(0,s.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,s.jsx)(d.A,{className:"h-5 w-5 text-gray-600"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:r}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," 個預測點 • ",(()=>{if(!(null==t?void 0:t.length))return"--";let e=_(t[0].date),r=_(t[t.length-1].date);return"".concat(e," ~ ").concat(r)})()]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2 bg-white border border-gray-200 rounded-lg px-3 py-2",children:(0,s.jsxs)("button",{onClick:()=>S(!E),className:"flex items-center space-x-1 px-2 py-1 rounded text-xs transition-colors ".concat(E?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:[E?(0,s.jsx)(h.A,{className:"h-3 w-3"}):(0,s.jsx)(u.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"預測值"})]})}),(0,s.jsx)("button",{onClick:()=>v(!f),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:f?"退出全屏":"進入全屏",children:f?(0,s.jsx)(x.A,{className:"h-4 w-4"}):(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]})}),(0,s.jsxs)("div",{className:"p-4 relative",children:[y&&j&&(0,s.jsxs)("div",{className:"absolute z-10 bg-white/95 border border-gray-200 rounded-lg shadow-lg px-4 py-3 text-sm text-gray-800 pointer-events-none",style:{left:"calc(".concat(j.x,"px + 20px)"),top:"calc(".concat(j.y,"px - 10px)"),minWidth:"180px"},children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 mb-2",children:_(y.date)}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:i?"真實值:":"預測值:"}),(0,s.jsx)("span",{className:"font-medium text-blue-600",children:y.value.toFixed(4)})]}),i&&void 0!==y.predictValue&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"預測值:"}),(0,s.jsx)("span",{className:"font-medium text-green-600",children:y.predictValue.toFixed(4)})]})]})]}),(0,s.jsx)("div",{ref:c,style:{height:f?"calc(100vh - 150px)":"".concat(l,"px"),width:"100%",minHeight:"400px"},className:"bg-white rounded border border-gray-100"})]}),(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-2 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["預測點數: ",t.length]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[E&&(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-3 h-0.5 bg-blue-600 mr-1"}),i?"真實值":"預測值"]}),i&&(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-3 h-0.5 bg-green-600 mr-1"}),"預測值"]})]}),(0,s.jsx)("div",{className:"text-center text-[12px] select-none",children:"Powered by TradingView Lightweight Charts"})]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center bg-white rounded-lg border border-gray-200 shadow-sm",style:{height:"".concat(l,"px")},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-1",children:"暫無圖表數據"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"請提供有效的預測數據"})]})})};var b=r(2283),p=r(9742);let f=()=>{var e,t,r,o,d;let[h,u]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[f,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(""),[j,w]=(0,a.useState)("US"),[E,S]=(0,a.useState)("AAPL"),[_,C]=(0,a.useState)(192),[T,L]=(0,a.useState)(12),A=[{value:"US",label:"美國",flag:"\uD83C\uDDFA\uD83C\uDDF8",db:"market_stock_us"},{value:"TW",label:"台灣",flag:"\uD83C\uDDF9\uD83C\uDDFC",db:"market_stock_tw"},{value:"CRYPTO",label:"加密貨幣",flag:"₿",db:"market_crypto"}],[k,R]=(0,a.useState)({server:p.env.NEXT_PUBLIC_DB_SERVER||"",user:p.env.NEXT_PUBLIC_DB_USER||"",password:p.env.NEXT_PUBLIC_DB_PASSWORD||"",database:p.env.NEXT_PUBLIC_DB_DATABASE||"",port:parseInt(p.env.NEXT_PUBLIC_DB_PORT||""),options:{encrypt:"true"===p.env.NEXT_PUBLIC_DB_ENCRYPT||!0,trustServerCertificate:"true"===p.env.NEXT_PUBLIC_DB_TRUST_CERT||!0}}),[O,M]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1),[B,P]=(0,a.useState)([]),U=b.B.getInstance(),V=async()=>{D(!0),N("");try{let e=await U.testConnection(k);e.success?(M(!0),N(""),console.log("資料庫連接成功:",e.message)):(M(!1),N(e.message))}catch(e){M(!1),N(e instanceof Error?e.message:"連接失敗")}finally{D(!1)}},W=async()=>{if(!O)return void N("請先連接資料庫");if(!E.trim())return void N("請輸入股票代碼");D(!0),N("");try{let e=await U.executeQuery(k,"\n        SELECT TOP 10000 \n          close_price\n        FROM ".concat("stock_data_1h","\n        WHERE symbol = @symbol\n        ORDER BY datetime DESC\n      "),{symbol:E.toUpperCase()});if(e.success&&e.data){let t=e.data,r=t.map(e=>e.close_price);console.log(r),P(r),console.log("查詢到 ".concat(t.length," 筆 ").concat(E," 股票資料"))}else N(e.error||"找不到 ".concat(E," 的資料"))}catch(e){N(e instanceof Error?e.message:"查詢失敗")}finally{D(!1)}},H=async e=>{v(!0),N(""),u(null),g(null);try{let t=await fetch("/api/py/stock_prediction/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok||r.detail)throw Error(r.detail||"HTTP error! status: ".concat(t.status));u(r)}catch(e){N(e instanceof Error?e.message:"預測失敗")}finally{v(!1)}},F=async e=>{v(!0),N(""),g(null),u(null);try{let t=await fetch("/api/py/stock_prediction/long_term_eval",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok||r.detail)throw Error(r.detail||"HTTP error! status: ".concat(t.status));g(r)}catch(e){N(e instanceof Error?e.message:"評估失敗")}finally{v(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 shadow-xl relative overflow-hidden",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 relative z-10",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"股票預測分析"}),(0,s.jsx)("p",{className:"text-blue-100 mt-4 text-lg",children:"基於機器學習的股票價格預測模型"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,s.jsx)(l.A,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"股票選擇"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"選擇市場"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:A.map(e=>(0,s.jsxs)("button",{onClick:()=>{w(e.value),R({...k,database:e.db})},className:"flex items-center justify-center p-4 rounded-lg border-2 transition-all ".concat(j===e.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"),children:[(0,s.jsx)("span",{className:"text-2xl mr-3",children:e.flag}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["股票代碼","TW"===j&&(0,s.jsx)("span",{className:"text-gray-500 ml-1",children:"(例: 2330)"}),"US"===j&&(0,s.jsx)("span",{className:"text-gray-500 ml-1",children:"(例: AAPL)"}),"CRYPTO"===j&&(0,s.jsx)("span",{className:"text-gray-500 ml-1",children:"(例: BTC)"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("input",{type:"text",value:E,onChange:e=>S(e.target.value.toUpperCase()),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"輸入".concat(null==(e=A.find(e=>e.value===j))?void 0:e.label,"股票代碼"),onKeyPress:e=>"Enter"===e.key&&W()}),(0,s.jsxs)("button",{onClick:W,disabled:!O||I||!E.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[(0,s.jsx)(l.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:I?"查詢中...":"查詢"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["熱門",null==(t=A.find(e=>e.value===j))?void 0:t.label,"股票"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:null==(r=({US:["AAPL","GOOGL","MSFT","AMZN","TSLA","META","NVDA","AMD"],TW:["2330","2317","2454","2881","6505","3008","2382","2303"],CRYPTO:["BTC-USD","SOL-USD","ETH-USD"]})[j])?void 0:r.map(e=>(0,s.jsx)("button",{onClick:()=>{S(e)},className:"px-3 py-2 text-sm rounded-md transition-colors ".concat(E===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,s.jsx)(n,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"預測參數"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Context Length"}),(0,s.jsx)("input",{type:"number",value:_,onChange:e=>C(parseInt(e.target.value)||192),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"192"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prediction Length"}),(0,s.jsx)("input",{type:"number",value:T,onChange:e=>L(parseInt(e.target.value)||12),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"12"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"資料庫連接"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(O?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:O?"已連接":"未連接"})]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:V,disabled:I,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:I?"連接中...":"測試連接"}),(0,s.jsx)("button",{onClick:W,disabled:!O||I,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:I?"查詢中...":"查詢股票資料"})]}),E&&(0,s.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["已選擇: ",(0,s.jsxs)("span",{className:"font-medium",children:[null==(o=A.find(e=>e.value===j))?void 0:o.flag," ",E]}),B.length>0&&(0,s.jsxs)("span",{className:"ml-3",children:["• 已載入 ",B.length," 筆資料，最新價格: ",null==(d=B[0])?void 0:d.toFixed(2)]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(i.A,{className:"w-12 h-12 text-gray-400"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"股票預測模型"}),(0,s.jsx)("p",{className:"text-gray-600 leading-relaxed mb-6",children:B.length>0?"使用 ".concat(E," 的真實資料進行預測，查看未來的價格預測。"):"請先選擇股票並查詢資料，然後進行預測分析。"}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{let e={data_numpy:B,context_length:_,prediction_length:T};console.log("發送到後端的數據:",{data_length:e.data_numpy.length,context_length:e.context_length,prediction_length:e.prediction_length}),H(e)},disabled:f||B.length<_,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-8 py-3 rounded-lg transition-colors text-lg font-medium",children:f?"預測中...":"預測 ".concat(E||"股票"," 價格")}),(0,s.jsx)("button",{onClick:()=>{let e={data_numpy:B,context_length:_,prediction_length:T};console.log("發送到後端的數據:",{data_numpy:e.data_numpy,context_length:e.context_length,prediction_length:e.prediction_length}),F(e)},disabled:f||B.length<_+T,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-8 py-3 rounded-lg transition-colors text-lg font-medium",children:f?"評估中...":"評估模型準確度"})]}),y&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-red-700 font-medium",children:"錯誤："}),(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y}),y.includes("shapes")&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-2",children:"這是後端模型維度問題，請檢查 Python 代碼中的矩陣計算邏輯"})]})]}),(h||x)&&(0,s.jsxs)("div",{className:"mt-8",children:[h&&!x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"AI 預測結果"}),(0,s.jsx)(m,{data:(e=>{let t=new Date,r=[];console.log("PredictionData received:",e);let s=e.mean;if(!Array.isArray(s)||0===s.length)return console.error("Mean array is empty or invalid:",s),[];for(let e=0;e<s.length;e++){let a=new Date(t);a.setDate(a.getDate()+(e+1));let l=s[e];r.push({date:a.toISOString(),value:Number(l)||0})}return console.log("Converted prediction chart data:",r),r})(h),title:"股票價格預測趨勢",height:600})]}),x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"模型評估結果"}),(0,s.jsx)(m,{data:(e=>{var t,r;let s=new Date,a=[];if(console.log("EvaluationData received:",e),!(null==(t=e.true_value)?void 0:t.length)||!(null==(r=e.predict)?void 0:r.length))return console.error("Evaluation data is missing or empty:",e),[];let l=Math.max(e.true_value.length,e.predict.length);for(let t=0;t<l;t++){let r=new Date(s);r.setHours(r.getHours()+(t+1));let l=t<e.true_value.length?e.true_value[t]:0,n=t<e.predict.length?e.predict[t]:0;a.push({date:r.toISOString(),value:Number(l)||0,predictValue:Number(n)||0})}return console.log("Converted evaluation chart data:",a),a})(x),title:"預測準確度評估 - 真實值 vs 預測值",height:600,showBothLines:!0})]})]})]})]}),(0,s.jsx)(c.A,{})]})}},4316:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4232);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))})},5765:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4232);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},6929:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/predict",function(){return r(2932)}])}},e=>{e.O(0,[938,329,739,636,593,792],()=>e(e.s=6929)),_N_E=e.O()}]);