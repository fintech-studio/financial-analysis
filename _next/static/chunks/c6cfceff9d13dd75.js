(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41406,e=>{"use strict";let t,i;var s=e.i(91398),a=e.i(91788);let r=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"}))});var n=e.i(33429);let l=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),o=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var h=e.i(86129);let d=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var c=e.i(85074);let u=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}),g=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))});var m=e.i(7432);let p=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}),x=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}),f=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25"}))});var b=e.i(58557),y=e.i(85039);let v=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))});function w(e){return e+.5|0}let _=(e,t,i)=>Math.max(Math.min(e,i),t);function N(e){return _(w(2.55*e),0,255)}function j(e){return _(w(255*e),0,255)}function k(e){return _(w(e/2.55)/100,0,1)}function M(e){return _(w(100*e),0,100)}let T={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},C=[..."0123456789ABCDEF"],P=e=>C[15&e],S=e=>C[(240&e)>>4]+C[15&e],D=e=>(240&e)>>4==(15&e),A=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function L(e,t,i){let s=t*Math.min(i,1-i),a=(t,a=(t+e/30)%12)=>i-s*Math.max(Math.min(a-3,9-a,1),-1);return[a(0),a(8),a(4)]}function E(e,t,i){let s=(s,a=(s+e/60)%6)=>i-i*t*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function R(e,t,i){let s,a=L(e,1,.5);for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)a[s]*=1-t-i,a[s]+=t;return a}function O(e){let t,i,s,a=e.r/255,r=e.g/255,n=e.b/255,l=Math.max(a,r,n),o=Math.min(a,r,n),h=(l+o)/2;l!==o&&(s=l-o,i=h>.5?s/(2-l-o):s/(l+o),t=60*(t=a===l?(r-n)/s+6*(r<n):r===l?(n-a)/s+2:(a-r)/s+4)+.5);return[0|t,i||0,h]}function $(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(j)}function F(e){return(e%360+360)%360}let V={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},z={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},I=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,B=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,W=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function H(e,t,i){if(e){let s=O(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,0===t?360:1)),e.r=(s=$(L,s,void 0,void 0))[0],e.g=s[1],e.b=s[2]}}function q(e,t){return e?Object.assign(t||{},e):e}function U(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=j(e[3]))):(t=q(e,{r:0,g:0,b:0,a:1})).a=j(t.a),t}class Y{constructor(e){let i;if(e instanceof Y)return e;const s=typeof e;"object"===s?i=U(e):"string"===s&&(i=function(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*T[e[1]],g:255&17*T[e[2]],b:255&17*T[e[3]],a:5===i?17*T[e[4]]:255}:(7===i||9===i)&&(t={r:T[e[1]]<<4|T[e[2]],g:T[e[3]]<<4|T[e[4]],b:T[e[5]]<<4|T[e[6]],a:9===i?T[e[7]]<<4|T[e[8]]:255})),t}(e)||function(e){t||((t=function(){let e,t,i,s,a,r={},n=Object.keys(z),l=Object.keys(V);for(e=0;e<n.length;e++){for(t=0,s=a=n[e];t<l.length;t++)i=l[t],a=a.replace(i,V[i]);i=parseInt(z[s],16),r[a]=[i>>16&255,i>>8&255,255&i]}return r}()).transparent=[0,0,0,0]);let i=t[e.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:4===i.length?i[3]:255}}(e)||function(e){return"r"===e.charAt(0)?function(e){let t,i,s,a=I.exec(e),r=255;if(a){if(a[7]!==t){let e=+a[7];r=a[8]?N(e):_(255*e,0,255)}return t=+a[1],i=+a[3],s=+a[5],t=255&(a[2]?N(t):_(t,0,255)),{r:t,g:i=255&(a[4]?N(i):_(i,0,255)),b:s=255&(a[6]?N(s):_(s,0,255)),a:r}}}(e):function(e){let t,i=A.exec(e),s=255;if(!i)return;i[5]!==t&&(s=i[6]?N(+i[5]):j(+i[5]));let a=F(+i[2]),r=i[3]/100,n=i[4]/100;return{r:(t="hwb"===i[1]?$(R,a,r,n):"hsv"===i[1]?$(E,a,r,n):$(L,a,r,n))[0],g:t[1],b:t[2],a:s}}(e)}(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=q(this._rgb);return e&&(e.a=k(e.a)),e}set rgb(e){this._rgb=U(e)}rgbString(){var e;return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${k(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0}hexString(){var e,t;let i,s;return this._valid?(t=D((i=e=this._rgb).r)&&D(i.g)&&D(i.b)&&D(i.a)?P:S,e?"#"+t(e.r)+t(e.g)+t(e.b)+(s=e.a,s<255?t(s):""):void 0):void 0}hslString(){return this._valid?function(e){if(!e)return;let t=O(e),i=t[0],s=M(t[1]),a=M(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${a}%, ${k(e.a)})`:`hsl(${i}, ${s}%, ${a}%)`}(this._rgb):void 0}mix(e,t){if(e){let i,s=this.rgb,a=e.rgb,r=t===i?.5:t,n=2*r-1,l=s.a-a.a,o=((n*l==-1?n:(n+l)/(1+n*l))+1)/2;i=1-o,s.r=255&o*s.r+i*a.r+.5,s.g=255&o*s.g+i*a.g+.5,s.b=255&o*s.b+i*a.b+.5,s.a=r*s.a+(1-r)*a.a,this.rgb=s}return this}interpolate(e,t){var i,s;let a,r,n;return e&&(this._rgb=(i=this._rgb,s=e._rgb,a=W(k(i.r)),r=W(k(i.g)),n=W(k(i.b)),{r:j(B(a+t*(W(k(s.r))-a))),g:j(B(r+t*(W(k(s.g))-r))),b:j(B(n+t*(W(k(s.b))-n))),a:i.a+t*(s.a-i.a)})),this}clone(){return new Y(this.rgb)}alpha(e){return this._rgb.a=j(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=w(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return H(this._rgb,2,e),this}darken(e){return H(this._rgb,2,-e),this}saturate(e){return H(this._rgb,1,e),this}desaturate(e){return H(this._rgb,1,-e),this}rotate(e){var t,i;return t=this._rgb,(i=O(t))[0]=F(i[0]+e),t.r=(i=$(L,i,void 0,void 0))[0],t.g=i[1],t.b=i[2],this}}function Z(){}let X=(i=0,()=>i++);function G(e){return null==e}function K(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Q(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function J(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function ee(e,t){return J(e)?e:t}function et(e,t){return void 0===e?t:e}let ei=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function es(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function ea(e,t,i,s){let a,r,n;if(K(e))if(r=e.length,s)for(a=r-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;a<r;a++)t.call(i,e[a],a);else if(Q(e))for(a=0,r=(n=Object.keys(e)).length;a<r;a++)t.call(i,e[n[a]],n[a])}function er(e,t){let i,s,a,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(a=e[i],r=t[i],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function en(e){if(K(e))return e.map(en);if(Q(e)){let t=Object.create(null),i=Object.keys(e),s=i.length,a=0;for(;a<s;++a)t[i[a]]=en(e[i[a]]);return t}return e}function el(e){return -1===["__proto__","prototype","constructor"].indexOf(e)}function eo(e,t,i,s){if(!el(e))return;let a=t[e],r=i[e];Q(a)&&Q(r)?eh(a,r,s):t[e]=en(r)}function eh(e,t,i){let s,a=K(t)?t:[t],r=a.length;if(!Q(e))return e;let n=(i=i||{}).merger||eo;for(let t=0;t<r;++t){if(!Q(s=a[t]))continue;let r=Object.keys(s);for(let t=0,a=r.length;t<a;++t)n(r[t],e,s,i)}return e}function ed(e,t){return eh(e,t,{merger:ec})}function ec(e,t,i){if(!el(e))return;let s=t[e],a=i[e];Q(s)&&Q(a)?ed(s,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=en(a))}let eu={"":e=>e,x:e=>e.x,y:e=>e.y};function eg(e,t){let i;return(eu[t]||(eu[t]=(i=function(e){let t=e.split("."),i=[],s="";for(let e of t)(s+=e).endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(t),e=>{for(let t of i){if(""===t)break;e=e&&e[t]}return e})))(e)}function em(e){return e.charAt(0).toUpperCase()+e.slice(1)}let ep=e=>void 0!==e,ex=e=>"function"==typeof e,ef=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0},eb=Math.PI,ey=2*eb,ev=ey+eb,ew=1/0,e_=eb/180,eN=eb/2,ej=eb/4,ek=2*eb/3,eM=Math.log10,eT=Math.sign;function eC(e,t,i){return Math.abs(e-t)<i}function eP(e){let t=Math.round(e),i=Math.pow(10,Math.floor(eM(e=eC(e,t,e/1e3)?t:e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function eS(e){return"symbol"!=typeof e&&("object"!=typeof e||null===e||!!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e))&&!isNaN(parseFloat(e))&&isFinite(e)}function eD(e,t,i){let s,a,r;for(s=0,a=e.length;s<a;s++)isNaN(r=e[s][i])||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function eA(e){return eb/180*e}function eL(e){if(!J(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function eE(e,t){let i=t.x-e.x,s=t.y-e.y,a=Math.sqrt(i*i+s*s),r=Math.atan2(s,i);return r<-.5*eb&&(r+=ey),{angle:r,distance:a}}function eR(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function eO(e,t){return(e-t+ev)%ey-eb}function e$(e){return(e%ey+ey)%ey}function eF(e,t,i,s){let a=e$(e),r=e$(t),n=e$(i),l=e$(r-a),o=e$(n-a),h=e$(a-r),d=e$(a-n);return a===r||a===n||s&&r===n||l>o&&h<d}function eV(e,t,i){return Math.max(t,Math.min(i,e))}function ez(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function eI(e,t,i){let s;i=i||(i=>e[i]<t);let a=e.length-1,r=0;for(;a-r>1;)i(s=r+a>>1)?r=s:a=s;return{lo:r,hi:a}}let eB=(e,t,i,s)=>eI(e,i,s?s=>{let a=e[s][t];return a<i||a===i&&e[s+1][t]===i}:s=>e[s][t]<i),eW=(e,t,i)=>eI(e,i,s=>e[s][t]>=i),eH=["push","pop","shift","splice","unshift"];function eq(e,t){let i=e._chartjs;if(!i)return;let s=i.listeners,a=s.indexOf(t);-1!==a&&s.splice(a,1),s.length>0||(eH.forEach(t=>{delete e[t]}),delete e._chartjs)}function eU(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}let eY="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function eZ(e,t){let i=[],s=!1;return function(...a){i=a,s||(s=!0,eY.call(window,()=>{s=!1,e.apply(t,i)}))}}let eX=e=>"start"===e?"left":"end"===e?"right":"center",eG=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2;function eK(e,t,i){let s=t.length,a=0,r=s;if(e._sorted){let{iScale:n,vScale:l,_parsed:o}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=n.axis,{min:c,max:u,minDefined:g,maxDefined:m}=n.getUserBounds();if(g){if(a=Math.min(eB(o,d,c).lo,i?s:eB(t,d,n.getPixelForValue(c)).lo),h){let e=o.slice(0,a+1).reverse().findIndex(e=>!G(e[l.axis]));a-=Math.max(0,e)}a=eV(a,0,s-1)}if(m){let e=Math.max(eB(o,n.axis,u,!0).hi+1,i?0:eB(t,d,n.getPixelForValue(u),!0).hi+1);if(h){let t=o.slice(e-1).findIndex(e=>!G(e[l.axis]));e+=Math.max(0,t)}r=eV(e,a,s)-a}else r=s-a}return{start:a,count:r}}function eQ(e){let{xScale:t,yScale:i,_scaleRanges:s}=e,a={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!s)return e._scaleRanges=a,!0;let r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,a),r}let eJ=e=>0===e||1===e,e0=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ey/i)),e1=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ey/i)+1,e2={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*eN)+1,easeOutSine:e=>Math.sin(e*eN),easeInOutSine:e=>-.5*(Math.cos(eb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>eJ(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(-Math.pow(2,-10*(2*e-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>eJ(e)?e:e0(e,.075,.3),easeOutElastic:e=>eJ(e)?e:e1(e,.075,.3),easeInOutElastic:e=>eJ(e)?e:e<.5?.5*e0(2*e,.1125,.45):.5+.5*e1(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-e2.easeOutBounce(1-e),easeOutBounce:e=>e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,easeInOutBounce:e=>e<.5?.5*e2.easeInBounce(2*e):.5*e2.easeOutBounce(2*e-1)+.5};function e5(e){if(e&&"object"==typeof e){let t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function e3(e){return e5(e)?e:new Y(e)}function e6(e){return e5(e)?e:new Y(e).saturate(.5).darken(.1).hexString()}let e4=["x","y","borderWidth","radius","tension"],e8=["color","borderColor","backgroundColor"],e7=new Map;function e9(e,t,i){var s;let a,r;return(a=t+JSON.stringify(s=(s=i)||{}),!(r=e7.get(a))&&(r=new Intl.NumberFormat(t,s),e7.set(a,r)),r).format(e)}let te={values:e=>K(e)?e:""+e,numeric(e,t,i){let s;if(0===e)return"0";let a=this.chart.options.locale,r=e;if(i.length>1){var n,l;let t,a=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(a<1e-4||a>1e15)&&(s="scientific"),n=e,Math.abs(t=(l=i).length>3?l[2].value-l[1].value:l[1].value-l[0].value)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),r=t}let o=eM(Math.abs(r)),h=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:s,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),e9(e,a,d)},logarithmic(e,t,i){return 0===e?"0":[1,2,3,5,10,15].includes(i[t].significand||e/Math.pow(10,Math.floor(eM(e))))||t>.8*i.length?te.numeric.call(this,e,t,i):""}},tt=Object.create(null),ti=Object.create(null);function ts(e,t){if(!t)return e;let i=t.split(".");for(let t=0,s=i.length;t<s;++t){let s=i[t];e=e[s]||(e[s]=Object.create(null))}return e}function ta(e,t,i){return"string"==typeof t?eh(ts(e,t),i):eh(ts(e,""),t)}var tr=new class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>e6(t.backgroundColor),this.hoverBorderColor=(e,t)=>e6(t.borderColor),this.hoverColor=(e,t)=>e6(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ta(this,e,t)}get(e){return ts(this,e)}describe(e,t){return ta(ti,e,t)}override(e,t){return ta(tt,e,t)}route(e,t,i,s){let a=ts(this,e),r=ts(this,i),n="_"+t;Object.defineProperties(a,{[n]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){let e=this[n],t=r[s];return Q(e)?Object.assign({},t,e):et(e,t)},set(e){this[n]=e}}})}apply(e){e.forEach(e=>e(this))}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:e8},numbers:{type:"number",properties:e4}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:te.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function tn(e,t,i,s,a){let r=t[a];return r||(r=t[a]=e.measureText(a).width,i.push(a)),r>s&&(s=r),s}function tl(e,t,i){let s=e.currentDevicePixelRatio,a=0!==i?Math.max(i/2,.5):0;return Math.round((t-a)*s)/s+a}function to(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function th(e,t,i,s){td(e,t,i,s,null)}function td(e,t,i,s,a){let r,n,l,o,h,d,c,u,g=t.pointStyle,m=t.rotation,p=t.radius,x=(m||0)*e_;if(g&&"object"==typeof g&&("[object HTMLImageElement]"===(r=g.toString())||"[object HTMLCanvasElement]"===r)){e.save(),e.translate(i,s),e.rotate(x),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!isNaN(p)&&!(p<=0)){switch(e.beginPath(),g){default:a?e.ellipse(i,s,a/2,p,0,0,ey):e.arc(i,s,p,0,ey),e.closePath();break;case"triangle":d=a?a/2:p,e.moveTo(i+Math.sin(x)*d,s-Math.cos(x)*p),x+=ek,e.lineTo(i+Math.sin(x)*d,s-Math.cos(x)*p),x+=ek,e.lineTo(i+Math.sin(x)*d,s-Math.cos(x)*p),e.closePath();break;case"rectRounded":h=.516*p,n=Math.cos(x+ej)*(o=p-h),c=Math.cos(x+ej)*(a?a/2-h:o),l=Math.sin(x+ej)*o,u=Math.sin(x+ej)*(a?a/2-h:o),e.arc(i-c,s-l,h,x-eb,x-eN),e.arc(i+u,s-n,h,x-eN,x),e.arc(i+c,s+l,h,x,x+eN),e.arc(i-u,s+n,h,x+eN,x+eb),e.closePath();break;case"rect":if(!m){o=Math.SQRT1_2*p,d=a?a/2:o,e.rect(i-d,s-o,2*d,2*o);break}x+=ej;case"rectRot":c=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,l=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-c,s-l),e.lineTo(i+u,s-n),e.lineTo(i+c,s+l),e.lineTo(i-u,s+n),e.closePath();break;case"crossRot":x+=ej;case"cross":c=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,l=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-c,s-l),e.lineTo(i+c,s+l),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n);break;case"star":c=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,l=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-c,s-l),e.lineTo(i+c,s+l),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n),x+=ej,c=Math.cos(x)*(a?a/2:p),n=Math.cos(x)*p,l=Math.sin(x)*p,u=Math.sin(x)*(a?a/2:p),e.moveTo(i-c,s-l),e.lineTo(i+c,s+l),e.moveTo(i+u,s-n),e.lineTo(i-u,s+n);break;case"line":n=a?a/2:Math.cos(x)*p,l=Math.sin(x)*p,e.moveTo(i-n,s-l),e.lineTo(i+n,s+l);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(x)*(a?a/2:p),s+Math.sin(x)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function tc(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function tu(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function tg(e){e.restore()}function tm(e,t,i,s,a){if(!t)return e.lineTo(i.x,i.y);if("middle"===a){let s=(t.x+i.x)/2;e.lineTo(s,t.y),e.lineTo(s,i.y)}else"after"===a!=!!s?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function tp(e,t,i,s){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function tx(e,t,i,s,a,r={}){let n,l,o=K(t)?t:[t],h=r.strokeWidth>0&&""!==r.strokeColor;for(e.save(),e.font=a.string,r.translation&&e.translate(r.translation[0],r.translation[1]),G(r.rotation)||e.rotate(r.rotation),r.color&&(e.fillStyle=r.color),r.textAlign&&(e.textAlign=r.textAlign),r.textBaseline&&(e.textBaseline=r.textBaseline),n=0;n<o.length;++n)l=o[n],r.backdrop&&function(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}(e,r.backdrop),h&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),G(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(l,i,s,r.maxWidth)),e.fillText(l,i,s,r.maxWidth),function(e,t,i,s,a){if(a.strikethrough||a.underline){let r=e.measureText(s),n=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,o=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,d=a.strikethrough?(o+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(n,d),e.lineTo(l,d),e.stroke()}}(e,i,s,l,r),s+=Number(a.lineHeight);e.restore()}function tf(e,t){let{x:i,y:s,w:a,h:r,radius:n}=t;e.arc(i+n.topLeft,s+n.topLeft,n.topLeft,1.5*eb,eb,!0),e.lineTo(i,s+r-n.bottomLeft),e.arc(i+n.bottomLeft,s+r-n.bottomLeft,n.bottomLeft,eb,eN,!0),e.lineTo(i+a-n.bottomRight,s+r),e.arc(i+a-n.bottomRight,s+r-n.bottomRight,n.bottomRight,eN,0,!0),e.lineTo(i+a,s+n.topRight),e.arc(i+a-n.topRight,s+n.topRight,n.topRight,0,-eN,!0),e.lineTo(i+n.topLeft,s)}let tb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ty=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,tv=e=>+e||0;function tw(e,t){let i={},s=Q(t),a=s?Object.keys(t):t,r=Q(e)?s?i=>et(e[i],e[t[i]]):t=>e[t]:()=>e;for(let e of a)i[e]=tv(r(e));return i}function t_(e){return tw(e,{top:"y",right:"x",bottom:"y",left:"x"})}function tN(e){return tw(e,["topLeft","topRight","bottomLeft","bottomRight"])}function tj(e){let t=t_(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function tk(e,t){e=e||{},t=t||tr.font;let i=et(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let s=et(e.style,t.style);s&&!(""+s).match(ty)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let a={family:et(e.family,t.family),lineHeight:function(e,t){let i=(""+e).match(tb);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}(et(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:et(e.weight,t.weight),string:""};return a.string=!a||G(a.size)||G(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family,a}function tM(e,t,i,s){let a,r,n,l=!0;for(a=0,r=e.length;a<r;++a)if(void 0!==(n=e[a])&&(void 0!==t&&"function"==typeof n&&(n=n(t),l=!1),void 0!==i&&K(n)&&(n=n[i%n.length],l=!1),void 0!==n))return s&&!l&&(s.cacheable=!1),n}function tT(e,t){return Object.assign(Object.create(e),t)}function tC(e,t=[""],i,s,a=()=>e[0]){let r=i||e;return void 0===s&&(s=t$("_fallback",e)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:a,override:i=>tC([i,...e],t,r,s)},{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,s)=>tL(i,s,()=>(function(e,t,i,s){let a;for(let r of t)if(void 0!==(a=t$(tD(r,e),i)))return tA(e,a)?tR(i,s,e,a):a})(s,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>tF(e).includes(t),ownKeys:e=>tF(e),set(e,t,i){let s=e._storage||(e._storage=a());return e[t]=s[t]=i,delete e._keys,!0}})}function tP(e,t,i,s){return new Proxy({_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:tS(e,s),setContext:t=>tP(e,t,i,s),override:a=>tP(e.override(a),t,i,s)},{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>tL(e,t,()=>(function(e,t,i){let{_proxy:s,_context:a,_subProxy:r,_descriptors:n}=e,l=s[t];return ex(l)&&n.isScriptable(t)&&(l=function(e,t,i,s){let{_proxy:a,_context:r,_subProxy:n,_stack:l}=i;if(l.has(e))throw Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let o=t(r,n||s);return l.delete(e),tA(e,o)&&(o=tR(a._scopes,a,e,o)),o}(t,l,e,i)),K(l)&&l.length&&(l=function(e,t,i,s){let{_proxy:a,_context:r,_subProxy:n,_descriptors:l}=i;if(void 0!==r.index&&s(e))return t[r.index%t.length];if(Q(t[0])){let i=t,s=a._scopes.filter(e=>e!==i);for(let o of(t=[],i)){let i=tR(s,a,e,o);t.push(tP(i,r,n&&n[e],l))}}return t}(t,l,e,n.isIndexable)),tA(t,l)&&(l=tP(l,a,r&&r[t],n)),l})(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,s)=>(e[i]=s,delete t[i],!0)})}function tS(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:i,indexable:s,isScriptable:ex(i)?i:()=>i,isIndexable:ex(s)?s:()=>s}}let tD=(e,t)=>e?e+em(t):t,tA=(e,t)=>Q(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function tL(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];let s=i();return e[t]=s,s}let tE=(e,t)=>!0===e?t:"string"==typeof e?eg(t,e):void 0;function tR(e,t,i,s){var a;let r=t._rootScopes,n=(a=t._fallback,ex(a)?a(i,s):a),l=[...e,...r],o=new Set;o.add(s);let h=tO(o,l,i,n||i,s);return null!==h&&(void 0===n||n===i||null!==(h=tO(o,l,n,h,s)))&&tC(Array.from(o),[""],r,n,()=>{var e,a,r;let n,l;return e=t,a=i,r=s,a in(n=e._getTarget())||(n[a]={}),K(l=n[a])&&Q(r)?r:l||{}})}function tO(e,t,i,s,a){for(;i;)i=function(e,t,i,s,a){for(let n of t){let t=tE(i,n);if(t){var r;e.add(t);let n=(r=t._fallback,ex(r)?r(i,a):r);if(void 0!==n&&n!==i&&n!==s)return n}else if(!1===t&&void 0!==s&&i!==s)return null}return!1}(e,t,i,s,a);return i}function t$(e,t){for(let i of t){if(!i)continue;let t=i[e];if(void 0!==t)return t}}function tF(e){let t=e._keys;return t||(t=e._keys=function(e){let t=new Set;for(let i of e)for(let e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function tV(e,t,i,s){let a,r,n,{iScale:l}=e,{key:o="r"}=this._parsing,h=Array(s);for(a=0;a<s;++a)n=t[r=a+i],h[a]={r:l.parse(eg(n,o),r)};return h}let tz=Number.EPSILON||1e-14,tI=(e,t)=>t<e.length&&!e[t].skip&&e[t],tB=e=>"x"===e?"y":"x";function tW(e,t,i){return Math.max(Math.min(e,i),t)}function tH(){return"undefined"!=typeof window&&"undefined"!=typeof document}function tq(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function tU(e,t,i){let s;return"string"==typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[i])):s=e,s}let tY=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),tZ=["top","right","bottom","left"];function tX(e,t,i){let s={};i=i?"-"+i:"";for(let a=0;a<4;a++){let r=tZ[a];s[r]=parseFloat(e[t+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function tG(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:s}=t,a=tY(i),r="border-box"===a.boxSizing,n=tX(a,"padding"),l=tX(a,"border","width"),{x:o,y:h,box:d}=function(e,t){let i,s,a,r=e.touches,n=r&&r.length?r[0]:e,{offsetX:l,offsetY:o}=n,h=!1;if(a=e.target,(l>0||o>0)&&(!a||!a.shadowRoot))i=l,s=o;else{let e=t.getBoundingClientRect();i=n.clientX-e.left,s=n.clientY-e.top,h=!0}return{x:i,y:s,box:h}}(e,i),c=n.left+(d&&l.left),u=n.top+(d&&l.top),{width:g,height:m}=t;return r&&(g-=n.width+l.width,m-=n.height+l.height),{x:Math.round((o-c)/g*i.width/s),y:Math.round((h-u)/m*i.height/s)}}let tK=e=>Math.round(10*e)/10;function tQ(e,t,i){let s=t||1,a=tK(e.height*s),r=tK(e.width*s);e.height=tK(e.height),e.width=tK(e.width);let n=e.canvas;return n.style&&(i||!n.style.height&&!n.style.width)&&(n.style.height=`${e.height}px`,n.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==s||n.height!==a||n.width!==r)&&(e.currentDevicePixelRatio=s,n.height=a,n.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0)}let tJ=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};tH()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function t0(e,t){let i=tY(e).getPropertyValue(t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function t1(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function t2(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:"middle"===s?i<.5?e.y:t.y:"after"===s?i<1?e.y:t.y:i>0?t.y:e.y}}function t5(e,t,i,s){let a={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},n=t1(e,a,i),l=t1(a,r,i),o=t1(r,t,i),h=t1(n,l,i),d=t1(l,o,i);return t1(h,d,i)}function t3(e,t,i){var s;return e?(s=i,{x:e=>t+t+s-e,setWidth(e){s=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function t6(e,t){let i,s;("ltr"===t||"rtl"===t)&&(s=[(i=e.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function t4(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function t8(e){return"angle"===e?{between:eF,compare:eO,normalize:e$}:{between:ez,compare:(e,t)=>e-t,normalize:e=>e}}function t7({start:e,end:t,count:i,loop:s,style:a}){return{start:e%i,end:t%i,loop:s&&(t-e+1)%i==0,style:a}}function t9(e,t,i){let s,a,r;if(!i)return[e];let{property:n,start:l,end:o}=i,h=t.length,{compare:d,between:c,normalize:u}=t8(n),{start:g,end:m,loop:p,style:x}=function(e,t,i){let s,{property:a,start:r,end:n}=i,{between:l,normalize:o}=t8(a),h=t.length,{start:d,end:c,loop:u}=e;if(u){for(d+=h,c+=h,s=0;s<h&&l(o(t[d%h][a]),r,n);++s)d--,c--;d%=h,c%=h}return c<d&&(c+=h),{start:d,end:c,loop:u,style:e.style}}(e,t,i),f=[],b=!1,y=null,v=()=>b||c(l,r,s)&&0!==d(l,r),w=()=>!b||0===d(o,s)||c(o,r,s);for(let e=g,i=g;e<=m;++e)(a=t[e%h]).skip||(s=u(a[n]))!==r&&(b=c(s,l,o),null===y&&v()&&(y=0===d(s,l)?e:i),null!==y&&w()&&(f.push(t7({start:y,end:e,loop:p,count:h,style:x})),y=null),i=e,r=s);return null!==y&&f.push(t7({start:y,end:m,loop:p,count:h,style:x})),f}function ie(e,t){let i=[],s=e.segments;for(let a=0;a<s.length;a++){let r=t9(s[a],e.points,t);r.length&&i.push(...r)}return i}function it(e,t,i,s){return s&&s.setContext&&i?function(e,t,i,s){let a=e._chart.getContext(),r=ii(e.options),{_datasetIndex:n,options:{spanGaps:l}}=e,o=i.length,h=[],d=r,c=t[0].start,u=c;function g(e,t,s,a){let r=l?-1:1;if(e!==t){for(e+=o;i[e%o].skip;)e-=r;for(;i[t%o].skip;)t+=r;e%o!=t%o&&(h.push({start:e%o,end:t%o,loop:s,style:a}),d=a,c=t%o)}}for(let e of t){let t,r=i[(c=l?c:e.start)%o];for(u=c+1;u<=e.end;u++){let l=i[u%o];(function(e,t){if(!t)return!1;let i=[],s=function(e,t){return e5(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,s)!==JSON.stringify(t,s)})(t=ii(s.setContext(tT(a,{type:"segment",p0:r,p1:l,p0DataIndex:(u-1)%o,p1DataIndex:u%o,datasetIndex:n}))),d)&&g(c,u-1,e.loop,d),r=l,d=t}c<u-1&&g(c,u-1,e.loop,d)}return h}(e,t,i,s):t}function ii(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function is(e,t,i){return e.options.clip?e[i]:t[i]}function ia(e,t){let i=t._clip;if(i.disabled)return!1;let s=function(e,t){let{xScale:i,yScale:s}=e;return i&&s?{left:is(i,t,"left"),right:is(i,t,"right"),top:is(s,t,"top"),bottom:is(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:s.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:s.right+(!0===i.right?0:i.right),top:!1===i.top?0:s.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:s.bottom+(!0===i.bottom?0:i.bottom)}}var ir=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){let a=t.listeners[s],r=t.duration;a.forEach(s=>s({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=eY.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{let a;if(!i.running||!i.items.length)return;let r=i.items,n=r.length-1,l=!1;for(;n>=0;--n)(a=r[n])._active?(a._total>i.duration&&(i.duration=a._total),a.tick(e),l=!0):(r[n]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!!t&&!!t.running&&!!t.items.length}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};let il="transparent",io={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){let s=e3(e||il),a=s.valid&&e3(t||il);return a&&a.valid?a.mix(s,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class ih{constructor(e,t,i,s){const a=t[i];s=tM([e.to,s,a,e.from]);const r=tM([e.from,a,s]);this._active=!0,this._fn=e.fn||io[e.type||typeof r],this._easing=e2[e.easing]||e2.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let s=this._target[this._prop],a=i-this._start,r=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=tM([e.to,t,s,e.from]),this._from=tM([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t,i=e-this._start,s=this._duration,a=this._prop,r=this._from,n=this._loop,l=this._to;if(this._active=r!==l&&(n||i<s),!this._active){this._target[a]=l,this._notify(!0);return}if(i<0){this._target[a]=r;return}t=i/s%2,t=n&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(r,l,t)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}class id{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Q(e))return;let t=Object.keys(tr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{let a=e[s];if(!Q(a))return;let r={};for(let e of t)r[e]=a[e];(K(a.properties)&&a.properties||[s]).forEach(e=>{e!==s&&i.has(e)||i.set(e,r)})})}_animateOptions(e,t){let i=t.options,s=function(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(e,i);if(!s)return[];let a=this._createAnimations(s,i);return i.$shared&&(function(e,t){let i=[],s=Object.keys(t);for(let t=0;t<s.length;t++){let a=e[s[t]];a&&a.active()&&i.push(a.wait())}return Promise.all(i)})(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){let i,s=this._properties,a=[],r=e.$animations||(e.$animations={}),n=Object.keys(t),l=Date.now();for(i=n.length-1;i>=0;--i){let o=n[i];if("$"===o.charAt(0))continue;if("options"===o){a.push(...this._animateOptions(e,t));continue}let h=t[o],d=r[o],c=s.get(o);if(d)if(c&&d.active()){d.update(c,h,l);continue}else d.cancel();if(!c||!c.duration){e[o]=h;continue}r[o]=d=new ih(c,e,o,h),a.push(d)}return a}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);let i=this._createAnimations(e,t);if(i.length)return ir.add(this._chart,i),!0}}function ic(e,t){let i=e&&e.options||{},s=i.reverse,a=void 0===i.min?t:0,r=void 0===i.max?t:0;return{start:s?r:a,end:s?a:r}}function iu(e,t){let i,s,a=[],r=e._getSortedDatasetMetas(t);for(i=0,s=r.length;i<s;++i)a.push(r[i].index);return a}function ig(e,t,i,s={}){let a,r,n,l,o=e.keys,h="single"===s.mode;if(null===t)return;let d=!1;for(a=0,r=o.length;a<r;++a){if((n=+o[a])===i){if(d=!0,s.all)continue;break}J(l=e.values[n])&&(h||0===t||eT(t)===eT(l))&&(t+=l)}return d||s.all?t:0}function im(e,t){let i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function ip(e,t,i,s){for(let a of t.getMatchingVisibleMetas(s).reverse()){let t=e[a.index];if(i&&t>0||!i&&t<0)return a.index}return null}function ix(e,t){let i,{chart:s,_cachedMeta:a}=e,r=s._stacks||(s._stacks={}),{iScale:n,vScale:l,index:o}=a,h=n.axis,d=l.axis,c=`${n.id}.${l.id}.${a.stack||a.type}`,u=t.length;for(let e=0;e<u;++e){let s=t[e],{[h]:n,[d]:u}=s;(i=(s._stacks||(s._stacks={}))[d]=function(e,t,i){let s=e[t]||(e[t]={});return s[i]||(s[i]={})}(r,c,n))[o]=u,i._top=ip(i,l,!0,a.type),i._bottom=ip(i,l,!1,a.type),(i._visualValues||(i._visualValues={}))[o]=u}}function ib(e,t){let i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function iy(e,t){let i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s)for(let a of t=t||e._parsed){let e=a._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}let iv=e=>"reset"===e||"none"===e,iw=(e,t)=>t?e:Object.assign({},e);class i_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=im(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&iy(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(e,t,i,s)=>"x"===e?t:"r"===e?s:i,a=t.xAxisID=et(i.xAxisID,ib(e,"x")),r=t.yAxisID=et(i.yAxisID,ib(e,"y")),n=t.rAxisID=et(i.rAxisID,ib(e,"r")),l=t.indexAxis,o=t.iAxisID=s(l,a,r,n),h=t.vAxisID=s(l,r,a,n);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(n),t.iScale=this.getScaleForId(o),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&eq(this._data,this),e._stacked&&iy(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Q(t)){let e=this._cachedMeta;this._data=function(e,t){let i,s,a,{iScale:r,vScale:n}=t,l="x"===r.axis?"x":"y",o="x"===n.axis?"x":"y",h=Object.keys(e),d=Array(h.length);for(i=0,s=h.length;i<s;++i)a=h[i],d[i]={[l]:a,[o]:e[a]};return d}(t,e)}else if(i!==t){if(i){eq(i,this);let e=this._cachedMeta;iy(e),e._parsed=[]}t&&Object.isExtensible(t)&&(t._chartjs?t._chartjs.listeners.push(this):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),eH.forEach(e=>{let i="_onData"+em(e),s=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){let a=s.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"==typeof t[i]&&t[i](...e)}),a}})}))),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let a=t._stacked;t._stacked=im(t.vScale,t),t.stack!==i.stack&&(s=!0,iy(t),t.stack=i.stack),this._resyncElements(e),(s||a!==t._stacked)&&(ix(this,t._parsed),t._stacked=im(t.vScale,t))}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let i,s,a,{_cachedMeta:r,_data:n}=this,{iScale:l,_stacked:o}=r,h=l.axis,d=0===e&&t===n.length||r._sorted,c=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,a=n;else{a=K(n[e])?this.parseArrayData(r,n,e,t):Q(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);let l=()=>null===s[h]||c&&s[h]<c[h];for(i=0;i<t;++i)r._parsed[i+e]=s=a[i],d&&(l()&&(d=!1),c=s);r._sorted=d}o&&ix(this,a)}parsePrimitiveData(e,t,i,s){let a,r,{iScale:n,vScale:l}=e,o=n.axis,h=l.axis,d=n.getLabels(),c=n===l,u=Array(s);for(a=0;a<s;++a)r=a+i,u[a]={[o]:c||n.parse(d[r],r),[h]:l.parse(t[r],r)};return u}parseArrayData(e,t,i,s){let a,r,n,{xScale:l,yScale:o}=e,h=Array(s);for(a=0;a<s;++a)n=t[r=a+i],h[a]={x:l.parse(n[0],r),y:o.parse(n[1],r)};return h}parseObjectData(e,t,i,s){let a,r,n,{xScale:l,yScale:o}=e,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,c=Array(s);for(a=0;a<s;++a)n=t[r=a+i],c[a]={x:l.parse(eg(n,h),r),y:o.parse(eg(n,d),r)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){let s=this.chart,a=this._cachedMeta,r=t[e.axis];return ig({keys:iu(s,!0),values:t._stacks[e.axis]._visualValues},r,a.index,{mode:i})}updateRangeFromParsed(e,t,i,s){let a=i[t.axis],r=null===a?NaN:a,n=s&&i._stacks[t.axis];s&&n&&(s.values=n,r=ig(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){let i,s,a,r=this._cachedMeta,n=r._parsed,l=r._sorted&&e===r.iScale,o=n.length,h=this._getOtherScale(e),d=(a=this.chart,t&&!r.hidden&&r._stacked&&{keys:iu(a,!0),values:null}),c={min:1/0,max:-1/0},{min:u,max:g}=function(e){let{min:t,max:i,minDefined:s,maxDefined:a}=e.getUserBounds();return{min:s?t:-1/0,max:a?i:1/0}}(h);function m(){let t=(s=n[i])[h.axis];return!J(s[e.axis])||u>t||g<t}for(i=0;i<o&&(m()||(this.updateRangeFromParsed(c,e,s,d),!l));++i);if(l){for(i=o-1;i>=0;--i)if(!m()){this.updateRangeFromParsed(c,e,s,d);break}}return c}getAllParsedValues(e){let t,i,s,a=this._cachedMeta._parsed,r=[];for(t=0,i=a.length;t<i;++t)J(s=a[t][e.axis])&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,i=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){var t;let i,s,a,r,n=this._cachedMeta;this.update(e||"default"),Q(t=et(this.options.clip,function(e,t,i){if(!1===i)return!1;let s=ic(e,i),a=ic(t,i);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}(n.xScale,n.yScale,this.getMaxOverflow())))?(i=t.top,s=t.right,a=t.bottom,r=t.left):i=s=a=r=t,n._clip={top:i,right:s,bottom:a,left:r,disabled:!1===t}}update(e){}draw(){let e,t=this._ctx,i=this.chart,s=this._cachedMeta,a=s.data||[],r=i.chartArea,n=[],l=this._drawStart||0,o=this._drawCount||a.length-l,h=this.options.drawActiveElementsOnTop;for(s.dataset&&s.dataset.draw(t,r,l,o),e=l;e<l+o;++e){let i=a[e];i.hidden||(i.active&&h?n.push(i):i.draw(t,r))}for(e=0;e<n.length;++e)n[e].draw(t,r)}getStyle(e,t){let i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){var s,a;let r,n=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){let t=this._cachedMeta.data[e];(r=t.$context||(s=this.getContext(),t.$context=tT(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"}))).parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else(r=this.$context||(this.$context=tT(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:a=this.index,index:a,mode:"default",type:"dataset"}))).dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){let s="active"===t,a=this._cachedDataOpts,r=e+"-"+t,n=a[r],l=this.enableOptionSharing&&ep(i);if(n)return iw(n,l);let o=this.chart.config,h=o.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],c=o.getOptionScopes(this.getDataset(),h),u=Object.keys(tr.elements[e]),g=()=>this.getContext(i,s,t),m=o.resolveNamedOptions(c,u,g,d);return m.$shared&&(m.$shared=l,a[r]=Object.freeze(iw(m,l))),m}_resolveAnimations(e,t,i){let s,a=this.chart,r=this._cachedDataOpts,n=`animation-${t}`,l=r[n];if(l)return l;if(!1!==a.options.animation){let a=this.chart.config,r=a.datasetAnimationScopeKeys(this._type,t),n=a.getOptionScopes(this.getDataset(),r);s=a.createResolver(n,this.getContext(e,i,t))}let o=new id(a,s&&s.animations);return s&&s._cacheable&&(r[n]=Object.freeze(o)),o}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||iv(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(i),r=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:r}}updateElement(e,t,i,s){iv(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!iv(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;let a=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,i=this._cachedMeta.data;for(let[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];let s=i.length,a=t.length,r=Math.min(a,s);r&&this.parse(0,r),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,i=!0){let s,a=this._cachedMeta,r=a.data,n=e+t,l=e=>{for(e.length+=t,s=e.length-1;s>=n;s--)e[s]=e[s-t]};for(l(r),s=e;s<n;++s)r[s]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(e,t);i._stacked&&iy(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iN(e,t,i,s){if(K(e)){let a,r,n,l,o,h;a=i.parse(e[0],s),n=Math.min(a,r=i.parse(e[1],s)),l=Math.max(a,r),o=n,h=l,Math.abs(n)>Math.abs(l)&&(o=l,h=n),t[i.axis]=h,t._custom={barStart:o,barEnd:h,start:a,end:r,min:n,max:l}}else t[i.axis]=i.parse(e,s);return t}function ij(e,t,i,s){let a,r,n,l,o=e.iScale,h=e.vScale,d=o.getLabels(),c=o===h,u=[];for(a=i,r=i+s;a<r;++a)l=t[a],(n={})[o.axis]=c||o.parse(d[a],a),u.push(iN(l,n,h,a));return u}function ik(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function iM(e,t,i,s){var a,r,n;return s?iT((a=e,r=t,n=i,e=a===r?n:a===n?r:a),i,t):iT(e,t,i)}function iT(e,t,i){return"start"===e?t:"end"===e?i:e}class iC extends i_{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){let a=super.parsePrimitiveData(e,t,i,s);for(let e=0;e<a.length;e++)a[e]._custom=this.resolveDataElementOptions(e+i).radius;return a}parseArrayData(e,t,i,s){let a=super.parseArrayData(e,t,i,s);for(let e=0;e<a.length;e++){let s=t[i+e];a[e]._custom=et(s[2],this.resolveDataElementOptions(e+i).radius)}return a}parseObjectData(e,t,i,s){let a=super.parseObjectData(e,t,i,s);for(let e=0;e<a.length;e++){let s=t[i+e];a[e]._custom=et(s&&s.r&&+s.r,this.resolveDataElementOptions(e+i).radius)}return a}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),n=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y),o=r._custom;return{label:i[e]||"",value:"("+n+", "+l+(o?", "+o:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n}=this._cachedMeta,{sharedOptions:l,includeOptions:o}=this._getSharedOptions(t,s),h=r.axis,d=n.axis;for(let c=t;c<t+i;c++){let t=e[c],i=!a&&this.getParsed(c),u={},g=u[h]=a?r.getPixelForDecimal(.5):r.getPixelForValue(i[h]),m=u[d]=a?n.getBasePixel():n.getPixelForValue(i[d]);u.skip=isNaN(g)||isNaN(m),o&&(u.options=l||this.resolveDataElementOptions(c,t.active?"active":s),a&&(u.options.radius=0)),this.updateElement(t,c,u,s)}}resolveDataElementOptions(e,t){let i=this.getParsed(e),s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let a=s.radius;return"active"!==t&&(s.radius=0),s.radius+=et(i&&i._custom,a),s}}class iP extends i_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data,{labels:{pointStyle:i,textAlign:s,color:a,useBorderRadius:r,borderRadius:n}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,l)=>{let o=e.getDatasetMeta(0).controller.getStyle(l);return{text:t,fillStyle:o.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(l),lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,textAlign:s,pointStyle:i,borderRadius:r&&(n||o.borderRadius),index:l}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){let i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let a,r,n=e=>+i[e];if(Q(i[e])){let{key:e="value"}=this._parsing;n=t=>+eg(i[t],e)}for(a=e,r=e+t;a<r;++a)s._parsed[a]=n(a)}}_getRotation(){return eA(this.options.rotation-90)}_getCircumference(){return eA(this.options.circumference)}_getRotationExtents(){let e=ey,t=-ey;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),r=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}update(e){let t,{chartArea:i}=this.chart,s=this._cachedMeta,a=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,n=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min((t=this.options.cutout,"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/n),1),o=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:c,ratioY:u,offsetX:g,offsetY:m}=function(e,t,i){let s=1,a=1,r=0,n=0;if(t<ey){let l=e+t,o=Math.cos(e),h=Math.sin(e),d=Math.cos(l),c=Math.sin(l),u=(t,s,a)=>eF(t,e,l,!0)?1:Math.max(s,s*i,a,a*i),g=(t,s,a)=>eF(t,e,l,!0)?-1:Math.min(s,s*i,a,a*i),m=u(0,o,d),p=u(eN,h,c),x=g(eb,o,d),f=g(eb+eN,h,c);s=(m-x)/2,a=(p-f)/2,r=-(m+x)/2,n=-(p+f)/2}return{ratioX:s,ratioY:a,offsetX:r,offsetY:n}}(d,h,l),p=Math.max(Math.min((i.width-r)/c,(i.height-r)/u)/2,0),x=ei(this.options.radius,p),f=Math.max(x*l,0),b=(x-f)/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,s.total=this.calculateTotal(),this.outerRadius=x-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*o,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){let i=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/ey)}updateElements(e,t,i,s){let a,r="reset"===s,n=this.chart,l=n.chartArea,o=n.options.animation,h=(l.left+l.right)/2,d=(l.top+l.bottom)/2,c=r&&o.animateScale,u=c?0:this.innerRadius,g=c?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,s),x=this._getRotation();for(a=0;a<t;++a)x+=this._circumference(a,r);for(a=t;a<t+i;++a){let t=this._circumference(a,r),i=e[a],n={x:h+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+t,circumference:t,outerRadius:g,innerRadius:u};p&&(n.options=m||this.resolveDataElementOptions(a,i.active?"active":s)),x+=t,this.updateElement(i,a,n,s)}}calculateTotal(){let e,t=this._cachedMeta,i=t.data,s=0;for(e=0;e<i.length;e++){let a=t._parsed[e];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(e)&&!i[e].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?Math.abs(e)/t*ey:0}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=e9(t._parsed[e],i.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t,i,s,a,r,n=0,l=this.chart;if(!e){for(t=0,i=l.data.datasets.length;t<i;++t)if(l.isDatasetVisible(t)){e=(s=l.getDatasetMeta(t)).data,a=s.controller;break}}if(!e)return 0;for(t=0,i=e.length;t<i;++t)"inner"!==(r=a.resolveDataElementOptions(t)).borderAlign&&(n=Math.max(n,r.borderWidth||0,r.hoverBorderWidth||0));return n}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){let e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(et(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class iS extends i_{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((t,a)=>{let r=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:s,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=e9(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,t,i,s){return tV.bind(this)(e,t,i,s)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:1/0,max:-1/0};return e.data.forEach((e,i)=>{let s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,i=e.options,s=Math.max(Math.min(t.right-t.left,t.bottom-t.top)/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),r=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,i,s){let a,r="reset"===s,n=this.chart,l=n.options.animation,o=this._cachedMeta.rScale,h=o.xCenter,d=o.yCenter,c=o.getIndexAngle(0)-.5*eb,u=c,g=360/this.countVisibleElements();for(a=0;a<t;++a)u+=this._computeAngle(a,s,g);for(a=t;a<t+i;a++){let t=e[a],i=u,m=u+this._computeAngle(a,s,g),p=n.getDataVisibility(a)?o.getDistanceFromCenterForValue(this.getParsed(a).r):0;u=m,r&&(l.animateScale&&(p=0),l.animateRotate&&(i=m=c));let x={x:h,y:d,innerRadius:0,outerRadius:p,startAngle:i,endAngle:m,options:this.resolveDataElementOptions(a,t.active?"active":s)};this.updateElement(t,a,x,s)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?eA(this.resolveDataElementOptions(e,t).angle||i):0}}class iD extends i_{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return tV.bind(this)(e,t,i,s)}update(e){let t=this._cachedMeta,i=t.dataset,s=t.data||[],a=t.iScale.getLabels();if(i.points=s,"resize"!==e){let t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);let r={_loop:!0,_fullLoop:a.length===s.length,options:t};this.updateElement(i,void 0,r,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){let a=this._cachedMeta.rScale,r="reset"===s;for(let n=t;n<t+i;n++){let t=e[n],i=this.resolveDataElementOptions(n,t.active?"active":s),l=a.getPointPositionForValue(n,this.getParsed(n).r),o=r?a.xCenter:l.x,h=r?a.yCenter:l.y,d={x:o,y:h,angle:l.angle,skip:isNaN(o)||isNaN(h),options:i};this.updateElement(t,n,d,s)}}}class iA extends i_{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),n=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y);return{label:i[e]||"",value:"("+n+", "+l+")"}}update(e){let t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled,{start:a,count:r}=eK(t,i,s);if(this._drawStart=a,this._drawCount=r,eQ(t)&&(a=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:r}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!r._decimated,a.points=i;let n=this.resolveDatasetElementOptions(e);n.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:n},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,a,r,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n,_stacked:l,_dataset:o}=this._cachedMeta,h=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(h),c=this.includeOptions(s,d),u=r.axis,g=n.axis,{spanGaps:m,segment:p}=this.options,x=eS(m)?m:1/0,f=this.chart._animationsDisabled||a||"none"===s,b=t>0&&this.getParsed(t-1);for(let h=t;h<t+i;++h){let t=e[h],i=this.getParsed(h),m=f?t:{},y=G(i[g]),v=m[u]=r.getPixelForValue(i[u],h),w=m[g]=a||y?n.getBasePixel():n.getPixelForValue(l?this.applyStack(n,i,l):i[g],h);m.skip=isNaN(v)||isNaN(w)||y,m.stop=h>0&&Math.abs(i[u]-b[u])>x,p&&(m.parsed=i,m.raw=o.data[h]),c&&(m.options=d||this.resolveDataElementOptions(h,t.active?"active":s)),f||this.updateElement(t,h,m,s),b=i}this.updateSharedOptions(d,s,h)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}let i=e.dataset,s=i.options&&i.options.borderWidth||0;return t.length?Math.max(s,t[0].size(this.resolveDataElementOptions(0)),t[t.length-1].size(this.resolveDataElementOptions(t.length-1)))/2:s}}function iL(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class iE{static override(e){Object.assign(iE.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return iL()}parse(){return iL()}format(){return iL()}add(){return iL()}diff(){return iL()}startOf(){return iL()}endOf(){return iL()}}function iR(e,t,i,s,a){let r=e.getSortedVisibleDatasetMetas(),n=i[t];for(let e=0,i=r.length;e<i;++e){let{index:i,data:l}=r[e],{lo:o,hi:h}=function(e,t,i,s){let{controller:a,data:r,_sorted:n}=e,l=a._cachedMeta.iScale,o=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&"r"!==t&&n&&r.length){let n=l._reversePixels?eW:eB;if(s){if(a._sharedOptions){let e=r[0],s="function"==typeof e.getRange&&e.getRange(t);if(s){let e=n(r,t,i-s),a=n(r,t,i+s);return{lo:e.lo,hi:a.hi}}}}else{let s=n(r,t,i);if(o){let{vScale:t}=a._cachedMeta,{_parsed:i}=e,r=i.slice(0,s.lo+1).reverse().findIndex(e=>!G(e[t.axis]));s.lo-=Math.max(0,r);let n=i.slice(s.hi).findIndex(e=>!G(e[t.axis]));s.hi+=Math.max(0,n)}return s}}return{lo:0,hi:r.length-1}}(r[e],t,n,a);for(let e=o;e<=h;++e){let t=l[e];t.skip||s(t,i,e)}}}function iO(e,t,i,s,a){let r=[];return(a||e.isPointInArea(t))&&iR(e,i,t,function(i,n,l){(a||tc(i,e.chartArea,0))&&i.inRange(t.x,t.y,s)&&r.push({element:i,datasetIndex:n,index:l})},!0),r}function i$(e,t,i,s,a,r){let n,l,o,h,d,c;return r||e.isPointInArea(t)?"r"!==i||s?(n=[],l=-1!==i.indexOf("x"),o=-1!==i.indexOf("y"),h=function(e,t){return Math.sqrt(Math.pow(l?Math.abs(e.x-t.x):0,2)+Math.pow(o?Math.abs(e.y-t.y):0,2))},d=1/0,iR(e,i,t,function(i,l,o){let c=i.inRange(t.x,t.y,a);if(s&&!c)return;let u=i.getCenterPoint(a);if(!(r||e.isPointInArea(u))&&!c)return;let g=h(t,u);g<d?(n=[{element:i,datasetIndex:l,index:o}],d=g):g===d&&n.push({element:i,datasetIndex:l,index:o})}),n):(c=[],iR(e,i,t,function(e,i,s){let{startAngle:r,endAngle:n}=e.getProps(["startAngle","endAngle"],a),{angle:l}=eE(e,{x:t.x,y:t.y});eF(l,r,n)&&c.push({element:e,datasetIndex:i,index:s})}),c):[]}function iF(e,t,i,s,a){let r=[],n="x"===i?"inXRange":"inYRange",l=!1;return(iR(e,i,t,(e,s,o)=>{e[n]&&e[n](t[i],a)&&(r.push({element:e,datasetIndex:s,index:o}),l=l||e.inRange(t.x,t.y,a))}),s&&!l)?[]:r}var iV={modes:{index(e,t,i,s){let a=tG(t,e),r=i.axis||"x",n=i.includeInvisible||!1,l=i.intersect?iO(e,a,r,s,n):i$(e,a,r,!1,s,n),o=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{let t=l[0].index,i=e.data[t];i&&!i.skip&&o.push({element:i,datasetIndex:e.index,index:t})}),o):[]},dataset(e,t,i,s){let a=tG(t,e),r=i.axis||"xy",n=i.includeInvisible||!1,l=i.intersect?iO(e,a,r,s,n):i$(e,a,r,!1,s,n);if(l.length>0){let t=l[0].datasetIndex,i=e.getDatasetMeta(t).data;l=[];for(let e=0;e<i.length;++e)l.push({element:i[e],datasetIndex:t,index:e})}return l},point(e,t,i,s){let a=tG(t,e);return iO(e,a,i.axis||"xy",s,i.includeInvisible||!1)},nearest(e,t,i,s){let a=tG(t,e),r=i.axis||"xy",n=i.includeInvisible||!1;return i$(e,a,r,i.intersect,s,n)},x(e,t,i,s){let a=tG(t,e);return iF(e,a,"x",i.intersect,s)},y(e,t,i,s){let a=tG(t,e);return iF(e,a,"y",i.intersect,s)}}};let iz=["left","top","right","bottom"];function iI(e,t){return e.filter(e=>e.pos===t)}function iB(e,t){return e.filter(e=>-1===iz.indexOf(e.pos)&&e.box.axis===t)}function iW(e,t){return e.sort((e,i)=>{let s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function iH(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function iq(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iU(e,t,i,s){let a,r,n,l,o,h,d=[];for(a=0,r=e.length,o=0;a<r;++a){(l=(n=e[a]).box).update(n.width||t.w,n.height||t.h,function(e,t){let i=t.maxPadding;return function(e){let s={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{s[e]=Math.max(t[e],i[e])}),s}(e?["left","right"]:["top","bottom"])}(n.horizontal,t));let{same:r,other:c}=function(e,t,i,s){let{pos:a,box:r}=i,n=e.maxPadding;if(!Q(a)){i.size&&(e[a]-=i.size);let t=s[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?r.height:r.width),i.size=t.size/t.count,e[a]+=i.size}r.getPadding&&iq(n,r.getPadding());let l=Math.max(0,t.outerWidth-iH(n,e,"left","right")),o=Math.max(0,t.outerHeight-iH(n,e,"top","bottom")),h=l!==e.w,d=o!==e.h;return e.w=l,e.h=o,i.horizontal?{same:h,other:d}:{same:d,other:h}}(t,i,n,s);o|=r&&d.length,h=h||c,l.fullSize||d.push(n)}return o&&iU(d,t,i,s)||h}function iY(e,t,i,s,a){e.top=i,e.left=t,e.right=t+s,e.bottom=i+a,e.width=s,e.height=a}function iZ(e,t,i,s){let a=i.padding,{x:r,y:n}=t;for(let l of e){let e=l.box,o=s[l.stack]||{count:1,placed:0,weight:1},h=l.stackWeight/o.weight||1;if(l.horizontal){let s=t.w*h,r=o.size||e.height;ep(o.start)&&(n=o.start),e.fullSize?iY(e,a.left,n,i.outerWidth-a.right-a.left,r):iY(e,t.left+o.placed,n,s,r),o.start=n,o.placed+=s,n=e.bottom}else{let s=t.h*h,n=o.size||e.width;ep(o.start)&&(r=o.start),e.fullSize?iY(e,r,a.top,n,i.outerHeight-a.bottom-a.top):iY(e,r,t.top+o.placed,n,s),o.start=r,o.placed+=s,r=e.right}}t.x=r,t.y=n}var iX={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){let a,r,n,l,o,h,d,c;if(!e)return;let u=tj(e.options.layout.padding),g=Math.max(t-u.width,0),m=Math.max(i-u.height,0),p=(r=iW((a=function(e){let t,i,s,a,r,n,l=[];for(t=0,i=(e||[]).length;t<i;++t)s=e[t],({position:a,options:{stack:r,stackWeight:n=1}}=s),l.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&a+r,stackWeight:n});return l}(e.boxes)).filter(e=>e.box.fullSize),!0),n=iW(iI(a,"left"),!0),l=iW(iI(a,"right")),o=iW(iI(a,"top"),!0),h=iW(iI(a,"bottom")),d=iB(a,"x"),c=iB(a,"y"),{fullSize:r,leftAndTop:n.concat(o),rightAndBottom:l.concat(c).concat(h).concat(d),chartArea:iI(a,"chartArea"),vertical:n.concat(l).concat(c),horizontal:o.concat(h).concat(d)}),x=p.vertical,f=p.horizontal;ea(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});let b=Object.freeze({outerWidth:t,outerHeight:i,padding:u,availableWidth:g,availableHeight:m,vBoxMaxWidth:g/2/(x.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1),hBoxMaxHeight:m/2}),y=Object.assign({},u);iq(y,tj(s));let v=Object.assign({maxPadding:y,w:g,h:m,x:u.left,y:u.top},u),w=function(e,t){let i,s,a,r=function(e){let t={};for(let i of e){let{stack:e,pos:s,stackWeight:a}=i;if(!e||!iz.includes(s))continue;let r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:l}=t;for(i=0,s=e.length;i<s;++i){let{fullSize:s}=(a=e[i]).box,o=r[a.stack],h=o&&a.stackWeight/o.weight;a.horizontal?(a.width=h?h*n:s&&t.availableWidth,a.height=l):(a.width=n,a.height=h?h*l:s&&t.availableHeight)}return r}(x.concat(f),b);iU(p.fullSize,v,b,w),iU(x,v,b,w),iU(f,v,b,w)&&iU(x,v,b,w);let _=v.maxPadding;function N(e){let t=Math.max(_[e]-v[e],0);return v[e]+=t,t}v.y+=N("top"),v.x+=N("left"),N("right"),N("bottom"),iZ(p.leftAndTop,v,b,w),v.x+=v.w,v.y+=v.h,iZ(p.rightAndBottom,v,b,w),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},ea(p.chartArea,t=>{let i=t.box;Object.assign(i,e.chartArea),i.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class iG{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class iK extends iG{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}let iQ="$chartjs",iJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},i0=e=>null===e||""===e,i1=!!tJ&&{passive:!0};function i2(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function i5(e,t,i){let s=e.canvas,a=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i2(i.addedNodes,s))&&!i2(i.removedNodes,s);t&&i()});return a.observe(document,{childList:!0,subtree:!0}),a}function i3(e,t,i){let s=e.canvas,a=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i2(i.removedNodes,s))&&!i2(i.addedNodes,s);t&&i()});return a.observe(document,{childList:!0,subtree:!0}),a}let i6=new Map,i4=0;function i8(){let e=window.devicePixelRatio;e!==i4&&(i4=e,i6.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function i7(e,t,i){let s=e.canvas,a=s&&tq(s);if(!a)return;let r=eZ((e,t)=>{let s=a.clientWidth;i(e,t),s<a.clientWidth&&i()},window),n=new ResizeObserver(e=>{let t=e[0],i=t.contentRect.width,s=t.contentRect.height;(0!==i||0!==s)&&r(i,s)});return n.observe(a),i6.size||window.addEventListener("resize",i8),i6.set(e,r),n}function i9(e,t,i){i&&i.disconnect(),"resize"===t&&(i6.delete(e),i6.size||window.removeEventListener("resize",i8))}function se(e,t,i){let s=e.canvas,a=eZ(t=>{null!==e.ctx&&i(function(e,t){let i=iJ[e.type]||e.type,{x:s,y:a}=tG(e,t);return{type:i,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==a?a:null}}(t,e))},e);return s&&s.addEventListener(t,a,i1),a}class st extends iG{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(!function(e,t){let i=e.style,s=e.getAttribute("height"),a=e.getAttribute("width");if(e[iQ]={initial:{height:s,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",i0(a)){let t=t0(e,"width");void 0!==t&&(e.width=t)}if(i0(s))if(""===e.style.height)e.height=e.width/(t||2);else{let t=t0(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[iQ])return!1;let i=t[iQ].initial;["height","width"].forEach(e=>{let s=i[e];G(s)?t.removeAttribute(e):t.setAttribute(e,s)});let s=i.style||{};return Object.keys(s).forEach(e=>{t.style[e]=s[e]}),t.width=t.width,delete t[iQ],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let s=e.$proxies||(e.$proxies={}),a={attach:i5,detach:i3,resize:i7}[t]||se;s[t]=a(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),s=i[t];s&&((({attach:i9,detach:i9,resize:i9})[t]||function(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,i1)})(e,t,s),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return function(e,t,i,s){let a=tY(e),r=tX(a,"margin"),n=tU(a.maxWidth,e,"clientWidth")||ew,l=tU(a.maxHeight,e,"clientHeight")||ew,o=function(e,t,i){let s,a;if(void 0===t||void 0===i){let r=e&&tq(e);if(r){let e=r.getBoundingClientRect(),n=tY(r),l=tX(n,"border","width"),o=tX(n,"padding");t=e.width-o.width-l.width,i=e.height-o.height-l.height,s=tU(n.maxWidth,r,"clientWidth"),a=tU(n.maxHeight,r,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:s||ew,maxHeight:a||ew}}(e,t,i),{width:h,height:d}=o;if("content-box"===a.boxSizing){let e=tX(a,"border","width"),t=tX(a,"padding");h-=t.width+e.width,d-=t.height+e.height}return h=Math.max(0,h-r.width),d=Math.max(0,s?h/s:d-r.height),h=tK(Math.min(h,n,o.maxWidth)),d=tK(Math.min(d,l,o.maxHeight)),h&&!d&&(d=tK(h/2)),(void 0!==t||void 0!==i)&&s&&o.height&&d>o.height&&(h=tK(Math.floor((d=o.height)*s))),{width:h,height:d}}(e,t,i,s)}isAttached(e){let t=e&&tq(e);return!!(t&&t.isConnected)}}class si{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return eS(this.x)&&eS(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let s={};return e.forEach(e=>{s[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),s}}function ss(e,t,i,s,a){let r,n,l,o=et(s,0),h=Math.min(et(a,e.length),e.length),d=0;for(i=Math.ceil(i),a&&(i=(r=a-s)/Math.floor(r/i)),l=o;l<0;)l=Math.round(o+ ++d*i);for(n=Math.max(o,0);n<h;n++)n===l&&(t.push(e[n]),l=Math.round(o+ ++d*i))}let sa=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,sr=(e,t)=>Math.min(t||e,e);function sn(e,t){let i=[],s=e.length/t,a=e.length,r=0;for(;r<a;r+=s)i.push(e[Math.floor(r)]);return i}function sl(e){return e.drawTicks?e.tickLength:0}function so(e,t){if(!e.display)return 0;let i=tk(e.font,t),s=tj(e.padding);return(K(e.text)?e.text.length:1)*i.lineHeight+s.height}class sh extends si{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=ee(e,1/0),t=ee(t,-1/0),i=ee(i,1/0),s=ee(s,-1/0),{min:ee(e,i),max:ee(t,s),minDefined:J(e),maxDefined:J(t)}}getMinMax(e){let t,{min:i,max:s,minDefined:a,maxDefined:r}=this.getUserBounds();if(a&&r)return{min:i,max:s};let n=this.getMatchingVisibleMetas();for(let l=0,o=n.length;l<o;++l)t=n[l].controller.getMinMax(this,e),a||(i=Math.min(i,t.min)),r||(s=Math.max(s,t.max));return i=r&&i>s?s:i,s=a&&i>s?i:s,{min:ee(i,ee(s,i)),max:ee(s,ee(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:s,grace:a,ticks:r}=this.options,n=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){let{min:s,max:a}=e,r=ei(t,(a-s)/2),n=(e,t)=>i&&0===e?0:e+t;return{min:n(s,-Math.abs(r)),max:n(a,r)}}(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=n<this.ticks.length;this._convertTicksToLabels(l?sn(this.ticks,n):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=function(e,t){var i;let s,a,r=e.options.ticks,n=(s=(i=e).options.offset,a=i._tickSize(),Math.floor(Math.min(i._length/a+ +!s,i._maxLength/a))),l=Math.min(r.maxTicksLimit||n,n),o=r.major.enabled?function(e){let t,i,s=[];for(t=0,i=e.length;t<i;t++)e[t].major&&s.push(t);return s}(t):[],h=o.length,d=o[0],c=o[h-1],u=[];if(h>l)return function(e,t,i,s){let a,r=0,n=i[0];for(a=0,s=Math.ceil(s);a<e.length;a++)a===n&&(t.push(e[a]),n=i[++r*s])}(t,u,o,h/l),u;let g=function(e,t,i){let s=function(e){let t,i,s=e.length;if(s<2)return!1;for(i=e[0],t=1;t<s;++t)if(e[t]-e[t-1]!==i)return!1;return i}(e),a=t.length/i;if(!s)return Math.max(a,1);let r=function(e){let t,i=[],s=Math.sqrt(e);for(t=1;t<s;t++)e%t==0&&(i.push(t),i.push(e/t));return s===(0|s)&&i.push(s),i.sort((e,t)=>e-t).pop(),i}(s);for(let e=0,t=r.length-1;e<t;e++){let t=r[e];if(t>a)return t}return Math.max(a,1)}(o,t,l);if(h>0){let e,i,s=h>1?Math.round((c-d)/(h-1)):null;for(ss(t,u,g,G(s)?0:d-s,d),e=0,i=h-1;e<i;e++)ss(t,u,g,o[e],o[e+1]);return ss(t,u,g,c,G(s)?t.length:c+s),u}return ss(t,u,g),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t,i,s,a=this.options.ticks;for(t=0,i=e.length;t<i;t++)(s=e[t]).label=es(a.callback,[s.value,t,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e,t,i,s=this.options,a=s.ticks,r=sr(this.ticks.length,s.ticks.maxTicksLimit),n=a.minRotation||0,l=a.maxRotation,o=n;if(!this._isVisible()||!a.display||n>=l||r<=1||!this.isHorizontal()){this.labelRotation=n;return}let h=this._getLabelSizes(),d=h.widest.width,c=h.highest.height,u=eV(this.chart.width-d,0,this.maxWidth);d+6>(e=s.offset?this.maxWidth/r:u/(r-1))&&(e=u/(r-(s.offset?.5:1)),t=this.maxHeight-sl(s.grid)-a.padding-so(s.title,this.chart.options.font),i=Math.sqrt(d*d+c*c),o=Math.max(n,Math.min(l,o=180/eb*Math.min(Math.asin(eV((h.highest.height+6)/e,-1,1)),Math.asin(eV(t/i,-1,1))-Math.asin(eV(c/i,-1,1)))))),this.labelRotation=o}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,r=this._isVisible(),n=this.isHorizontal();if(r){let r=so(s,t.options.font);if(n?(e.width=this.maxWidth,e.height=sl(a)+r):(e.height=this.maxHeight,e.width=sl(a)+r),i.display&&this.ticks.length){let{first:t,last:s,widest:a,highest:r}=this._getLabelSizes(),l=2*i.padding,o=eA(this.labelRotation),h=Math.cos(o),d=Math.sin(o);if(n){let t=i.mirror?0:d*a.width+h*r.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{let t=i.mirror?0:h*a.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,s,d,h)}}this._handleMargins(),n?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){let{ticks:{align:a,padding:r},position:n}=this.options,l=0!==this.labelRotation,o="top"!==n&&"x"===this.axis;if(this.isHorizontal()){let n=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),d=0,c=0;l?o?(d=s*e.width,c=i*t.height):(d=i*e.height,c=s*t.width):"start"===a?c=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,c=t.width/2),this.paddingLeft=Math.max((d-n+r)*this.width/(this.width-n),0),this.paddingRight=Math.max((c-h+r)*this.width/(this.width-h),0)}else{let i=t.height/2,s=e.height/2;"start"===a?(i=0,s=e.height):"end"===a&&(i=t.height,s=0),this.paddingTop=i+r,this.paddingBottom=s+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)G(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=sn(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let s,a,r,n,l,o,h,d,c,u,g,{ctx:m,_longestTextCache:p}=this,x=[],f=[],b=Math.floor(t/sr(t,i)),y=0,v=0;for(s=0;s<t;s+=b){if(n=e[s].label,m.font=o=(l=this._resolveTickFontOptions(s)).string,h=p[o]=p[o]||{data:{},gc:[]},d=l.lineHeight,c=u=0,G(n)||K(n)){if(K(n))for(a=0,r=n.length;a<r;++a)G(g=n[a])||K(g)||(c=tn(m,h.data,h.gc,c,g),u+=d)}else c=tn(m,h.data,h.gc,c,n),u=d;x.push(c),f.push(u),y=Math.max(c,y),v=Math.max(u,v)}ea(p,e=>{let i,s=e.gc,a=s.length/2;if(a>t){for(i=0;i<a;++i)delete e.data[s[i]];s.splice(0,a)}});let w=x.indexOf(y),_=f.indexOf(v),N=e=>({width:x[e]||0,height:f[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(_),widths:x,heights:f}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return eV(this._alignToPixels?tl(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){var t,i;let s=this.ticks||[];if(e>=0&&e<s.length){let i=s[e];return i.$context||(t=this.getContext(),i.$context=tT(t,{tick:i,index:e,type:"tick"}))}return this.$context||(this.$context=(i=this.chart.getContext(),tT(i,{scale:this,type:"scale"})))}_tickSize(){let e=this.options.ticks,t=eA(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,n=a?a.widest.width+r:0,l=a?a.highest.height+r:0;return this.isHorizontal()?l*i>n*s?n/i:l/s:l*s<n*i?l/i:n/s}_isVisible(){let e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t,i,s,a,r,n,l,o,h,d,c,u,g=this.axis,m=this.chart,p=this.options,{grid:x,position:f,border:b}=p,y=x.offset,v=this.isHorizontal(),w=this.ticks.length+ +!!y,_=sl(x),N=[],j=b.setContext(this.getContext()),k=j.display?j.width:0,M=k/2,T=function(e){return tl(m,e,k)};if("top"===f)t=T(this.bottom),n=this.bottom-_,o=t-M,d=T(e.top)+M,u=e.bottom;else if("bottom"===f)t=T(this.top),d=e.top,u=T(e.bottom)-M,n=t+M,o=this.top+_;else if("left"===f)t=T(this.right),r=this.right-_,l=t-M,h=T(e.left)+M,c=e.right;else if("right"===f)t=T(this.left),h=e.left,c=T(e.right)-M,r=t+M,l=this.left+_;else if("x"===g){if("center"===f)t=T((e.top+e.bottom)/2+.5);else if(Q(f)){let e=Object.keys(f)[0],i=f[e];t=T(this.chart.scales[e].getPixelForValue(i))}d=e.top,u=e.bottom,o=(n=t+M)+_}else if("y"===g){if("center"===f)t=T((e.left+e.right)/2);else if(Q(f)){let e=Object.keys(f)[0],i=f[e];t=T(this.chart.scales[e].getPixelForValue(i))}l=(r=t-M)-_,h=e.left,c=e.right}let C=et(p.ticks.maxTicksLimit,w),P=Math.max(1,Math.ceil(w/C));for(i=0;i<w;i+=P){let e=this.getContext(i),t=x.setContext(e),g=b.setContext(e),p=t.lineWidth,f=t.color,w=g.dash||[],_=g.dashOffset,j=t.tickWidth,k=t.tickColor,M=t.tickBorderDash||[],T=t.tickBorderDashOffset;void 0!==(s=function(e,t,i){let s,a=e.ticks.length,r=Math.min(t,a-1),n=e._startPixel,l=e._endPixel,o=e.getPixelForTick(r);if(!i||(s=1===a?Math.max(o-n,l-o):0===t?(e.getPixelForTick(1)-o)/2:(o-e.getPixelForTick(r-1))/2,!((o+=r<t?s:-s)<n-1e-6)&&!(o>l+1e-6)))return o}(this,i,y))&&(a=tl(m,s,p),v?r=l=h=c=a:n=o=d=u=a,N.push({tx1:r,ty1:n,tx2:l,ty2:o,x1:h,y1:d,x2:c,y2:u,width:p,color:f,borderDash:w,borderDashOffset:_,tickWidth:j,tickColor:k,tickBorderDash:M,tickBorderDashOffset:T}))}return this._ticksLength=w,this._borderValue=t,N}_computeLabelItems(e){let t,i,s,a,r,n,l,o,h,d,c,u=this.axis,g=this.options,{position:m,ticks:p}=g,x=this.isHorizontal(),f=this.ticks,{align:b,crossAlign:y,padding:v,mirror:w}=p,_=sl(g.grid),N=_+v,j=w?-v:N,k=-eA(this.labelRotation),M=[],T="middle";if("top"===m)r=this.bottom-j,n=this._getXAxisLabelAlignment();else if("bottom"===m)r=this.top+j,n=this._getXAxisLabelAlignment();else if("left"===m){let e=this._getYAxisLabelAlignment(_);n=e.textAlign,a=e.x}else if("right"===m){let e=this._getYAxisLabelAlignment(_);n=e.textAlign,a=e.x}else if("x"===u){if("center"===m)r=(e.top+e.bottom)/2+N;else if(Q(m)){let e=Object.keys(m)[0],t=m[e];r=this.chart.scales[e].getPixelForValue(t)+N}n=this._getXAxisLabelAlignment()}else if("y"===u){if("center"===m)a=(e.left+e.right)/2-N;else if(Q(m)){let e=Object.keys(m)[0],t=m[e];a=this.chart.scales[e].getPixelForValue(t)}n=this._getYAxisLabelAlignment(_).textAlign}"y"===u&&("start"===b?T="top":"end"===b&&(T="bottom"));let C=this._getLabelSizes();for(t=0,i=f.length;t<i;++t){let e;s=f[t].label;let u=p.setContext(this.getContext(t));l=this.getPixelForTick(t)+p.labelOffset,h=(o=this._resolveTickFontOptions(t)).lineHeight;let g=(d=K(s)?s.length:1)/2,b=u.color,v=u.textStrokeColor,_=u.textStrokeWidth,N=n;if(x?(a=l,"inner"===n&&(N=t===i-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),c="top"===m?"near"===y||0!==k?-d*h+h/2:"center"===y?-C.highest.height/2-g*h+h:-C.highest.height+h/2:"near"===y||0!==k?h/2:"center"===y?C.highest.height/2-g*h:C.highest.height-d*h,w&&(c*=-1),0===k||u.showLabelBackdrop||(a+=h/2*Math.sin(k))):(r=l,c=(1-d)*h/2),u.showLabelBackdrop){let s=tj(u.backdropPadding),a=C.heights[t],r=C.widths[t],l=c-s.top,o=0-s.left;switch(T){case"middle":l-=a/2;break;case"bottom":l-=a}switch(n){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":t===i-1?o-=r:t>0&&(o-=r/2)}e={left:o,top:l,width:r+s.width,height:a+s.height,color:u.backdropColor}}M.push({label:s,font:o,textOffset:c,options:{rotation:k,color:b,strokeColor:v,strokeWidth:_,textAlign:N,textBaseline:T,translation:[a,r],backdrop:e}})}return M}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-eA(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){let t,i,{position:s,ticks:{crossAlign:a,mirror:r,padding:n}}=this.options,l=this._getLabelSizes(),o=e+n,h=l.widest.width;return"left"===s?r?(i=this.right+n,"near"===a?t="left":"center"===a?(t="center",i+=h/2):(t="right",i+=h)):(i=this.right-o,"near"===a?t="right":"center"===a?(t="center",i-=h/2):(t="left",i=this.left)):"right"===s?r?(i=this.left+n,"near"===a?t="right":"center"===a?(t="center",i-=h/2):(t="left",i-=h)):(i=this.left+o,"near"===a?t="left":"center"===a?(t="center",i+=h/2):(t="right",i=this.right)):t="right",{textAlign:t,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:s,width:a,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,a,r),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(t=>t.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t,i,s=this.options.grid,a=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),n=(e,t,i)=>{i.width&&i.color&&(a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.setLineDash(i.borderDash||[]),a.lineDashOffset=i.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(s.display)for(t=0,i=r.length;t<i;++t){let e=r[t];s.drawOnChartArea&&n({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),s.drawTicks&&n({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){let e,t,i,s,{chart:a,ctx:r,options:{border:n,grid:l}}=this,o=n.setContext(this.getContext()),h=n.display?o.width:0;if(!h)return;let d=l.setContext(this.getContext(0)).lineWidth,c=this._borderValue;this.isHorizontal()?(e=tl(a,this.left,h)-h/2,t=tl(a,this.right,d)+d/2,i=s=c):(i=tl(a,this.top,h)-h/2,s=tl(a,this.bottom,d)+d/2,e=t=c),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(e,i),r.lineTo(t,s),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;let t=this.ctx,i=this._computeLabelArea();for(let s of(i&&tu(t,i),this.getLabelItems(e))){let e=s.options,i=s.font;tx(t,s.label,0,s.textOffset,i,e)}i&&tg(t)}drawTitle(){let e,t,{ctx:i,options:{position:s,title:a,reverse:r}}=this;if(!a.display)return;let n=tk(a.font),l=tj(a.padding),o=a.align,h=n.lineHeight/2;"bottom"===s||"center"===s||Q(s)?(h+=l.bottom,K(a.text)&&(h+=n.lineHeight*(a.text.length-1))):h+=l.top;let{titleX:d,titleY:c,maxWidth:u,rotation:g}=function(e,t,i,s){let a,r,n,{top:l,left:o,bottom:h,right:d,chart:c}=e,{chartArea:u,scales:g}=c,m=0,p=h-l,x=d-o;if(e.isHorizontal()){if(r=eG(s,o,d),Q(i)){let e=Object.keys(i)[0],s=i[e];n=g[e].getPixelForValue(s)+p-t}else n="center"===i?(u.bottom+u.top)/2+p-t:sa(e,i,t);a=d-o}else{if(Q(i)){let e=Object.keys(i)[0],s=i[e];r=g[e].getPixelForValue(s)-x+t}else r="center"===i?(u.left+u.right)/2-x+t:sa(e,i,t);n=eG(s,h,l),m="left"===i?-eN:eN}return{titleX:r,titleY:n,maxWidth:a,rotation:m}}(this,h,s,o);tx(i,a.text,0,0,n,{color:a.color,maxWidth:u,rotation:g,textAlign:(e=eX(o),(r&&"right"!==s||!r&&"right"===s)&&(e="left"===(t=e)?"right":"right"===t?"left":t),e),textBaseline:"middle",translation:[d,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=et(e.grid&&e.grid.z,-1),s=et(e.border&&e.border.z,0);return this._isVisible()&&this.draw===sh.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){let t,i,s=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",r=[];for(t=0,i=s.length;t<i;++t){let i=s[t];i[a]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return tk(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class sd{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){var t,i,s,a,r,n;let l,o,h=Object.getPrototypeOf(e);"id"in(t=h)&&"defaults"in t&&(o=this.register(h));let d=this.items,c=e.id,u=this.scope+"."+c;if(!c)throw Error("class does not have id: "+e);return c in d||(d[c]=e,i=e,s=u,a=o,l=eh(Object.create(null),[a?tr.get(a):{},tr.get(s),i.defaults]),tr.set(s,l),i.defaultRoutes&&(r=s,Object.keys(n=i.defaultRoutes).forEach(e=>{let t=e.split("."),i=t.pop(),s=[r].concat(t).join("."),a=n[e].split("."),l=a.pop(),o=a.join(".");tr.route(s,i,o,l)})),i.descriptors&&tr.describe(s,i.descriptors),this.override&&tr.override(e.id,e.overrides)),u}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in tr[s]&&(delete tr[s][i],this.override&&delete tt[i])}}var sc=new class{constructor(){this.controllers=new sd(i_,"datasets",!0),this.elements=new sd(si,"elements"),this.plugins=new sd(Object,"plugins"),this.scales=new sd(sh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(t=>{let s=i||this._getRegistryForType(t);i||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):ea(t,t=>{let s=i||this._getRegistryForType(t);this._exec(e,s,t)})})}_exec(e,t,i){let s=em(e);es(i["before"+s],[],i),t[e](i),es(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let s=t.get(e);if(void 0===s)throw Error('"'+e+'" is not a registered '+i+".");return s}};class su{constructor(){this._init=void 0}notify(e,t,i,s){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;let a=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(a,e,t,i);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),r}_notify(e,t,i,s){for(let a of(s=s||{},e)){let e=a.plugin;if(!1===es(e[i],[t,s,a.options],e)&&s.cancelable)return!1}return!0}invalidate(){G(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,s=et(i.options&&i.options.plugins,{}),a=function(e){let t={},i=[],s=Object.keys(sc.plugins.items);for(let e=0;e<s.length;e++)i.push(sc.getPlugin(s[e]));let a=e.plugins||[];for(let e=0;e<a.length;e++){let s=a[e];-1===i.indexOf(s)&&(i.push(s),t[s.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==s||t?function(e,{plugins:t,localIds:i},s,a){let r=[],n=e.getContext();for(let o of t){var l;let t=o.id,h=(l=s[t],a||!1!==l?!0===l?{}:l:null);null!==h&&r.push({plugin:o,options:function(e,{plugin:t,local:i},s,a){let r=e.pluginScopeKeys(t),n=e.getOptionScopes(s,r);return i&&t.defaults&&n.push(t.defaults),e.createResolver(n,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(e.config,{plugin:o,local:i[t]},h,n)})}return r}(e,a,s,t):[]}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,s=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function sg(e,t){let i=tr.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function sm(e){if("x"===e||"y"===e||"r"===e)return e}function sp(e,...t){if(sm(e))return e;for(let s of t){var i;let t=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&sm(e[0].toLowerCase());if(t)return t}throw Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function sx(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function sf(e){let t,i,s,a,r=e.options||(e.options={});r.plugins=et(r.plugins,{}),t=tt[e.type]||{scales:{}},i=r.scales||{},s=sg(e.type,r),a=Object.create(null),Object.keys(i).forEach(r=>{let n=i[r];if(!Q(n))return console.error(`Invalid scale configuration for scale: ${r}`);if(n._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);let l=sp(r,n,function(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return sx(e,"x",i[0])||sx(e,"y",i[0])}return{}}(r,e),tr.scales[n.type]),o=l===s?"_index_":"_value_",h=t.scales||{};a[r]=ed(Object.create(null),[{axis:l},n,h[l],h[o]])}),e.data.datasets.forEach(t=>{let s=t.type||e.type,n=t.indexAxis||sg(s,r),l=(tt[s]||{}).scales||{};Object.keys(l).forEach(e=>{let s,r=(s=e,"_index_"===e?s=n:"_value_"===e&&(s="x"===n?"y":"x"),s),o=t[r+"AxisID"]||r;a[o]=a[o]||Object.create(null),ed(a[o],[{axis:r},i[o],l[e]])})}),Object.keys(a).forEach(e=>{let t=a[e];ed(t,[tr.scales[t.type],tr.scale])}),r.scales=a}function sb(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}let sy=new Map,sv=new Set;function sw(e,t){let i=sy.get(e);return i||(i=t(),sy.set(e,i),sv.add(i)),i}let s_=(e,t,i)=>{let s=eg(t,i);void 0!==s&&e.add(s)};class sN{constructor(e){this._config=function(e){return(e=e||{}).data=sb(e.data),sf(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=sb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),sf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return sw(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return sw(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return sw(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return sw(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){let{options:s,type:a}=this,r=this._cachedScopes(e,i),n=r.get(t);if(n)return n;let l=new Set;t.forEach(t=>{e&&(l.add(e),t.forEach(t=>s_(l,e,t))),t.forEach(e=>s_(l,s,e)),t.forEach(e=>s_(l,tt[a]||{},e)),t.forEach(e=>s_(l,tr,e)),t.forEach(e=>s_(l,ti,e))});let o=Array.from(l);return 0===o.length&&o.push(Object.create(null)),sv.has(t)&&r.set(t,o),o}chartOptionScopes(){let{options:e,type:t}=this;return[e,tt[t]||{},tr.datasets[t]||{},{type:t},tr,ti]}resolveNamedOptions(e,t,i,s=[""]){let a={$shared:!0},{resolver:r,subPrefixes:n}=sj(this._resolverCache,e,s),l=r;if(function(e,t){let{isScriptable:i,isIndexable:s}=tS(e);for(let a of t){let t=i(a),r=s(a),n=(r||t)&&e[a];if(t&&(ex(n)||sk(n))||r&&K(n))return!0}return!1}(r,t)){a.$shared=!1,i=ex(i)?i():i;let t=this.createResolver(e,i,n);l=tP(r,i,t)}for(let e of t)a[e]=l[e];return a}createResolver(e,t,i=[""],s){let{resolver:a}=sj(this._resolverCache,e,i);return Q(t)?tP(a,t,void 0,s):a}}function sj(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));let a=i.join(),r=s.get(a);return r||(r={resolver:tC(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},s.set(a,r)),r}let sk=e=>Q(e)&&Object.getOwnPropertyNames(e).some(t=>ex(e[t])),sM=["top","bottom","left","right","chartArea"];function sT(e,t){return"top"===e||"bottom"===e||-1===sM.indexOf(e)&&"x"===t}function sC(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function sP(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),es(i&&i.onComplete,[e],t)}function sS(e){let t=e.chart,i=t.options.animation;es(i&&i.onProgress,[e],t)}function sD(e){return tH()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}let sA={},sL=e=>{let t=sD(e);return Object.values(sA).filter(e=>e.canvas===t).pop()};class sE{static defaults=tr;static instances=sA;static overrides=tt;static registry=sc;static version="4.5.1";static getChart=sL;static register(...e){sc.add(...e),sR()}static unregister(...e){sc.remove(...e),sR()}constructor(e,t){const i=this.config=new sN(t),s=sD(e),a=sL(s);if(a)throw Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||(!tH()||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas?iK:st)),this.platform.updateConfig(i);const n=this.platform.acquireContext(s,r.aspectRatio),l=n&&n.canvas,o=l&&l.height,h=l&&l.width;if(this.id=X(),this.ctx=n,this.canvas=l,this.width=h,this.height=o,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new su,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),r.resizeDelay||0),this._dataChanges=[],sA[this.id]=this,!n||!l)return void console.error("Failed to create chart: can't acquire context from the given item");ir.listen(this,"complete",sP),ir.listen(this,"progress",sS),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return G(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return sc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tQ(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return to(this.canvas,this.ctx),this}stop(){return ir.stop(this),this}resize(e,t){ir.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,a),n=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,tQ(this,n,!0)&&(this.notifyPlugins("resize",{size:r}),es(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){ea(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){let e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{}),a=[];t&&(a=a.concat(Object.keys(t).map(e=>{let i=t[e],s=sp(e,i),a="r"===s,r="x"===s;return{options:i,dposition:a?"chartArea":r?"bottom":"left",dtype:a?"radialLinear":r?"category":"linear"}}))),ea(a,t=>{let a=t.options,r=a.id,n=sp(r,a),l=et(a.type,t.dtype);(void 0===a.position||sT(a.position,n)!==sT(t.dposition))&&(a.position=t.dposition),s[r]=!0;let o=null;r in i&&i[r].type===l?o=i[r]:i[(o=new(sc.getScale(l))({id:r,type:l,ctx:this.ctx,chart:this})).id]=o,o.init(a,e)}),ea(s,(e,t)=>{e||delete i[t]}),ea(i,e=>{iX.configure(this,e,e.options),iX.addBox(this,e)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(sC("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e,t,i=[],s=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=s.length;e<t;e++){let t=s[e],a=this.getDatasetMeta(e),r=t.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=r,a.indexAxis=t.indexAxis||sg(r,this.options),a.order=t.order||0,a.index=e,a.label=""+t.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{let t=sc.getController(r),{datasetElementType:s,dataElementType:n}=tr.datasets[r];Object.assign(t,{dataElementType:sc.getElement(n),datasetElementType:s&&sc.getElement(s)}),a.controller=new t(this,e),i.push(a.controller)}}return this._updateMetasets(),i}_resetElements(){ea(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let e=0,t=this.data.datasets.length;e<t;e++){let{controller:t}=this.getDatasetMeta(e),i=!s&&-1===a.indexOf(t);t.buildOrUpdateElements(i),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||ea(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sC("z","_idx"));let{_active:n,_lastEvent:l}=this;l?this._eventHandler(l,!0):n.length&&this._updateHoverStyles(n,n,!0),this.render()}_updateScales(){ea(this.scales,e=>{iX.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options;ef(new Set(Object.keys(this._listeners)),new Set(e.events))&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this;for(let{method:i,start:s,count:a}of this._getUniformDataChanges()||[]){var t="_removeElements"===i?-a:a;for(let i of Object.keys(e)){let a=+i;if(a>=s){let r=e[i];delete e[i],(t>0||a>s)&&(e[a+t]=r)}}}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),s=i(0);for(let e=1;e<t;e++)if(!ef(s,i(e)))return;return Array.from(s).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;iX.update(this,this.width,this.height,e);let t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ea(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ex(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ir.has(this)?this.attached&&!ir.running(this)&&ir.start(this):(this.draw(),sP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t,i,s=this._sortedMetasets,a=[];for(t=0,i=s.length;t<i;++t){let i=s[t];(!e||i.visible)&&a.push(i)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=ia(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(s&&tu(t,s),e.controller.draw(),s&&tg(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return tc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){let a=iV.modes[t];return"function"==typeof a?a(this,e,i,s):[]}getDatasetMeta(e){let t=this.data.datasets[e],i=this._metasets,s=i.filter(e=>e&&e._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=tT(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){let s=i?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,s);ep(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(a,{visible:i}),this.update(t=>t.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ir.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),to(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete sA[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,i=(i,s)=>{t.addEventListener(this,i,s),e[i]=s},s=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};ea(this.options.events,e=>i(e,s))}bindResponsiveEvents(){let e;this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,s=(e,s)=>{i.addEventListener(this,e,s),t[e]=s},a=(e,s)=>{t[e]&&(i.removeEventListener(this,e,s),delete t[e])},r=(e,t)=>{this.canvas&&this.resize(e,t)},n=()=>{a("attach",n),this.attached=!0,this.resize(),s("resize",r),s("detach",e)};e=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),s("attach",n)},i.isAttached(this.canvas)?n():e()}unbindEvents(){ea(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ea(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){let s,a,r,n=i?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+n+"DatasetHoverStyle"](),a=0,r=e.length;a<r;++a){let t=(s=e[a])&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],i=e.map(({datasetIndex:e,index:t})=>{let i=this.getDatasetMeta(e);if(!i)throw Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}});er(i,t)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){let s=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=a(t,e),n=i?e:a(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),n.length&&s.mode&&this.updateHoverStyle(n,s.mode,!0)}_eventHandler(e,t){let i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;let a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){var s;let{_active:a=[],options:r}=this,n=this._getActiveElements(e,a,i,t),l="mouseup"===e.type||"click"===e.type||"contextmenu"===e.type,o=(s=this._lastEvent,i&&"mouseout"!==e.type?l?s:e:null);i&&(this._lastEvent=null,es(r.onHover,[e,n,this],this),l&&es(r.onClick,[e,n,this],this));let h=!er(n,a);return(h||t)&&(this._active=n,this._updateHoverStyles(n,a,t)),this._lastEvent=o,h}_getActiveElements(e,t,i,s){if("mouseout"===e.type)return[];if(!i)return t;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}}function sR(){return ea(sE.instances,e=>e._plugins.invalidate())}function sO(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function s$(e,t,i,s,a,r){var n,l,o,h;let d,c,u,g,{x:m,y:p,startAngle:x,pixelMargin:f,innerRadius:b}=t,y=Math.max(t.outerRadius+s+i-f,0),v=b>0?b+s+i+f:0,w=0,_=a-x;if(s){let e=y>0?y-s:0,t=((b>0?b-s:0)+e)/2;w=(_-(0!==t?_*t/(t+s):_))/2}let N=Math.max(.001,_*y-i/eb)/y,j=(_-N)/2,k=x+j+w,M=a-j-w,{outerStart:T,outerEnd:C,innerStart:P,innerEnd:S}=(n=t,l=v,o=y,h=M-k,d=tw(n.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),u=Math.min(c=(o-l)/2,h*l/2),{outerStart:(g=e=>{let t=(o-Math.min(c,e))*h/2;return eV(e,0,Math.min(c,t))})(d.outerStart),outerEnd:g(d.outerEnd),innerStart:eV(d.innerStart,0,u),innerEnd:eV(d.innerEnd,0,u)}),D=y-T,A=y-C,L=k+T/D,E=M-C/A,R=v+P,O=v+S,$=k+P/R,F=M-S/O;if(e.beginPath(),r){let t=(L+E)/2;if(e.arc(m,p,y,L,t),e.arc(m,p,y,t,E),C>0){let t=sO(A,E,m,p);e.arc(t.x,t.y,C,E,M+eN)}let i=sO(O,M,m,p);if(e.lineTo(i.x,i.y),S>0){let t=sO(O,F,m,p);e.arc(t.x,t.y,S,M+eN,F+Math.PI)}let s=(M-S/v+(k+P/v))/2;if(e.arc(m,p,v,M-S/v,s,!0),e.arc(m,p,v,s,k+P/v,!0),P>0){let t=sO(R,$,m,p);e.arc(t.x,t.y,P,$+Math.PI,k-eN)}let a=sO(D,k,m,p);if(e.lineTo(a.x,a.y),T>0){let t=sO(D,L,m,p);e.arc(t.x,t.y,T,k-eN,L)}}else{e.moveTo(m,p);let t=Math.cos(L)*y+m,i=Math.sin(L)*y+p;e.lineTo(t,i);let s=Math.cos(E)*y+m,a=Math.sin(E)*y+p;e.lineTo(s,a)}e.closePath()}class sF extends si{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let{angle:s,distance:a}=eE(this.getProps(["x","y"],i),{x:e,y:t}),{startAngle:r,endAngle:n,innerRadius:l,outerRadius:o,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,c=et(h,n-r),u=eF(s,r,n)&&r!==n,g=c>=ey||u,m=ez(a,l+d,o+d);return g&&m}getCenterPoint(e){let{x:t,y:i,startAngle:s,endAngle:a,innerRadius:r,outerRadius:n}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:o}=this.options,h=(s+a)/2,d=(r+n+o+l)/2;return{x:t+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,s=(t.offset||0)/4,a=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin=.33*("inner"===t.borderAlign),this.fullCircles=i>ey?Math.floor(i/ey):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let n=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(n)*s,Math.sin(n)*s);let l=s*(1-Math.sin(Math.min(eb,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,s,a){let{fullCircles:r,startAngle:n,circumference:l}=t,o=t.endAngle;if(r){s$(e,t,i,s,o,a);for(let t=0;t<r;++t)e.fill();isNaN(l)||(o=n+(l%ey||ey))}s$(e,t,i,s,o,a),e.fill()}(e,this,l,a,r),function(e,t,i,s,a){let{fullCircles:r,startAngle:n,circumference:l,options:o}=t,{borderWidth:h,borderJoinStyle:d,borderDash:c,borderDashOffset:u,borderRadius:g}=o,m="inner"===o.borderAlign;if(!h)return;e.setLineDash(c||[]),e.lineDashOffset=u,m?(e.lineWidth=2*h,e.lineJoin=d||"round"):(e.lineWidth=h,e.lineJoin=d||"bevel");let p=t.endAngle;if(r){s$(e,t,i,s,p,a);for(let t=0;t<r;++t)e.stroke();isNaN(l)||(p=n+(l%ey||ey))}m&&function(e,t,i){let{startAngle:s,pixelMargin:a,x:r,y:n,outerRadius:l,innerRadius:o}=t,h=a/l;e.beginPath(),e.arc(r,n,l,s-h,i+h),o>a?(h=a/o,e.arc(r,n,o,i+h,s-h,!0)):e.arc(r,n,a,i+eN,s-eN),e.closePath(),e.clip()}(e,t,p),o.selfJoin&&p-n>=eb&&0===g&&"miter"!==d&&function(e,t,i){let{startAngle:s,x:a,y:r,outerRadius:n,innerRadius:l,options:o}=t,{borderWidth:h,borderJoinStyle:d}=o,c=Math.min(h/n,e$(s-i));if(e.beginPath(),e.arc(a,r,n-h/2,s+c/2,i-c/2),l>0){let t=Math.min(h/l,e$(s-i));e.arc(a,r,l+h/2,i-t/2,s+t/2,!0)}else{let t=Math.min(h/2,n*e$(s-i));if("round"===d)e.arc(a,r,t,i-eb/2,s+eb/2,!0);else if("bevel"===d){let n=2*t*t,l=-n*Math.cos(i+eb/2)+a,o=-n*Math.sin(i+eb/2)+r,h=n*Math.cos(s+eb/2)+a,d=n*Math.sin(s+eb/2)+r;e.lineTo(l,o),e.lineTo(h,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),r||(s$(e,t,i,s,p,a),e.stroke())}(e,this,l,a,r),e.restore()}}function sV(e,t,i=t){e.lineCap=et(i.borderCapStyle,t.borderCapStyle),e.setLineDash(et(i.borderDash,t.borderDash)),e.lineDashOffset=et(i.borderDashOffset,t.borderDashOffset),e.lineJoin=et(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=et(i.borderWidth,t.borderWidth),e.strokeStyle=et(i.borderColor,t.borderColor)}function sz(e,t,i){e.lineTo(i.x,i.y)}function sI(e,t,i={}){let s=e.length,{start:a=0,end:r=s-1}=i,{start:n,end:l}=t,o=Math.max(a,n),h=Math.min(r,l);return{count:s,start:o,loop:t.loop,ilen:h<o&&!(a<n&&r<n||a>l&&r>l)?s+h-o:h-o}}function sB(e,t,i,s){let a,r,n,{points:l,options:o}=t,{count:h,start:d,loop:c,ilen:u}=sI(l,i,s),g=o.stepped?tm:o.tension||"monotone"===o.cubicInterpolationMode?tp:sz,{move:m=!0,reverse:p}=s||{};for(a=0;a<=u;++a)(r=l[(d+(p?u-a:a))%h]).skip||(m?(e.moveTo(r.x,r.y),m=!1):g(e,n,r,p,o.stepped),n=r);return c&&g(e,n,r=l[(d+(p?u:0))%h],p,o.stepped),!!c}function sW(e,t,i,s){let a,r,n,l,o,h,d=t.points,{count:c,start:u,ilen:g}=sI(d,i,s),{move:m=!0,reverse:p}=s||{},x=0,f=0,b=e=>(u+(p?g-e:e))%c,y=()=>{l!==o&&(e.lineTo(x,o),e.lineTo(x,l),e.lineTo(x,h))};for(m&&(r=d[b(0)],e.moveTo(r.x,r.y)),a=0;a<=g;++a){if((r=d[b(a)]).skip)continue;let t=r.x,i=r.y,s=0|t;s===n?(i<l?l=i:i>o&&(o=i),x=(f*x+t)/++f):(y(),e.lineTo(t,i),n=s,f=0,l=o=i),h=i}y()}function sH(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i?sB:sW}let sq="function"==typeof Path2D;class sU extends si{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;!function(e,t,i,s,a){let r,n,l,o;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)!function(e,t="x"){let i,s,a,r=tB(t),n=e.length,l=Array(n).fill(0),o=Array(n),h=tI(e,0);for(i=0;i<n;++i)if(s=a,a=h,h=tI(e,i+1),a){if(h){let e=h[t]-a[t];l[i]=0!==e?(h[r]-a[r])/e:0}o[i]=s?h?eT(l[i-1])!==eT(l[i])?0:(l[i-1]+l[i])/2:l[i-1]:l[i]}!function(e,t,i){let s,a,r,n,l,o=e.length,h=tI(e,0);for(let d=0;d<o-1;++d)if(l=h,h=tI(e,d+1),l&&h){if(eC(t[d],0,tz)){i[d]=i[d+1]=0;continue}(n=Math.pow(s=i[d]/t[d],2)+Math.pow(a=i[d+1]/t[d],2))<=9||(r=3/Math.sqrt(n),i[d]=s*r*t[d],i[d+1]=a*r*t[d])}}(e,l,o),function(e,t,i="x"){let s,a,r,n=tB(i),l=e.length,o=tI(e,0);for(let h=0;h<l;++h){if(a=r,r=o,o=tI(e,h+1),!r)continue;let l=r[i],d=r[n];a&&(s=(l-a[i])/3,r[`cp1${i}`]=l-s,r[`cp1${n}`]=d-s*t[h]),o&&(s=(o[i]-l)/3,r[`cp2${i}`]=l+s,r[`cp2${n}`]=d+s*t[h])}}(e,o,t)}(e,a);else{let i=s?e[e.length-1]:e[0];for(r=0,n=e.length;r<n;++r)o=function(e,t,i,s){let a=e.skip?t:e,r=i.skip?t:i,n=eR(t,a),l=eR(r,t),o=n/(n+l),h=l/(n+l);o=isNaN(o)?0:o,h=isNaN(h)?0:h;let d=s*o,c=s*h;return{previous:{x:t.x-d*(r.x-a.x),y:t.y-d*(r.y-a.y)},next:{x:t.x+c*(r.x-a.x),y:t.y+c*(r.y-a.y)}}}(i,l=e[r],e[Math.min(r+1,n-!s)%n],t.tension),l.cp1x=o.previous.x,l.cp1y=o.previous.y,l.cp2x=o.next.x,l.cp2y=o.next.y,i=l}t.capBezierPoints&&function(e,t){let i,s,a,r,n,l=tc(e[0],t);for(i=0,s=e.length;i<s;++i)n=r,r=l,l=i<s-1&&tc(e[i+1],t),r&&(a=e[i],n&&(a.cp1x=tW(a.cp1x,t.left,t.right),a.cp1y=tW(a.cp1y,t.top,t.bottom)),l&&(a.cp2x=tW(a.cp2x,t.left,t.right),a.cp2y=tW(a.cp2y,t.top,t.bottom)))}(e,i)}(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){let i=e.points,s=e.options.spanGaps,a=i.length;if(!a)return[];let r=!!e._loop,{start:n,end:l}=function(e,t,i,s){let a=0,r=t-1;if(i&&!s)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,i&&(r+=a);r>a&&e[r%t].skip;)r--;return{start:a,end:r%=t}}(i,a,r,s);if(!0===s)return it(e,[{start:n,end:l,loop:r}],i,t);let o=l<n?l+a:l,h=!!e._fullLoop&&0===n&&l===a-1;return it(e,function(e,t,i,s){let a,r=e.length,n=[],l=t,o=e[t];for(a=t+1;a<=i;++a){let i=e[a%r];i.skip||i.stop?o.skip||(s=!1,n.push({start:t%r,end:(a-1)%r,loop:s}),t=l=i.stop?a:null):(l=a,o.skip&&(t=a)),o=i}return null!==l&&n.push({start:t%r,end:l%r,loop:s}),n}(i,n,o,h),i,t)}(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){let i,s,a=this.options,r=e[t],n=this.points,l=ie(this,{property:t,start:r,end:r});if(!l.length)return;let o=[],h=a.stepped?t2:a.tension||"monotone"===a.cubicInterpolationMode?t5:t1;for(i=0,s=l.length;i<s;++i){let{start:s,end:d}=l[i],c=n[s],u=n[d];if(c===u){o.push(c);continue}let g=Math.abs((r-c[t])/(u[t]-c[t])),m=h(c,u,g,a.stepped);m[t]=e[t],o.push(m)}return 1===o.length?o[0]:o}pathSegment(e,t,i){return sH(this)(e,this,t,i)}path(e,t,i){let s=this.segments,a=sH(this),r=this._loop;for(let n of(t=t||0,i=i||this.points.length-t,s))r&=a(e,this,n,{start:t,end:t+i-1});return!!r}draw(e,t,i,s){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),function(e,t,i,s){if(sq&&!t.options.segment){let a;(a=t._path)||(a=t._path=new Path2D,t.path(a,i,s)&&a.closePath()),sV(e,t.options),e.stroke(a)}else!function(e,t,i,s){let{segments:a,options:r}=t,n=sH(t);for(let l of a)sV(e,r,l.style),e.beginPath(),n(e,t,l,{start:i,end:i+s-1})&&e.closePath(),e.stroke()}(e,t,i,s)}(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sY(e,t,i,s){let a=e.options,{[i]:r}=e.getProps([i],s);return Math.abs(t-r)<a.radius+a.hitRadius}class sZ extends si{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){let s=this.options,{x:a,y:r}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return sY(this,e,"x",t)}inYRange(e,t){return sY(this,e,"y",t)}getCenterPoint(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0,i=(t=Math.max(t,t&&e.hoverRadius||0))&&e.borderWidth||0;return(t+i)*2}draw(e,t){let i=this.options;!this.skip&&!(i.radius<.1)&&tc(this,t,this.size(i)/2)&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,th(e,i,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}function sX(e,t){let i,s,a,r,n,{x:l,y:o,base:h,width:d,height:c}=e.getProps(["x","y","base","width","height"],t);return e.horizontal?(n=c/2,i=Math.min(l,h),s=Math.max(l,h),a=o-n,r=o+n):(i=l-(n=d/2),s=l+n,a=Math.min(o,h),r=Math.max(o,h)),{left:i,top:a,right:s,bottom:r}}function sG(e,t,i,s){return e?0:eV(t,i,s)}function sK(e,t,i,s){let a=null===t,r=null===i,n=e&&!(a&&r)&&sX(e,s);return n&&(a||ez(t,n.left,n.right))&&(r||ez(i,n.top,n.bottom))}function sQ(e,t){e.rect(t.x,t.y,t.w,t.h)}function sJ(e,t,i={}){let s=e.x!==i.x?-t:0,a=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-s,n=(e.y+e.h!==i.y+i.h?t:0)-a;return{x:e.x+s,y:e.y+a,w:e.w+r,h:e.h+n,radius:e.radius}}class s0 extends si{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){var t,i,s;let a,r,n,l,o,h,d,c,{inflateAmount:u,options:{borderColor:g,backgroundColor:m}}=this,{inner:p,outer:x}=(r=(a=sX(this)).right-a.left,n=a.bottom-a.top,t=r/2,i=n/2,l=this.options.borderWidth,o=this.borderSkipped,h=t_(l),d={t:sG(o.top,h.top,0,i),r:sG(o.right,h.right,0,t),b:sG(o.bottom,h.bottom,0,i),l:sG(o.left,h.left,0,t)},c=function(e,t,i){let{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,r=tN(a),n=Math.min(t,i),l=e.borderSkipped,o=s||Q(a);return{topLeft:sG(!o||l.top||l.left,r.topLeft,0,n),topRight:sG(!o||l.top||l.right,r.topRight,0,n),bottomLeft:sG(!o||l.bottom||l.left,r.bottomLeft,0,n),bottomRight:sG(!o||l.bottom||l.right,r.bottomRight,0,n)}}(this,r/2,n/2),{outer:{x:a.left,y:a.top,w:r,h:n,radius:c},inner:{x:a.left+d.l,y:a.top+d.t,w:r-d.l-d.r,h:n-d.t-d.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(d.t,d.l)),topRight:Math.max(0,c.topRight-Math.max(d.t,d.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(d.b,d.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(d.b,d.r))}}}),f=(s=x.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?tf:sQ;e.save(),(x.w!==p.w||x.h!==p.h)&&(e.beginPath(),f(e,sJ(x,u,p)),e.clip(),f(e,sJ(p,-u,x)),e.fillStyle=g,e.fill("evenodd")),e.beginPath(),f(e,sJ(p,u)),e.fillStyle=m,e.fill(),e.restore()}inRange(e,t,i){return sK(this,e,t,i)}inXRange(e,t){return sK(this,e,null,t)}inYRange(e,t){return sK(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+s)/2:t,y:a?i:(i+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}let s1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],s2=s1.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function s5(e,t,i,s){if(s)return;let a=t[e],r=i[e];return"angle"===e&&(a=e$(a),r=e$(r)),{property:e,start:a,end:r}}function s3(e,t,i){for(;t>e;t--){let e=i[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function s6(e,t,i,s){return e&&t?s(e[i],t[i]):e?e[i]:t?t[i]:0}function s4(e,t){let i=[],s=!1;return K(e)?(s=!0,i=e):i=function(e,t){let{x:i=null,y:s=null}=e||{},a=t.points,r=[];return t.segments.forEach(({start:e,end:t})=>{t=s3(e,t,a);let n=a[e],l=a[t];null!==s?(r.push({x:n.x,y:s}),r.push({x:l.x,y:s})):null!==i&&(r.push({x:i,y:n.y}),r.push({x:i,y:l.y}))}),r}(e,t),i.length?new sU({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function s8(e){return e&&!1!==e.fill}class s7{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:s,y:a,radius:r}=this;return t=t||{start:0,end:ey},e.arc(s,a,r,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:s}=this,a=e.angle;return{x:t+Math.cos(a)*s,y:i+Math.sin(a)*s,angle:a}}}function s9(e,t,i){let s=function(e){var t,i,s;let{chart:a,fill:r,line:n}=e;if(J(r)){let e;return t=a,i=r,(e=t.getDatasetMeta(i))&&t.isDatasetVisible(i)?e.dataset:null}if("stack"===r)return function(e){let{scale:t,index:i,line:s}=e,a=[],r=s.segments,n=s.points,l=function(e,t){let i=[],s=e.getMatchingVisibleMetas("line");for(let e=0;e<s.length;e++){let a=s[e];if(a.index===t)break;a.hidden||i.unshift(a.dataset)}return i}(t,i);l.push(s4({x:null,y:t.bottom},s));for(let e=0;e<r.length;e++){let t=r[e];for(let e=t.start;e<=t.end;e++)!function(e,t,i){let s=[];for(let a=0;a<i.length;a++){let{first:r,last:n,point:l}=function(e,t,i){let s=e.interpolate(t,"x");if(!s)return{};let a=s.x,r=e.segments,n=e.points,l=!1,o=!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[t.start].x,s=n[t.end].x;if(ez(a,i,s)){l=a===i,o=a===s;break}}return{first:l,last:o,point:s}}(i[a],t,"x");if(l&&(!r||!n)){if(r)s.unshift(l);else if(e.push(l),!n)break}}e.push(...s)}(a,n[e],l)}return new sU({points:a,options:{}})}(e);if("shape"===r)return!0;let l=((s=e).scale||{}).getPointPositionForValue?function(e){let{scale:t,fill:i}=e,s=t.options,a=t.getLabels().length,r=s.reverse?t.max:t.min,n="start"===i?r:"end"===i?t.options.reverse?t.min:t.max:Q(i)?i.value:t.getBaseValue(),l=[];if(s.grid.circular){let e=t.getPointPositionForValue(0,r);return new s7({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(n)})}for(let e=0;e<a;++e)l.push(t.getPointPositionForValue(e,n));return l}(s):function(e){let t,{scale:i={},fill:s}=e,a=(t=null,"start"===s?t=i.bottom:"end"===s?t=i.top:Q(s)?t=i.getPixelForValue(s.value):i.getBasePixel&&(t=i.getBasePixel()),t);if(J(a)){let e=i.isHorizontal();return{x:e?a:null,y:e?null:a}}return null}(s);return l instanceof s7?l:s4(l,n)}(t),{chart:a,index:r,line:n,scale:l,axis:o}=t,h=n.options,d=h.fill,c=h.backgroundColor,{above:u=c,below:g=c}=d||{},m=a.getDatasetMeta(r),p=ia(a,m);s&&n.points.length&&(tu(e,i),function(e,t){let{line:i,target:s,above:a,below:r,area:n,scale:l,clip:o}=t,h=i._loop?"angle":t.axis;e.save();let d=r;r!==a&&("x"===h?(ae(e,s,n.top),ai(e,{line:i,target:s,color:a,scale:l,property:h,clip:o}),e.restore(),e.save(),ae(e,s,n.bottom)):"y"===h&&(at(e,s,n.left),ai(e,{line:i,target:s,color:r,scale:l,property:h,clip:o}),e.restore(),e.save(),at(e,s,n.right),d=a)),ai(e,{line:i,target:s,color:d,scale:l,property:h,clip:o}),e.restore()}(e,{line:n,target:s,above:u,below:g,area:i,scale:l,axis:o,clip:p}),tg(e))}function ae(e,t,i){let{segments:s,points:a}=t,r=!0,n=!1;for(let l of(e.beginPath(),s)){let{start:s,end:o}=l,h=a[s],d=a[s3(s,o,a)];r?(e.moveTo(h.x,h.y),r=!1):(e.lineTo(h.x,i),e.lineTo(h.x,h.y)),(n=!!t.pathSegment(e,l,{move:n}))?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function at(e,t,i){let{segments:s,points:a}=t,r=!0,n=!1;for(let l of(e.beginPath(),s)){let{start:s,end:o}=l,h=a[s],d=a[s3(s,o,a)];r?(e.moveTo(h.x,h.y),r=!1):(e.lineTo(i,h.y),e.lineTo(h.x,h.y)),(n=!!t.pathSegment(e,l,{move:n}))?e.closePath():e.lineTo(i,d.y)}e.lineTo(i,t.first().y),e.closePath(),e.clip()}function ai(e,t){let{line:i,target:s,property:a,color:r,scale:n,clip:l}=t;for(let{source:t,target:o,start:h,end:d}of function(e,t,i){let s=e.segments,a=e.points,r=t.points,n=[];for(let e of s){let{start:s,end:l}=e;l=s3(s,l,a);let o=s5(i,a[s],a[l],e.loop);if(!t.segments){n.push({source:e,target:o,start:a[s],end:a[l]});continue}for(let s of ie(t,o)){let t=s5(i,r[s.start],r[s.end],s.loop);for(let r of t9(e,a,t))n.push({source:r,target:s,start:{[i]:s6(o,t,"start",Math.max)},end:{[i]:s6(o,t,"end",Math.min)}})}}return n}(i,s,a)){let c,{style:{backgroundColor:u=r}={}}=t,g=!0!==s;e.save(),e.fillStyle=u,function(e,t,i,s){let a=t.chart.chartArea,{property:r,start:n,end:l}=s||{};if("x"===r||"y"===r){let t,s,o,h;"x"===r?(t=n,s=a.top,o=l,h=a.bottom):(t=a.left,s=n,o=a.right,h=l),e.beginPath(),i&&(t=Math.max(t,i.left),o=Math.min(o,i.right),s=Math.max(s,i.top),h=Math.min(h,i.bottom)),e.rect(t,s,o-t,h-s),e.clip()}}(e,n,l,g&&s5(a,h,d)),e.beginPath();let m=!!i.pathSegment(e,t);if(g){m?e.closePath():as(e,s,d,a);let t=!!s.pathSegment(e,o,{move:m,reverse:!0});(c=m&&t)||as(e,s,h,a)}e.closePath(),e.fill(c?"evenodd":"nonzero"),e.restore()}}function as(e,t,i,s){let a=t.interpolate(i,s);a&&e.lineTo(a.x,a.y)}var aa={id:"filler",afterDatasetsUpdate(e,t,i){let s,a,r,n,l=(e.data.datasets||[]).length,o=[];for(a=0;a<l;++a)r=(s=e.getDatasetMeta(a)).dataset,n=null,r&&r.options&&r instanceof sU&&(n={visible:e.isDatasetVisible(a),index:a,fill:function(e,t,i){var s,a,r,n;let l=function(e){let t=e.options,i=t.fill,s=et(i&&i.target,i);return void 0===s&&(s=!!t.backgroundColor),!1!==s&&null!==s&&(!0===s?"origin":s)}(e);if(Q(l))return!isNaN(l.value)&&l;let o=parseFloat(l);return J(o)&&Math.floor(o)===o?(s=l[0],a=t,r=o,n=i,("-"===s||"+"===s)&&(r=a+r),r!==a&&!(r<0)&&!(r>=n)&&r):["origin","start","end","stack","shape"].indexOf(l)>=0&&l}(r,a,l),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:r}),s.$filler=n,o.push(n);for(a=0;a<l;++a)(n=o[a])&&!1!==n.fill&&(n.fill=function(e,t,i){let s,a=e[t].fill,r=[t];if(!i)return a;for(;!1!==a&&-1===r.indexOf(a);){if(!J(a))return a;if(!(s=e[a]))break;if(s.visible)return a;r.push(a),a=s.fill}return!1}(o,a,i.propagate))},beforeDraw(e,t,i){let s="beforeDraw"===i.drawTime,a=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let t=a.length-1;t>=0;--t){let i=a[t].$filler;i&&(i.line.updateControlPoints(r,i.axis),s&&i.fill&&s9(e.ctx,i,r))}},beforeDatasetsDraw(e,t,i){if("beforeDatasetsDraw"!==i.drawTime)return;let s=e.getSortedVisibleDatasetMetas();for(let t=s.length-1;t>=0;--t){let i=s[t].$filler;s8(i)&&s9(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,i){let s=t.meta.$filler;s8(s)&&"beforeDatasetDraw"===i.drawTime&&s9(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};let ar=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}};class an extends si{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=es(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let e,t,{options:i,ctx:s}=this;if(!i.display){this.width=this.height=0;return}let a=i.labels,r=tk(a.font),n=r.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:h}=ar(a,n);s.font=r.string,this.isHorizontal()?(e=this.maxWidth,t=this._fitRows(l,n,o,h)+10):(t=this.maxHeight,e=this._fitCols(l,r,o,h)+10),this.width=Math.min(e,i.maxWidth||this.maxWidth),this.height=Math.min(t,i.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){let{ctx:a,maxWidth:r,options:{labels:{padding:n}}}=this,l=this.legendHitBoxes=[],o=this.lineWidths=[0],h=s+n,d=e;a.textAlign="left",a.textBaseline="middle";let c=-1,u=-h;return this.legendItems.forEach((e,g)=>{let m=i+t/2+a.measureText(e.text).width;(0===g||o[o.length-1]+m+2*n>r)&&(d+=h,o[o.length-(g>0?0:1)]=0,u+=h,c++),l[g]={left:0,top:u,row:c,width:m,height:s},o[o.length-1]+=m+n}),d}_fitCols(e,t,i,s){let{ctx:a,maxHeight:r,options:{labels:{padding:n}}}=this,l=this.legendHitBoxes=[],o=this.columnSizes=[],h=r-e,d=n,c=0,u=0,g=0,m=0;return this.legendItems.forEach((e,r)=>{var p,x,f,b,y,v,w,_,N,j,k,M;let T,C,{itemWidth:P,itemHeight:S}=(p=i,x=t,f=a,b=e,y=s,{itemWidth:(v=b,w=p,_=x,N=f,(T=v.text)&&"string"!=typeof T&&(T=T.reduce((e,t)=>e.length>t.length?e:t)),w+_.size/2+N.measureText(T).width),itemHeight:(j=y,k=b,M=x.lineHeight,C=j,"string"!=typeof k.text&&(C=al(k,M)),C)});r>0&&u+S+2*n>h&&(d+=c+n,o.push({width:c,height:u}),g+=c+n,m++,c=u=0),l[r]={left:g,top:u,col:m,width:P,height:S},c=Math.max(c,P),u+=S+n}),d+=c,o.push({width:c,height:u}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:a}}=this,r=t3(a,this.left,this.width);if(this.isHorizontal()){let a=0,n=eG(i,this.left+s,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,n=eG(i,this.left+s,this.right-this.lineWidths[a])),l.top+=this.top+e+s,l.left=r.leftForLtr(r.x(n),l.width),n+=l.width+s}else{let a=0,n=eG(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,n=eG(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),l.top=n,l.left+=this.left+s,l.left=r.leftForLtr(r.x(l.left),l.width),n+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let e=this.ctx;tu(e,this),this._draw(),tg(e)}}_draw(){let e,{options:t,columnSizes:i,lineWidths:s,ctx:a}=this,{align:r,labels:n}=t,l=tr.color,o=t3(t.rtl,this.left,this.width),h=tk(n.font),{padding:d}=n,c=h.size,u=c/2;this.drawTitle(),a.textAlign=o.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;let{boxWidth:g,boxHeight:m,itemHeight:p}=ar(n,c),x=function(e,t,i){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;a.save();let s=et(i.lineWidth,1);if(a.fillStyle=et(i.fillStyle,l),a.lineCap=et(i.lineCap,"butt"),a.lineDashOffset=et(i.lineDashOffset,0),a.lineJoin=et(i.lineJoin,"miter"),a.lineWidth=s,a.strokeStyle=et(i.strokeStyle,l),a.setLineDash(et(i.lineDash,[])),n.usePointStyle)td(a,{radius:m*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:s},o.xPlus(e,g/2),t+u,n.pointStyleWidth&&g);else{let r=t+Math.max((c-m)/2,0),n=o.leftForLtr(e,g),l=tN(i.borderRadius);a.beginPath(),Object.values(l).some(e=>0!==e)?tf(a,{x:n,y:r,w:g,h:m,radius:l}):a.rect(n,r,g,m),a.fill(),0!==s&&a.stroke()}a.restore()},f=function(e,t,i){tx(a,i.text,e,t+p/2,h,{strikethrough:i.hidden,textAlign:o.textAlign(i.textAlign)})},b=this.isHorizontal(),y=this._computeTitleHeight();e=b?{x:eG(r,this.left+d,this.right-s[0]),y:this.top+d+y,line:0}:{x:this.left+d,y:eG(r,this.top+y+d,this.bottom-i[0].height),line:0},t6(this.ctx,t.textDirection);let v=p+d;this.legendItems.forEach((l,c)=>{var m,p;a.strokeStyle=l.fontColor,a.fillStyle=l.fontColor;let w=a.measureText(l.text).width,_=o.textAlign(l.textAlign||(l.textAlign=n.textAlign)),N=g+u+w,j=e.x,k=e.y;if(o.setWidth(this.width),b?c>0&&j+N+d>this.right&&(k=e.y+=v,e.line++,j=e.x=eG(r,this.left+d,this.right-s[e.line])):c>0&&k+v>this.bottom&&(j=e.x=j+i[e.line].width+d,e.line++,k=e.y=eG(r,this.top+y+d,this.bottom-i[e.line].height)),x(o.x(j),k,l),m=j+g+u,p=b?j+N:this.right,j=_===(t.rtl?"left":"right")?p:"center"===_?(m+p)/2:m,f(o.x(j),k,l),b)e.x+=N+d;else if("string"!=typeof l.text){let t=h.lineHeight;e.y+=al(l,t)+d}else e.y+=v}),t4(this.ctx,t.textDirection)}drawTitle(){let e,t=this.options,i=t.title,s=tk(i.font),a=tj(i.padding);if(!i.display)return;let r=t3(t.rtl,this.left,this.width),n=this.ctx,l=i.position,o=s.size/2,h=a.top+o,d=this.left,c=this.width;if(this.isHorizontal())c=Math.max(...this.lineWidths),e=this.top+h,d=eG(t.align,d,this.right-c);else{let i=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);e=h+eG(t.align,this.top,this.bottom-i-t.labels.padding-this._computeTitleHeight())}let u=eG(l,d,d+c);n.textAlign=r.textAlign(eX(l)),n.textBaseline="middle",n.strokeStyle=i.color,n.fillStyle=i.color,n.font=s.string,tx(n,i.text,u,e,s)}_computeTitleHeight(){let e=this.options.title,t=tk(e.font),i=tj(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,a;if(ez(e,this.left,this.right)&&ez(t,this.top,this.bottom)){for(i=0,a=this.legendHitBoxes;i<a.length;++i)if(ez(e,(s=a[i]).left,s.left+s.width)&&ez(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){var t,i;let s=this.options;if(t=e.type,i=s,("mousemove"!==t&&"mouseout"!==t||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==t&&"mouseup"!==t))return;let a=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){let t=this._hoveredItem,i=null!==t&&null!==a&&t.datasetIndex===a.datasetIndex&&t.index===a.index;t&&!i&&es(s.onLeave,[e,t,this],this),this._hoveredItem=a,a&&!i&&es(s.onHover,[e,a,this],this)}else a&&es(s.onClick,[e,a,this],this)}}function al(e,t){return t*(e.text?e.text.length:0)}var ao={id:"legend",_element:an,start(e,t,i){let s=e.legend=new an({ctx:e.ctx,options:i,chart:e});iX.configure(e,s,i),iX.addBox(e,s)},stop(e){iX.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let s=e.legend;iX.configure(e,s,i),s.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let s=t.datasetIndex,a=i.chart;a.isDatasetVisible(s)?(a.hide(s),t.hidden=!0):(a.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:a,color:r,useBorderRadius:n,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{let o=e.controller.getStyle(i?0:void 0),h=tj(o.borderWidth);return{text:t[e.index].label,fillStyle:o.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:o.borderColor,pointStyle:s||o.pointStyle,rotation:o.rotation,textAlign:a||o.textAlign,borderRadius:n&&(l||o.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ah extends si{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let s=K(i.text)?i.text.length:1;this._padding=tj(i.padding);let a=s*tk(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){let t,i,s,{top:a,left:r,bottom:n,right:l,options:o}=this,h=o.align,d=0;return this.isHorizontal()?(i=eG(h,r,l),s=a+e,t=l-r):("left"===o.position?(i=r+e,s=eG(h,n,a),d=-.5*eb):(i=l-e,s=eG(h,a,n),d=.5*eb),t=n-a),{titleX:i,titleY:s,maxWidth:t,rotation:d}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=tk(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:n,rotation:l}=this._drawArgs(s);tx(e,t.text,0,0,i,{color:t.color,maxWidth:n,rotation:l,textAlign:eX(t.align),textBaseline:"middle",translation:[a,r]})}}var ad={id:"title",_element:ah,start(e,t,i){let s;s=new ah({ctx:e.ctx,options:i,chart:e}),iX.configure(e,s,i),iX.addBox(e,s),e.titleBlock=s},stop(e){let t=e.titleBlock;iX.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let s=e.titleBlock;iX.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;let ac={average(e){let t,i;if(!e.length)return!1;let s=new Set,a=0,r=0;for(t=0,i=e.length;t<i;++t){let i=e[t].element;if(i&&i.hasValue()){let e=i.tooltipPosition();s.add(e.x),a+=e.y,++r}}return 0!==r&&0!==s.size&&{x:[...s].reduce((e,t)=>e+t)/s.size,y:a/r}},nearest(e,t){let i,s,a;if(!e.length)return!1;let r=t.x,n=t.y,l=1/0;for(i=0,s=e.length;i<s;++i){let s=e[i].element;if(s&&s.hasValue()){let e=eR(t,s.getCenterPoint());e<l&&(l=e,a=s)}}if(a){let e=a.tooltipPosition();r=e.x,n=e.y}return{x:r,y:n}}};function au(e,t){return t&&(K(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ag(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function am(e,t){let i=e.chart.ctx,{body:s,footer:a,title:r}=e,{boxWidth:n,boxHeight:l}=t,o=tk(t.bodyFont),h=tk(t.titleFont),d=tk(t.footerFont),c=r.length,u=a.length,g=s.length,m=tj(t.padding),p=m.height,x=0,f=s.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);f+=e.beforeBody.length+e.afterBody.length,c&&(p+=c*h.lineHeight+(c-1)*t.titleSpacing+t.titleMarginBottom),f&&(p+=g*(t.displayColors?Math.max(l,o.lineHeight):o.lineHeight)+(f-g)*o.lineHeight+(f-1)*t.bodySpacing),u&&(p+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let b=0,y=function(e){x=Math.max(x,i.measureText(e).width+b)};return i.save(),i.font=h.string,ea(e.title,y),i.font=o.string,ea(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?n+2+t.boxPadding:0,ea(s,e=>{ea(e.before,y),ea(e.lines,y),ea(e.after,y)}),b=0,i.font=d.string,ea(e.footer,y),i.restore(),{width:x+=m.width,height:p}}function ap(e,t,i){let s=i.yAlign||t.yAlign||function(e,t){let{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||function(e,t,i,s){let{x:a,width:r}=i,{width:n,chartArea:{left:l,right:o}}=e,h="center";return"center"===s?h=a<=(l+o)/2?"left":"right":a<=r/2?h="left":a>=n-r/2&&(h="right"),function(e,t,i,s){let{x:a,width:r}=s,n=i.caretSize+i.caretPadding;if("left"===e&&a+r+n>t.width||"right"===e&&a-r-n<0)return!0}(h,e,t,i)&&(h="center"),h}(e,t,i,s),yAlign:s}}function ax(e,t,i,s){let{caretSize:a,caretPadding:r,cornerRadius:n}=e,{xAlign:l,yAlign:o}=i,h=a+r,{topLeft:d,topRight:c,bottomLeft:u,bottomRight:g}=tN(n),m=function(e,t){let{x:i,width:s}=e;return"right"===t?i-=s:"center"===t&&(i-=s/2),i}(t,l),p=function(e,t,i){let{y:s,height:a}=e;return"top"===t?s+=i:"bottom"===t?s-=a+i:s-=a/2,s}(t,o,h);return"center"===o?"left"===l?m+=h:"right"===l&&(m-=h):"left"===l?m-=Math.max(d,u)+a:"right"===l&&(m+=Math.max(c,g)+a),{x:eV(m,0,s.width-t.width),y:eV(p,0,s.height-t.height)}}function af(e,t,i){let s=tj(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function ab(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}let ay={beforeTitle:Z,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:Z,beforeBody:Z,beforeLabel:Z,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return G(i)||(t+=i),t},labelColor(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Z,afterBody:Z,beforeFooter:Z,footer:Z,afterFooter:Z};function av(e,t,i,s){let a=e[t].call(i,s);return void 0===a?ay[t].call(i,s):a}class aw extends si{static positioners=ac;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,a=new id(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){var e;return this.$context||(this.$context=(e=this.chart.getContext(),tT(e,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(e,t){let{callbacks:i}=t,s=av(i,"beforeTitle",this,e),a=av(i,"title",this,e),r=av(i,"afterTitle",this,e),n=[];return n=au(n,ag(s)),n=au(n,ag(a)),n=au(n,ag(r))}getBeforeBody(e,t){return au([],ag(av(t.callbacks,"beforeBody",this,e)))}getBody(e,t){let{callbacks:i}=t,s=[];return ea(e,e=>{let t={before:[],lines:[],after:[]},a=ab(i,e);au(t.before,ag(av(a,"beforeLabel",this,e))),au(t.lines,av(a,"label",this,e)),au(t.after,ag(av(a,"afterLabel",this,e))),s.push(t)}),s}getAfterBody(e,t){return au([],ag(av(t.callbacks,"afterBody",this,e)))}getFooter(e,t){let{callbacks:i}=t,s=av(i,"beforeFooter",this,e),a=av(i,"footer",this,e),r=av(i,"afterFooter",this,e),n=[];return n=au(n,ag(s)),n=au(n,ag(a)),n=au(n,ag(r))}_createItems(e){let t,i,s=this._active,a=this.chart.data,r=[],n=[],l=[],o=[];for(t=0,i=s.length;t<i;++t)o.push(function(e,t){let{element:i,datasetIndex:s,index:a}=t,r=e.getDatasetMeta(s).controller,{label:n,value:l}=r.getLabelAndValue(a);return{chart:e,label:n,parsed:r.getParsed(a),raw:e.data.datasets[s].data[a],formattedValue:l,dataset:r.getDataset(),dataIndex:a,datasetIndex:s,element:i}}(this.chart,s[t]));return e.filter&&(o=o.filter((t,i,s)=>e.filter(t,i,s,a))),e.itemSort&&(o=o.sort((t,i)=>e.itemSort(t,i,a))),ea(o,t=>{let i=ab(e.callbacks,t);r.push(av(i,"labelColor",this,t)),n.push(av(i,"labelPointStyle",this,t)),l.push(av(i,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=l,this.dataPoints=o,o}update(e,t){let i,s=this.options.setContext(this.getContext()),a=this._active,r=[];if(a.length){let e=ac[s.position].call(this,a,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);let t=this._size=am(this,s),n=Object.assign({},e,t),l=ap(this.chart,s,n),o=ax(s,n,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,i={opacity:1,x:o.x,y:o.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=r,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){let a=this.getCaretPosition(e,i,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){let s,a,r,n,l,o,{xAlign:h,yAlign:d}=this,{caretSize:c,cornerRadius:u}=i,{topLeft:g,topRight:m,bottomLeft:p,bottomRight:x}=tN(u),{x:f,y:b}=e,{width:y,height:v}=t;return"center"===d?(l=b+v/2,"left"===h?(a=(s=f)-c,n=l+c,o=l-c):(a=(s=f+y)+c,n=l-c,o=l+c),r=s):(a="left"===h?f+Math.max(g,p)+c:"right"===h?f+y-Math.max(m,x)-c:this.caretX,"top"===d?(l=(n=b)-c,s=a-c,r=a+c):(l=(n=b+v)+c,s=a+c,r=a-c),o=n),{x1:s,x2:a,x3:r,y1:n,y2:l,y3:o}}drawTitle(e,t,i){let s,a,r,n=this.title,l=n.length;if(l){let o=t3(i.rtl,this.x,this.width);for(r=0,e.x=af(this,i.titleAlign,i),t.textAlign=o.textAlign(i.titleAlign),t.textBaseline="middle",s=tk(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=s.string;r<l;++r)t.fillText(n[r],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,r+1===l&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,a){let r=this.labelColors[i],n=this.labelPointStyles[i],{boxHeight:l,boxWidth:o}=a,h=tk(a.bodyFont),d=af(this,"left",a),c=s.x(d),u=l<h.lineHeight?(h.lineHeight-l)/2:0,g=t.y+u;if(a.usePointStyle){let t={radius:Math.min(o,l)/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:1},i=s.leftForLtr(c,o)+o/2,h=g+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,th(e,t,i,h),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,th(e,t,i,h)}else{e.lineWidth=Q(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;let t=s.leftForLtr(c,o),i=s.leftForLtr(s.xPlus(c,1),o-2),n=tN(r.borderRadius);Object.values(n).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,tf(e,{x:t,y:g,w:o,h:l,radius:n}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),tf(e,{x:i,y:g+1,w:o-2,h:l-2,radius:n}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,g,o,l),e.strokeRect(t,g,o,l),e.fillStyle=r.backgroundColor,e.fillRect(i,g+1,o-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){let s,a,r,n,l,o,{body:h}=this,{bodySpacing:d,bodyAlign:c,displayColors:u,boxHeight:g,boxWidth:m,boxPadding:p}=i,x=tk(i.bodyFont),f=x.lineHeight,b=0,y=t3(i.rtl,this.x,this.width),v=function(i){t.fillText(i,y.x(e.x+b),e.y+f/2),e.y+=f+d},w=y.textAlign(c);for(t.textAlign=c,t.textBaseline="middle",t.font=x.string,e.x=af(this,w,i),t.fillStyle=i.bodyColor,ea(this.beforeBody,v),b=u&&"right"!==w?"center"===c?m/2+p:m+2+p:0,r=0,l=h.length;r<l;++r){for(s=h[r],t.fillStyle=this.labelTextColors[r],ea(s.before,v),a=s.lines,u&&a.length&&(this._drawColorBox(t,e,r,y,i),f=Math.max(x.lineHeight,g)),n=0,o=a.length;n<o;++n)v(a[n]),f=x.lineHeight;ea(s.after,v)}b=0,f=x.lineHeight,ea(this.afterBody,v),e.y-=d}drawFooter(e,t,i){let s,a,r=this.footer,n=r.length;if(n){let l=t3(i.rtl,this.x,this.width);for(e.x=af(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",s=tk(i.footerFont),t.fillStyle=i.footerColor,t.font=s.string,a=0;a<n;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){let{xAlign:a,yAlign:r}=this,{x:n,y:l}=e,{width:o,height:h}=i,{topLeft:d,topRight:c,bottomLeft:u,bottomRight:g}=tN(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(n+d,l),"top"===r&&this.drawCaret(e,t,i,s),t.lineTo(n+o-c,l),t.quadraticCurveTo(n+o,l,n+o,l+c),"center"===r&&"right"===a&&this.drawCaret(e,t,i,s),t.lineTo(n+o,l+h-g),t.quadraticCurveTo(n+o,l+h,n+o-g,l+h),"bottom"===r&&this.drawCaret(e,t,i,s),t.lineTo(n+u,l+h),t.quadraticCurveTo(n,l+h,n,l+h-u),"center"===r&&"left"===a&&this.drawCaret(e,t,i,s),t.lineTo(n,l+d),t.quadraticCurveTo(n,l,n+d,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){let i=ac[e.position].call(this,this._active,this._eventPosition);if(!i)return;let r=this._size=am(this,e),n=Object.assign({},i,this._size),l=ap(t,e,n),o=ax(e,n,l,t);(s._to!==o.x||a._to!==o.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,o))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(t);let s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=.001>Math.abs(i)?0:i;let r=tj(t.padding),n=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&n&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),t6(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),t4(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let i=this._active,s=e.map(({datasetIndex:e,index:t})=>{let i=this.chart.getDatasetMeta(e);if(!i)throw Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}),a=!er(i,s),r=this._positionChanged(s,t);(a||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,i),n=this._positionChanged(r,e),l=t||!er(r,a)||n;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){let a=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));let r=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&r.reverse(),r}_positionChanged(e,t){let{caretX:i,caretY:s,options:a}=this,r=ac[a.position].call(this,e,t);return!1!==r&&(i!==r.x||s!==r.y)}}var a_={id:"tooltip",_element:aw,positioners:ac,afterInit(e,t,i){i&&(e.tooltip=new aw({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ay},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function aN(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class aj extends sh{static id="category";static defaults={ticks:{callback:aN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let e=this.getLabels();for(let{index:i,label:s}of t)e[i]===s&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){let i,s;if(G(e))return null;let a=this.getLabels();return i=t=isFinite(t)&&a[t]===e?t:function(e,t,i,s){let a=e.indexOf(t);if(-1===a){var r;return r=i,"string"==typeof t?(r=e.push(t)-1,s.unshift({index:r,label:t})):isNaN(t)&&(r=null),r}return a!==e.lastIndexOf(t)?i:a}(a,e,et(t,e),this._addedLabels),s=a.length-1,null===i?null:eV(Math.round(i),0,s)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let e=this.min,t=this.max,i=this.options.offset,s=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=e;i<=t;i++)s.push({value:i});return s}getLabelForValue(e){return aN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ak(e,t,{horizontal:i,minRotation:s}){let a=eA(s),r=(i?Math.sin(a):Math.cos(a))||.001,n=.75*t*(""+e).length;return Math.min(t/r,n)}class aM extends sh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return G(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:s,max:a}=this,r=e=>s=t?s:e,n=e=>a=i?a:e;if(e){let e=eT(s),t=eT(a);e<0&&t<0?n(0):e>0&&t>0&&r(0)}if(s===a){let t=0===a?1:Math.abs(.05*a);n(a+t),e||r(s-t)}this.min=s,this.max=a}getTickLimit(){let e,{maxTicksLimit:t,stepSize:i}=this.options.ticks;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3):(e=this.computeTickLimit(),t=t||11),t&&(e=Math.min(t,e)),e}computeTickLimit(){return 1/0}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit(),s=function(e,t){var i,s;let a,r,n,l,o,h=[],{bounds:d,step:c,min:u,max:g,precision:m,count:p,maxTicks:x,maxDigits:f,includeBounds:b}=e,y=c||1,v=x-1,{min:w,max:_}=t,N=!G(u),j=!G(g),k=!G(p),M=(_-w)/(f+1),T=eP((_-w)/v/y)*y;if(T<1e-14&&!N&&!j)return[{value:w},{value:_}];(l=Math.ceil(_/T)-Math.floor(w/T))>v&&(T=eP(l*T/v/y)*y),G(m)||(T=Math.ceil(T*(a=Math.pow(10,m)))/a),"ticks"===d?(r=Math.floor(w/T)*T,n=Math.ceil(_/T)*T):(r=w,n=_),N&&j&&c&&(i=(g-u)/c,s=T/1e3,(o=Math.round(i))-s<=i&&o+s>=i)?(l=Math.round(Math.min((g-u)/T,x)),T=(g-u)/l,r=u,n=g):k?(r=N?u:r,T=((n=j?g:n)-r)/(l=p-1)):l=eC(l=(n-r)/T,Math.round(l),T/1e3)?Math.round(l):Math.ceil(l);let C=Math.max(eL(T),eL(r));r=Math.round(r*(a=Math.pow(10,G(m)?C:m)))/a,n=Math.round(n*a)/a;let P=0;for(N&&(b&&r!==u?(h.push({value:u}),r<u&&P++,eC(Math.round((r+P*T)*a)/a,u,ak(u,M,e))&&P++):r<u&&P++);P<l;++P){let e=Math.round((r+P*T)*a)/a;if(j&&e>g)break;h.push({value:e})}return j&&b&&n!==g?h.length&&eC(h[h.length-1].value,g,ak(g,M,e))?h[h.length-1].value=g:h.push({value:g}):j&&n!==g||h.push({value:n}),h}({maxTicks:i=Math.max(2,i),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&eD(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return e9(e,this.chart.options.locale,this.options.ticks.format)}}class aT extends aM{static id="linear";static defaults={ticks:{callback:te.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=J(e)?e:0,this.max=J(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=eA(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001;return Math.ceil(t/Math.min(40,this._resolveTickFontOptions(0).lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}let aC=e=>Math.floor(eM(e)),aP=(e,t)=>Math.pow(10,aC(e)+t);function aS(e){return 1==e/Math.pow(10,aC(e))}function aD(e,t,i){let s=Math.pow(10,i),a=Math.floor(e/s);return Math.ceil(t/s)-a}class aA extends sh{static id="logarithmic";static defaults={ticks:{callback:te.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=aM.prototype.parse.apply(this,[e,t]);if(0===i){this._zero=!0;return}return J(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=J(e)?Math.max(0,e):null,this.max=J(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!J(this._userMin)&&(this.min=e===aP(this.min,0)?aP(this.min,-1):aP(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,s=this.max,a=t=>i=e?i:t,r=e=>s=t?s:e;i===s&&(i<=0?(a(1),r(10)):(a(aP(i,-1)),r(aP(s,1)))),i<=0&&a(aP(s,-1)),s<=0&&r(aP(i,1)),this.min=i,this.max=s}buildTicks(){let e=this.options,t=function(e,{min:t,max:i}){t=ee(e.min,t);let s=[],a=aC(t),r=function(e,t){let i=aC(t-e);for(;aD(e,t,i)>10;)i++;for(;10>aD(e,t,i);)i--;return Math.min(i,aC(e))}(t,i),n=r<0?Math.pow(10,Math.abs(r)):1,l=Math.pow(10,r),o=a>r?Math.pow(10,a):0,h=Math.round((t-o)*n)/n,d=Math.floor((t-o)/l/10)*l*10,c=Math.floor((h-d)/Math.pow(10,r)),u=ee(e.min,Math.round((o+d+c*Math.pow(10,r))*n)/n);for(;u<i;)s.push({value:u,major:aS(u),significand:c}),c>=10?c=c<15?15:20:c++,c>=20&&(c=2,n=++r>=0?1:n),u=Math.round((o+d+c*Math.pow(10,r))*n)/n;let g=ee(e.max,u);return s.push({value:g,major:aS(g),significand:c}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&eD(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":e9(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=eM(e),this._valueRange=eM(this.max)-eM(e)}getPixelForValue(e){return((void 0===e||0===e)&&(e=this.min),null===e||isNaN(e))?NaN:this.getPixelForDecimal(e===this.min?0:(eM(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function aL(e){let t=e.ticks;if(t.display&&e.display){let e=tj(t.backdropPadding);return et(t.font&&t.font.size,tr.font.size)+e.height}return 0}function aE(e,t,i,s,a){return e===s||e===a?{start:t-i/2,end:t+i/2}:e<s||e>a?{start:t-i,end:t}:{start:t,end:t+i}}function aR(e,t,i,s){let{ctx:a}=e;if(i)a.arc(e.xCenter,e.yCenter,t,0,ey);else{let i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(let r=1;r<s;r++)i=e.getPointPosition(r,t),a.lineTo(i.x,i.y)}}class aO extends aM{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:te.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=tj(aL(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=J(e)&&!isNaN(e)?e:0,this.max=J(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/aL(this.options))}generateTickLabels(e){aM.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{let i=es(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){let e=this.options;e.display&&e.pointLabels.display?function(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],a=[],r=e._pointLabels.length,n=e.options.pointLabels,l=n.centerPointLabels?eb/r:0;for(let d=0;d<r;d++){var o,h;let r=n.setContext(e.getPointLabelContext(d));a[d]=r.padding;let c=e.getPointPosition(d,e.drawingArea+a[d],l),u=tk(r.font),g=(o=e.ctx,h=K(h=e._pointLabels[d])?h:[h],{w:function(e,t,i,s){let a,r,n,l,o,h=(s=s||{}).data=s.data||{},d=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(h=s.data={},d=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let c=0,u=i.length;for(a=0;a<u;a++)if(null==(l=i[a])||K(l)){if(K(l))for(r=0,n=l.length;r<n;r++)null==(o=l[r])||K(o)||(c=tn(e,h,d,c,o))}else c=tn(e,h,d,c,l);e.restore();let g=d.length/2;if(g>i.length){for(a=0;a<g;a++)delete h[d[a]];d.splice(0,g)}return c}(o,u.string,h),h:h.length*u.lineHeight});s[d]=g;let m=e$(e.getIndexAngle(d)+l),p=Math.round(180/eb*m);!function(e,t,i,s,a){let r=Math.abs(Math.sin(i)),n=Math.abs(Math.cos(i)),l=0,o=0;s.start<t.l?(l=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-l)):s.end>t.r&&(l=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+l)),a.start<t.t?(o=(t.t-a.start)/n,e.t=Math.min(e.t,t.t-o)):a.end>t.b&&(o=(a.end-t.b)/n,e.b=Math.max(e.b,t.b+o))}(i,t,m,aE(p,c.x,g.w,0,180),aE(p,c.y,g.h,90,270))}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){let s,a=[],r=e._pointLabels.length,n=e.options,{centerPointLabels:l,display:o}=n.pointLabels,h={extra:aL(n)/2,additionalAngle:l?eb/r:0};for(let n=0;n<r;n++){h.padding=i[n],h.size=t[n];let r=function(e,t,i){var s,a,r,n,l,o,h;let d=e.drawingArea,{extra:c,additionalAngle:u,padding:g,size:m}=i,p=e.getPointPosition(t,d+c+g,u),x=Math.round(180/eb*e$(p.angle+eN)),f=(s=p.y,a=m.h,90===(r=x)||270===r?s-=a/2:(r>270||r<90)&&(s-=a),s),b=0===(n=x)||180===n?"center":n<180?"left":"right",y=(l=p.x,o=m.w,"right"===(h=b)?l-=o:"center"===h&&(l-=o/2),l);return{visible:!0,x:p.x,y:f,textAlign:b,left:y,top:f,right:y+m.w,bottom:f+m.h}}(e,n,h);a.push(r),"auto"===o&&(r.visible=function(e,t){if(!t)return!0;let{left:i,top:s,right:a,bottom:r}=e;return!(tc({x:i,y:s},t)||tc({x:i,y:r},t)||tc({x:a,y:s},t)||tc({x:a,y:r},t))}(r,s),r.visible&&(s=r))}return a}(e,s,a)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){return e$(e*(ey/(this._pointLabels.length||1))+eA(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(G(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(G(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){var i;let s=t[e];return i=this.getContext(),tT(i,{label:s,index:e,type:"pointLabel"})}}getPointPosition(e,t,i=0){let s=this.getIndexAngle(e)-eN+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:s,bottom:a}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:a}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),aR(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e,t,i,s=this.ctx,a=this.options,{angleLines:r,grid:n,border:l}=a,o=this._pointLabels.length;if(a.pointLabels.display&&function(e,t){let{ctx:i,options:{pointLabels:s}}=e;for(let a=t-1;a>=0;a--){let t=e._pointLabelItems[a];if(!t.visible)continue;let r=s.setContext(e.getPointLabelContext(a));!function(e,t,i){let{left:s,top:a,right:r,bottom:n}=i,{backdropColor:l}=t;if(!G(l)){let i=tN(t.borderRadius),o=tj(t.backdropPadding);e.fillStyle=l;let h=s-o.left,d=a-o.top,c=r-s+o.width,u=n-a+o.height;Object.values(i).some(e=>0!==e)?(e.beginPath(),tf(e,{x:h,y:d,w:c,h:u,radius:i}),e.fill()):e.fillRect(h,d,c,u)}}(i,r,t);let n=tk(r.font),{x:l,y:o,textAlign:h}=t;tx(i,e._pointLabels[a],l,o+n.lineHeight/2,n,{color:r.color,textAlign:h,textBaseline:"middle"})}}(this,o),n.display&&this.ticks.forEach((e,i)=>{if(0!==i||0===i&&this.min<0){t=this.getDistanceFromCenterForValue(e.value);let s=this.getContext(i),a=n.setContext(s),r=l.setContext(s);!function(e,t,i,s,a){let r=e.ctx,n=t.circular,{color:l,lineWidth:o}=t;(n||s)&&l&&o&&!(i<0)&&(r.save(),r.strokeStyle=l,r.lineWidth=o,r.setLineDash(a.dash||[]),r.lineDashOffset=a.dashOffset,r.beginPath(),aR(e,i,n,s),r.closePath(),r.stroke(),r.restore())}(this,a,t,o,r)}}),r.display){for(s.save(),e=o-1;e>=0;e--){let n=r.setContext(this.getPointLabelContext(e)),{color:l,lineWidth:o}=n;o&&l&&(s.lineWidth=o,s.strokeStyle=l,s.setLineDash(n.borderDash),s.lineDashOffset=n.borderDashOffset,t=this.getDistanceFromCenterForValue(a.reverse?this.min:this.max),i=this.getPointPosition(e,t),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(i.x,i.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){let e,t,i=this.ctx,s=this.options,a=s.ticks;if(!a.display)return;let r=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(r),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((r,n)=>{if(0===n&&this.min>=0&&!s.reverse)return;let l=a.setContext(this.getContext(n)),o=tk(l.font);if(e=this.getDistanceFromCenterForValue(this.ticks[n].value),l.showLabelBackdrop){i.font=o.string,t=i.measureText(r.label).width,i.fillStyle=l.backdropColor;let s=tj(l.backdropPadding);i.fillRect(-t/2-s.left,-e-o.size/2-s.top,t+s.width,o.size+s.height)}tx(i,r.label,0,-e,o,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),i.restore()}drawTitle(){}}let a$={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},aF=Object.keys(a$);function aV(e,t){return e-t}function az(e,t){if(G(t))return null;let i=e._adapter,{parser:s,round:a,isoWeekday:r}=e._parseOpts,n=t;return("function"==typeof s&&(n=s(n)),J(n)||(n="string"==typeof s?i.parse(n,s):i.parse(n)),null===n)?null:(a&&(n="week"===a&&(eS(r)||!0===r)?i.startOf(n,"isoWeek",r):i.startOf(n,a)),+n)}function aI(e,t,i,s){let a=aF.length;for(let r=aF.indexOf(e);r<a-1;++r){let e=a$[aF[r]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(a*e.size))<=s)return aF[r]}return aF[a-1]}function aB(e,t,i){if(i){if(i.length){let{lo:s,hi:a}=eI(i,t);e[i[s]>=t?i[s]:i[a]]=!0}}else e[t]=!0}function aW(e,t,i){let s,a,r=[],n={},l=t.length;for(s=0;s<l;++s)n[a=t[s]]=s,r.push({value:a,major:!1});return 0!==l&&i?function(e,t,i,s){let a,r,n=e._adapter,l=+n.startOf(t[0].value,s),o=t[t.length-1].value;for(a=l;a<=o;a=+n.add(a,1,s))(r=i[a])>=0&&(t[r].major=!0);return t}(e,r,n,i):r}class aH extends sh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let i=e.time||(e.time={}),s=this._adapter=new iE(e.adapters.date);s.init(t),ed(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:az(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,i=e.time.unit||"day",{min:s,max:a,minDefined:r,maxDefined:n}=this.getUserBounds();function l(e){r||isNaN(e.min)||(s=Math.min(s,e.min)),n||isNaN(e.max)||(a=Math.max(a,e.max))}r&&n||(l(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&l(this.getMinMax(!1))),s=J(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=J(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=1/0,i=-1/0;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){let e=this.options,t=e.time,i=e.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let a=this.min,r=function(e,t,i){let s=0,a=e.length;for(;s<a&&e[s]<t;)s++;for(;a>s&&e[a-1]>i;)a--;return s>0||a<e.length?e.slice(s,a):e}(s,a,this.max);return this._unit=t.unit||(i.autoSkip?aI(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,i,s,a){for(let r=aF.length-1;r>=aF.indexOf(i);r--){let i=aF[r];if(a$[i].common&&e._adapter.diff(a,s,i)>=t-1)return i}return aF[i?aF.indexOf(i):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=aF.indexOf(e)+1,i=aF.length;t<i;++t)if(a$[aF[t]].common)return aF[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&r.reverse(),aW(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,i,s=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),s=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),a=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);let r=e.length<3?.5:.25;s=eV(s,0,r),a=eV(a,0,r),this._offsets={start:s,end:a,factor:1/(s+1+a)}}_generate(){let e,t,i=this._adapter,s=this.min,a=this.max,r=this.options,n=r.time,l=n.unit||aI(n.minUnit,s,a,this._getLabelCapacity(s)),o=et(r.ticks.stepSize,1),h="week"===l&&n.isoWeekday,d=eS(h)||!0===h,c={},u=s;if(d&&(u=+i.startOf(u,"isoWeek",h)),u=+i.startOf(u,d?"day":l),i.diff(a,s,l)>1e5*o)throw Error(s+" and "+a+" are too far apart with stepSize of "+o+" "+l);let g="data"===r.ticks.source&&this.getDataTimestamps();for(e=u,t=0;e<a;e=+i.add(e,o,l),t++)aB(c,e,g);return(e===a||"ticks"===r.bounds||1===t)&&aB(c,e,g),Object.keys(c).sort(aV).map(e=>+e)}getLabelForValue(e){let t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){let i=this.options.time.displayFormats,s=this._unit,a=t||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,i,s){let a=this.options,r=a.ticks.callback;if(r)return es(r,[e,t,i],this);let n=a.time.displayFormats,l=this._unit,o=this._majorUnit,h=l&&n[l],d=o&&n[o],c=i[t],u=o&&d&&c&&c.major;return this._adapter.format(e,s||(u?d:h))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)(s=e[t]).label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,i=this.ctx.measureText(e).width,s=eA(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),r=Math.sin(s),n=this._resolveTickFontOptions(0).size;return{w:i*a+n*r,h:i*r+n*a}}_getLabelCapacity(e){let t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,aW(this,[e],this._majorUnit),s),r=this._getLabelSize(a),n=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return n>0?n:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,t=s.length;e<t;++e)i=i.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let e,t,i=this._cache.labels||[];if(i.length)return i;let s=this.getLabels();for(e=0,t=s.length;e<t;++e)i.push(az(this,s[e]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(e){return eU(e.sort(aV))}}function aq(e,t,i){let s,a,r,n,l=0,o=e.length-1;i?(t>=e[l].pos&&t<=e[o].pos&&({lo:l,hi:o}=eB(e,"pos",t)),{pos:s,time:r}=e[l],{pos:a,time:n}=e[o]):(t>=e[l].time&&t<=e[o].time&&({lo:l,hi:o}=eB(e,"time",t)),{time:s,pos:r}=e[l],{time:a,pos:n}=e[o]);let h=a-s;return h?r+(n-r)*(t-s)/h:r}class aU extends aH{static id="timeseries";static defaults=aH.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=aq(t,this.min),this._tableRange=aq(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let t,i,s,{min:a,max:r}=this,n=[],l=[];for(t=0,i=e.length;t<i;++t)(s=e[t])>=a&&s<=r&&n.push(s);if(n.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(t=0,i=n.length;t<i;++t)Math.round((n[t+1]+n[t-1])/2)!==(s=n[t])&&l.push({time:s,pos:t/(i-1)});return l}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e}getDecimalForValue(e){return(aq(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return aq(this._table,i*this._tableRange+this._minPos,!0)}}let aY="label";function aZ(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function aX(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aY,s=[];e.datasets=t.map(t=>{let a=e.datasets.find(e=>e[i]===t[i]);return!a||!t.data||s.includes(a)?{...t}:(s.push(a),Object.assign(a,t),a)})}let aG=(0,a.forwardRef)(function(e,t){let{height:i=150,width:s=300,redraw:r=!1,datasetIdKey:n,type:l,data:o,options:h,plugins:d=[],fallbackContent:c,updateMode:u,...g}=e,m=(0,a.useRef)(null),p=(0,a.useRef)(null),x=()=>{m.current&&(p.current=new sE(m.current,{type:l,data:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aY,i={labels:[],datasets:[]};return i.labels=e.labels,aX(i,e.datasets,t),i}(o,n),options:h&&{...h},plugins:d}),aZ(t,p.current))},f=()=>{aZ(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,a.useEffect)(()=>{var e;let t;!r&&p.current&&h&&(e=p.current,(t=e.options)&&h&&Object.assign(t,h))},[r,h]),(0,a.useEffect)(()=>{!r&&p.current&&(p.current.config.data.labels=o.labels)},[r,o.labels]),(0,a.useEffect)(()=>{!r&&p.current&&o.datasets&&aX(p.current.config.data,o.datasets,n)},[r,o.datasets]),(0,a.useEffect)(()=>{p.current&&(r?(f(),setTimeout(x)):p.current.update(u))},[r,h,o.labels,o.datasets,u]),(0,a.useEffect)(()=>{p.current&&(f(),setTimeout(x))},[l]),(0,a.useEffect)(()=>(x(),()=>f()),[]),a.default.createElement("canvas",{ref:m,role:"img",height:i,width:s,...g},c)});function aK(e,t){return sE.register(t),(0,a.forwardRef)((t,i)=>a.default.createElement(aG,{...t,ref:i,type:e}))}let aQ=aK("line",class extends i_{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,r=this.chart._animationsDisabled,{start:n,count:l}=eK(t,s,r);this._drawStart=n,this._drawCount=l,eQ(t)&&(n=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;let o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e),this.updateElements(s,n,l,e)}updateElements(e,t,i,s){let a="reset"===s,{iScale:r,vScale:n,_stacked:l,_dataset:o}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,s),c=r.axis,u=n.axis,{spanGaps:g,segment:m}=this.options,p=eS(g)?g:1/0,x=this.chart._animationsDisabled||a||"none"===s,f=t+i,b=e.length,y=t>0&&this.getParsed(t-1);for(let i=0;i<b;++i){let g=e[i],b=x?g:{};if(i<t||i>=f){b.skip=!0;continue}let v=this.getParsed(i),w=G(v[u]),_=b[c]=r.getPixelForValue(v[c],i),N=b[u]=a||w?n.getBasePixel():n.getPixelForValue(l?this.applyStack(n,v,l):v[u],i);b.skip=isNaN(_)||isNaN(N)||w,b.stop=i>0&&Math.abs(v[c]-y[c])>p,m&&(b.parsed=v,b.raw=o.data[i]),d&&(b.options=h||this.resolveDataElementOptions(i,g.active?"active":s)),x||this.updateElement(g,i,b,s),y=v}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];return s.length?Math.max(i,s[0].size(this.resolveDataElementOptions(0)),s[s.length-1].size(this.resolveDataElementOptions(s.length-1)))/2:i}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}),aJ=aK("bar",class extends i_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,s){return ij(e,t,i,s)}parseArrayData(e,t,i,s){return ij(e,t,i,s)}parseObjectData(e,t,i,s){let a,r,n,l,{iScale:o,vScale:h}=e,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,u="x"===o.axis?d:c,g="x"===h.axis?d:c,m=[];for(a=i,r=i+s;a<r;++a)l=t[a],(n={})[o.axis]=o.parse(eg(l,u),a),m.push(iN(eg(l,g),n,h,a));return m}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);let a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let{iScale:t,vScale:i}=this._cachedMeta,s=this.getParsed(e),a=s._custom,r=ik(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+t.getLabelForValue(s[t.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){let a="reset"===s,{index:r,_cachedMeta:{vScale:n}}=this,l=n.getBasePixel(),o=n.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:c}=this._getSharedOptions(t,s);for(let u=t;u<t+i;u++){let t=this.getParsed(u),i=a||G(t[n.axis])?{base:l,head:l}:this._calculateBarValuePixels(u),g=this._calculateBarIndexPixels(u,h),m=(t._stacks||{})[n.axis],p={horizontal:o,base:i.base,enableBorderRadius:!m||ik(t._custom)||r===m._top||r===m._bottom,x:o?i.head:g.center,y:o?g.center:i.head,height:o?g.size:Math.abs(i.size),width:o?Math.abs(i.size):g.size};c&&(p.options=d||this.resolveDataElementOptions(u,e[u].active?"active":s));let x=p.options||e[u].options;!function(e,t,i,s){let a,r,n,l,o,h=t.borderSkipped,d={};if(!h){e.borderSkipped=d;return}if(!0===h){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:c,end:u,reverse:g,top:m,bottom:p}=(e.horizontal?(a=e.base>e.x,r="left",n="right"):(a=e.base<e.y,r="bottom",n="top"),a?(l="end",o="start"):(l="start",o="end"),{start:r,end:n,reverse:a,top:l,bottom:o});"middle"===h&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?h=m:(i._bottom||0)===s?h=p:(d[iM(p,c,u,g)]=!0,h=m)),d[iM(h,c,u,g)]=!0,e.borderSkipped=d}(p,x,m,r),function(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?.33*(1===i):t}(p,x,h.ratio),this.updateElement(e[u],u,p,s)}}_getStacks(e,t){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=i.options.stacked,r=[],n=this._cachedMeta.controller.getParsed(t),l=n&&n[i.axis],o=e=>{let t=e._parsed.find(e=>e[i.axis]===l),s=t&&t[e.vScale.axis];if(G(s)||isNaN(s))return!0};for(let i of s)if(!(void 0!==t&&o(i))&&((!1===a||-1===r.indexOf(i.stack)||void 0===a&&void 0===i.stack)&&r.push(i.stack),i.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){let e={},t=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)e[et("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){let s=this._getStacks(e,i),a=void 0!==t?s.indexOf(t):-1;return -1===a?s.length-1:a}_getRuler(){let e,t,i=this.options,s=this._cachedMeta,a=s.iScale,r=[];for(e=0,t=s.data.length;e<t;++e)r.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));let n=i.barThickness;return{min:n||function(e){let t,i,s,a,r=e.iScale,n=function(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),s=[];for(let t=0,a=i.length;t<a;t++)s=s.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=eU(s.sort((e,t)=>e-t))}return e._cache.$bar}(r,e.type),l=r._length,o=()=>{32767!==s&&-32768!==s&&(ep(a)&&(l=Math.min(l,Math.abs(s-a)||l)),a=s)};for(t=0,i=n.length;t<i;++t)s=r.getPixelForValue(n[t]),o();for(t=0,a=void 0,i=r.ticks.length;t<i;++t)s=r.getPixelForTick(t),o();return l}(s),pixels:r,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:i.grouped,ratio:n?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(e){let t,i,{_cachedMeta:{vScale:s,_stacked:a,index:r},options:{base:n,minBarLength:l}}=this,o=n||0,h=this.getParsed(e),d=h._custom,c=ik(d),u=h[s.axis],g=0,m=a?this.applyStack(s,h,a):u;m!==u&&(g=m-u,m=u),c&&(u=d.barStart,m=d.barEnd-d.barStart,0!==u&&eT(u)!==eT(d.barEnd)&&(g=0),g+=u);let p=G(n)||c?g:n,x=s.getPixelForValue(p);if(Math.abs(i=(t=this.chart.getDataVisibility(e)?s.getPixelForValue(g+m):x)-x)<l){var f;i=(0!==(f=i)?eT(f):(s.isHorizontal()?1:-1)*(s.min>=o?1:-1))*l,u===o&&(x-=i/2);let e=s.getPixelForDecimal(0),n=s.getPixelForDecimal(1),d=Math.min(e,n);t=(x=Math.max(Math.min(x,Math.max(e,n)),d))+i,a&&!c&&(h._stacks[s.axis]._visualValues[r]=s.getValueForPixel(t)-s.getValueForPixel(x))}if(x===s.getPixelForValue(o)){let e=eT(i)*s.getLineWidthForValue(o)/2;x+=e,i-=e}return{size:i,base:x,head:t,center:t+i/2}}_calculateBarIndexPixels(e,t){let i,s,a=t.scale,r=this.options,n=r.skipNull,l=et(r.maxBarThickness,1/0),o=this._getAxisCount();if(t.grouped){var h,d;let a,c,u,g,m,p,x,f,b,y=n?this._getStackCount(e):t.stackCount,v="flex"===r.barThickness?(h=y*o,c=(a=t.pixels)[e],u=e>0?a[e-1]:null,g=e<a.length-1?a[e+1]:null,m=r.categoryPercentage,null===u&&(u=c-(null===g?t.end-t.start:g-c)),null===g&&(g=c+c-u),p=c-(c-Math.min(u,g))/2*m,{chunk:Math.abs(g-u)/2*m/h,ratio:r.barPercentage,start:p}):(d=y*o,G(b=r.barThickness)?(x=t.min*r.categoryPercentage,f=r.barPercentage):(x=b*d,f=1),{chunk:x/d,ratio:f,start:t.pixels[e]-x/2}),w="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(et(w,this.getFirstScaleIdForIndexAxis())),N=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+_;i=v.start+v.chunk*N+v.chunk/2,s=Math.min(l,v.chunk*v.ratio)}else i=a.getPixelForValue(this.getParsed(e)[a.axis],e),s=Math.min(l,t.min*t.ratio);return{base:i-s/2,head:i+s/2,center:i,size:s}}draw(){let e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length,a=0;for(;a<s;++a)null===this.getParsed(a)[t.axis]||i[a].hidden||i[a].draw(this._ctx)}}),a0=aK("doughnut",iP);sE.register(aj,aT,sZ,sU,a_,aa,sF,ao);let a1=({data:e})=>{let[t,i]=(0,a.useState)("1M"),o=e=>{if("number"==typeof e)return e.toLocaleString();if("string"==typeof e){let t=parseFloat(e.replace(/[^\d.-]/g,""));return isNaN(t)?"0":t.toLocaleString()}return"0"},h=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e.replace(/[^\d.-]/g,""));return isNaN(t)?0:t}return 0},u=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e.replace("%",""));return isNaN(t)?0:t}return 0},w={labels:["股票","ETF","債券","加密貨幣","現金"],datasets:[{data:[45,20,15,12,8],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 99, 132, 0.6)"],borderWidth:0}]},_=(0,a.useMemo)(()=>({labels:Array.from({length:30},(e,t)=>{let i=new Date;return i.setDate(i.getDate()-(29-t)),i.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),datasets:[{data:[235e4,2355e3,236e4,2365e3,237e4,2375e3,238e4,2375e3,237e4,2375e3,238e4,2385e3,239e4,2395e3,24e5,2405e3,241e4,2415e3,242e4,2425e3,243e4,2435e3,244e4,2445e3,245e4,2445e3,244e4,2445e3,245e4,2450600],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.15)",fill:!0}]}),[]),N=(0,a.useMemo)(()=>{let e=_.datasets[0].data,t=e[0],i=e[e.length-1],s=Math.max(...e),a=Math.min(...e),r=((s-a)/t*100).toFixed(1);return{change:i-t,changePercent:parseFloat(((i-t)/t*100).toFixed(2)),maxValue:s,minValue:a,volatility:parseFloat(r),upDays:e.slice(1).filter((t,i)=>t>e[i]).length,totalDays:e.length-1}},[_]),j={"1W":{labels:["6/10","6/11","6/12","6/13","6/14","6/15","6/16"],portfolio:[2450600,2456800,2463200,2458900,2465400,2471800,2475300],benchmark:[18500,18520,18545,18532,18558,18575,18583],return:"+1.01%",isPositive:!0},"1M":{labels:["5/17","5/24","5/31","6/7","6/14","6/16"],portfolio:[2385e3,2398500,2415600,2435800,2455200,2475300],benchmark:[18200,18280,18350,18420,18520,18583],return:"+3.79%",isPositive:!0},"3M":{labels:["4月","5月","6月"],portfolio:[228e4,2385e3,2475300],benchmark:[17800,18200,18583],return:"+8.56%",isPositive:!0},"6M":{labels:["1月","2月","3月","4月","5月","6月"],portfolio:[215e4,2195e3,2245e3,228e4,2385e3,2475300],benchmark:[17200,17350,17500,17800,18200,18583],return:"+15.13%",isPositive:!0},"1Y":{labels:["2023/6","2023/9","2023/12","2024/3","2024/6"],portfolio:[2e6,2088e3,2156e3,2245e3,2475300],benchmark:[16500,16800,17100,17500,18583],return:"+23.77%",isPositive:!0},ALL:{labels:["2022","2023","2024"],portfolio:[18e5,2156e3,2475300],benchmark:[15800,17100,18583],return:"+37.52%",isPositive:!0}}[t],k={labels:j.labels,datasets:[{label:"投資組合",data:j.portfolio,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,yAxisID:"y"},{label:"台股加權指數",data:j.benchmark,borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",borderWidth:2,fill:!1,tension:.4,borderDash:[5,5],yAxisID:"y1"}]},M=[{title:"總回報率",value:j.return,isPositive:j.isPositive,description:`${t}期間表現`,icon:j.isPositive?n.ArrowTrendingUpIcon:y.ArrowTrendingDownIcon},{title:"年化收益率",value:"+22.4%",isPositive:!0,description:"折算年度表現",icon:n.ArrowTrendingUpIcon},{title:"最大回撤",value:"-8.2%",isPositive:!1,description:"最大下跌幅度",icon:y.ArrowTrendingDownIcon},{title:"波動率",value:"15.3%",isPositive:null,description:"風險水平指標",icon:m.ChartBarIcon}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-100/30 to-purple-100/30 rounded-full blur-3xl -translate-y-32 translate-x-32"}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:(0,s.jsx)(d,{className:"h-7 w-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"投資組合摘要"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"您的財富增長概況"})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["最後更新: ",e.lastUpdate]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:[(0,s.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between space-y-6 md:space-y-0 md:space-x-8",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:"總資產價值"}),(0,s.jsxs)("div",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent pb-2",children:["NT$ ",o(e.totalValue)]}),(0,s.jsx)("div",{className:"h-1 w-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full "})]}),(0,s.jsxs)("div",{className:"space-y-1 pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:"總收益"}),(0,s.jsxs)("div",{className:`px-2 py-1 rounded-full text-sm font-semibold${u(e.totalReturn.percentage)>=0?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:[u(e.totalReturn.percentage)>=0?"+":"",(e=>{if("number"==typeof e)return e.toFixed(2)+"%";if("string"==typeof e){let t=parseFloat(e.replace("%",""));return isNaN(t)?"0.00%":t.toFixed(2)+"%"}return"0.00%"})(e.totalReturn.percentage)]})]}),(0,s.jsxs)("div",{className:`text-4xl font-bold pb-2 ${h(e.totalReturn.value)>=0?"text-emerald-600":"text-red-500"}`,children:[h(e.totalReturn.value)>=0?"+":"","NT$ ",o(e.totalReturn.value)]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(b.KeyIcon,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-blue-900",children:"資金運用狀況"})]}),(0,s.jsxs)("div",{className:"text-xs text-blue-600 bg-blue-100 px-3 py-1 rounded-full",children:[(0,s.jsxs)("span",{className:"font-semibold",children:["NT$ ",2450600..toLocaleString()]})," ","/ NT$ ",5e6.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-3 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full relative transition-all duration-1000 ease-out",style:{width:"49.012%"},children:(0,s.jsx)("div",{className:"absolute inset-0 bg-white/30 animate-pulse"})})}),(0,s.jsx)("div",{className:"absolute -top-1 bg-white rounded-full p-1 shadow-lg transition-all duration-1000 ease-out -ml-2",style:{left:"49.012%"},children:(0,s.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"})})]}),(0,s.jsxs)("div",{className:"text-xs text-blue-700 mt-2 flex justify-between",children:[(0,s.jsxs)("span",{children:["可用餘額"," ",(0,s.jsxs)("span",{className:"font-semibold",children:["NT$"," ",2549400..toLocaleString()]})]}),(0,s.jsxs)("span",{children:["資金運用率"," ",(0,s.jsxs)("span",{className:"font-semibold",children:["49.0","%"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-6 rounded-2xl border border-blue-100 shadow-lg relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-200/20 to-indigo-200/20 rounded-full blur-xl"}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.ChartBarIcon,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("div",{className:"text-base font-bold text-gray-800",children:"近30日資產趨勢"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"每日資產價值變化軌跡"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:["上漲 ",N.upDays," 天"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:["下跌 ",N.totalDays-N.upDays," 天"]})]})]})]}),(0,s.jsxs)("div",{className:"text-right space-y-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"較期初變化"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["NT$ ",N.change>=0?"+":"",N.change.toLocaleString()]}),(0,s.jsxs)("div",{className:`text-lg font-bold px-3 py-1.5 rounded-full shadow-sm ${N.changePercent>=0?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:[N.changePercent>=0?"+":"",N.changePercent,"%"]})]})]})]}),(0,s.jsx)("div",{className:"h-32 relative mb-4 bg-white rounded-xl p-3 shadow-inner",children:(0,s.jsx)(aQ,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(59, 130, 246, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:()=>"",label:function(e){let t=e.parsed,i=null;if(null==t)i=null;else if("number"==typeof t)i=t;else if("object"==typeof t&&"y"in t){let e=t.y;i="number"==typeof e?e:null}return null==i?"NT$ N/A":`NT$${i.toLocaleString()}`}}}},scales:{x:{display:!1},y:{display:!1}},elements:{point:{radius:0,hoverRadius:4,backgroundColor:"rgb(59, 130, 246)",borderColor:"white",borderWidth:2},line:{tension:.4,borderWidth:2.5,shadowColor:"rgba(59, 130, 246, 0.3)",shadowBlur:10,shadowOffsetY:2}},interaction:{intersect:!1,mode:"index"}},data:_})}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100 relative z-10",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("div",{className:"p-1 bg-blue-500 rounded-full mt-0.5",children:(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"趨勢分析"}),(0,s.jsx)("div",{className:"text-xs text-blue-700",children:N.changePercent>0?`資產呈現上升趨勢，月內累計增長 ${N.changePercent}%，表現穩健。`:N.changePercent<-2?`資產出現調整，建議關注市場變化並考慮風險控制。`:`資產表現相對穩定，波動控制在合理範圍內。`})]})]})})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-100/50 to-purple-100/50 rounded-full blur-2xl -translate-y-16 translate-x-16"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center",children:[(0,s.jsx)(r,{className:"h-4 w-4 mr-2 text-gray-600"}),"資產配置"]}),(0,s.jsx)("div",{className:"h-48 mb-6 relative",children:(0,s.jsx)(a0,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:"60%"}})}),(0,s.jsx)("div",{className:"space-y-3",children:w.labels.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"block w-3 h-3 rounded-full mr-3 shadow-sm",style:{backgroundColor:w.datasets[0].backgroundColor[t]}}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-full",children:[w.datasets[0].data[t],"%"]})]},t))})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"年化報酬率"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"年度化收益表現"})]}),(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl",children:(0,s.jsx)(m.ChartBarIcon,{className:"h-6 w-6 text-white"})})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"+22.4%"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["較市場指數"," ",(0,s.jsx)("span",{className:"text-emerald-600 font-semibold",children:"+3.2%"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"75%"}})})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"投資標的數"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"分散投資程度"})]}),(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl",children:(0,s.jsx)(l,{className:"h-6 w-6 text-white"})})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"10"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:["最高配置:"," ",(0,s.jsx)("span",{className:"font-semibold text-indigo-600",children:"AAPL (12.8%)"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"股票: 4"}),(0,s.jsx)("span",{className:"text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"ETF: 3"}),(0,s.jsx)("span",{className:"text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:"其他: 3"})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"投資組合β值"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"市場波動敏感度"})]}),(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:(0,s.jsx)(g,{className:"h-6 w-6 text-white"})})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"0.85"}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-3",children:"較低市場波動敏感度"}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"42%"}})})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 transition-all duration-300 hover:shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"最近交易"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"近期活動統計"})]}),(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-xl",children:(0,s.jsx)(p,{className:"h-6 w-6 text-white"})})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"5/15"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["買入:"," ",(0,s.jsx)("span",{className:"font-semibold text-green-600",children:"台積電 (50股)"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"3筆交易 in 最近30天"})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-200/20 to-purple-200/20 rounded-full blur-3xl -translate-y-48 translate-x-48"}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg",children:(0,s.jsx)(v,{className:"h-7 w-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI智能投資見解"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"個人化投資建議與風險提醒"})]})]}),(0,s.jsxs)("button",{className:"text-sm text-blue-600 font-medium flex items-center bg-white/70 hover:bg-white px-4 py-2 rounded-full transition-all duration-200",children:["查看完整建議",(0,s.jsx)(f,{className:"h-4 w-4 ml-1"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10",children:[(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex-shrink-0",children:(0,s.jsx)(x,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"再平衡建議"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"科技股比重達57.8%，明顯高於建議的35%上限。考慮減持AAPL和MSFT各15-20%。"}),(0,s.jsxs)("div",{className:"flex items-center text-xs",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 rounded-full mr-2 font-medium",children:"高優先"}),(0,s.jsx)("span",{className:"text-blue-600 font-medium",children:"預期風險降低15%"})]})]})]})}),(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex-shrink-0",children:(0,s.jsx)(f,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"投資機會"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"綠能產業具增長潛力，政策支持力度增強。建議分配約5%資金至ICLN清潔能源ETF。"}),(0,s.jsxs)("div",{className:"flex items-center text-xs",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full mr-2 font-medium",children:"中優先"}),(0,s.jsx)("span",{className:"text-green-600 font-medium",children:"潛在年化收益+3.2%"})]})]})]})}),(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/30 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex-shrink-0",children:(0,s.jsx)(c.ShieldCheckIcon,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"通膨風險防禦"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"面對攀升的通膨數據，投資組合缺少足夠的防禦性資產。建議增加GLD黃金ETF (5-8%)。"}),(0,s.jsxs)("div",{className:"flex items-center text-xs",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 rounded-full mr-2 font-medium",children:"高優先"}),(0,s.jsx)("span",{className:"text-orange-600 font-medium",children:"通膨保護能力+40%"})]})]})]})})]}),(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/30 flex justify-between items-center relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"投資組合健康度"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-blue-600",children:"76"}),(0,s.jsx)("div",{className:"text-sm text-blue-400",children:"/100"}),(0,s.jsx)("div",{className:"w-16 h-2 bg-blue-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full",style:{width:"76%"}})})]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 bg-white/50 px-3 py-1 rounded-full",children:"最後更新: 2024-05-28 10:30"})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mb-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-green-100/30 to-blue-100/30 rounded-full blur-3xl -translate-y-32 -translate-x-32"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4 lg:mb-0",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:(0,s.jsx)(d,{className:"h-7 w-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"績效走勢分析"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合歷史表現追蹤"})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"1週",value:"1W"},{label:"1月",value:"1M"},{label:"3月",value:"3M"},{label:"6月",value:"6M"},{label:"1年",value:"1Y"},{label:"全部",value:"ALL"}].map(e=>(0,s.jsx)("button",{onClick:()=>i(e.value),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${t===e.value?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.label},e.value))})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 relative z-10",children:M.map((e,t)=>{let i=e.icon;return(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,s.jsx)(i,{className:`h-5 w-5 ${!0===e.isPositive?"text-green-500":!1===e.isPositive?"text-red-500":"text-gray-500"}`})]}),(0,s.jsx)("div",{className:`text-2xl font-bold mb-1 ${!0===e.isPositive?"text-green-600":!1===e.isPositive?"text-red-600":"text-gray-800"}`,children:e.value}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},t)})}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"投資組合 vs 基準指數"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-gray-600",children:"投資組合"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-0.5 bg-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-gray-600",children:"台股加權指數"})]})]})]}),(0,s.jsx)("div",{className:"h-[400px]",children:(0,s.jsx)(aQ,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let t=e.dataset.label||"";t&&(t+=": ");let i=e.parsed,s=null;if(null==i)s=null;else if("number"==typeof i)s=i;else if("object"==typeof i&&"y"in i){let e=i.y;s="number"==typeof e?e:null}return null==s?t+="N/A":0===e.datasetIndex?t+="NT$"+Number(s).toLocaleString():t+=Number(s).toLocaleString(),t}}}},scales:{x:{grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"投資組合價值 (NT$)"},ticks:{callback:function(e){return"NT$"+(Number(e)/1e6).toFixed(1)+"M"}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"基準指數"},grid:{drawOnChartArea:!1}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},data:k})}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"期間回報率"}),(0,s.jsx)("div",{className:`text-lg font-bold ${j.isPositive?"text-green-600":"text-red-600"}`,children:j.return})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"超額回報率"}),(0,s.jsx)("div",{className:"text-lg font-bold text-blue-600",children:"+5.2%"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"夏普比率"}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-800",children:"1.65"})]})]})})]}),(0,s.jsx)("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 relative z-10",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,s.jsx)(m.ChartBarIcon,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-base font-semibold text-blue-900 mb-2",children:"績效分析洞察"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-blue-800 mb-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"✓ 表現優異："}),"您的投資組合在",t,"期間表現優於市場基準指數5.2%，顯示良好的選股和配置策略。"]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-blue-800",children:[(0,s.jsx)("span",{className:"font-medium",children:"→ 風險控制："}),"夏普比率1.65表示在承擔相對風險下獲得了不錯的回報，風險調整後收益表現良好。"]})})]})]})]})})]})]})},a2=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"}))}),a5=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"}))}),a3=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}),a6=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0 1 18 16.5h-2.25m-7.5 0h7.5m-7.5 0-1 3m8.5-3 1 3m0 0 .5 1.5m-.5-1.5h-9.5m0 0-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0 1 16.5 7.605"}))});var a4=e.i(57748);let a8=a.forwardRef(function({title:e,titleId:t,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))});var a7=e.i(9465),a9=e.i(9456),re=e.i(20766),rt=e.i(7168);class ri extends rt.BaseService{static instance;static getInstance(){return ri.instance||(ri.instance=new ri),ri.instance}constructor(){super()}async getUserPortfolios(e){try{return this.validateServiceInput(e,"用戶ID"),await this.executeWithRetry(async()=>(await new Promise(e=>setTimeout(e,300)),[{id:"portfolio_1",name:"主要投資組合",description:"長期投資的核心持股",userId:e,totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:[],transactions:[],createdAt:"2024-01-01T00:00:00Z",isDefault:!0},{id:"portfolio_2",name:"短期交易組合",description:"短期交易和波段操作",userId:e,totalValue:"500000",totalCost:48e4,totalGainLoss:2e4,totalGainLossPercent:4.17,dayChange:-5e3,dayChangePercent:-1,holdings:[],transactions:[],createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-06-01T10:00:00Z",isDefault:!1}]))}catch(e){return this.handleServiceError(e,"獲取用戶投資組合")}}async getPortfolioById(e){try{return this.validateServiceInput(e,"投資組合ID"),await this.executeWithRetry(async()=>{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioHoldings(e),i=await this.getPortfolioTransactions();return{id:e,name:"主要投資組合",description:"長期投資的核心持股",userId:"user_001",totalValue:"1250000",totalCost:1e6,totalGainLoss:25e4,totalGainLossPercent:25,dayChange:15e3,dayChangePercent:1.2,holdings:t,transactions:i,createdAt:"2024-01-01T00:00:00Z",isDefault:!0}})}catch(e){return this.handleServiceError(e,"獲取投資組合詳情")}}async getPortfolioHoldings(e){try{return await new Promise(e=>setTimeout(e,200)),[{id:"holding_1",portfolioId:e,symbol:"2330",name:"台積電",quantity:1e3,averagePrice:"500",currentPrice:"580",marketValue:58e4,costBasis:5e5,gainLoss:8e4,gainLossPercent:16,dayChange:1e4,dayChangePercent:1.75,weight:46.4,lastUpdated:"2024-06-01T10:00:00Z"},{id:"holding_2",portfolioId:e,symbol:"2317",name:"鴻海",quantity:2e3,averagePrice:"100",currentPrice:"105.5",marketValue:211e3,costBasis:2e5,gainLoss:11e3,gainLossPercent:5.5,dayChange:5e3,dayChangePercent:2.43,weight:16.9,lastUpdated:"2024-06-01T10:00:00Z"}]}catch(e){throw console.error("Error fetching portfolio holdings:",e),Error("無法獲取持股明細")}}async getPortfolioTransactions(){try{return await new Promise(e=>setTimeout(e,250)),[{id:"tx_1",date:"2024-05-15",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"520",total:"260000",note:"分批建倉"},{id:"tx_2",date:"2024-04-10",type:"買入",symbol:"2330",name:"台積電",quantity:500,price:"480",total:"240000",note:"逢低加碼"},{id:"tx_3",date:"2024-03-20",type:"買入",symbol:"2317",name:"鴻海",quantity:2e3,price:"100",total:"200000",note:"新增持股"}]}catch(e){throw console.error("Error fetching portfolio transactions:",e),Error("無法獲取交易記錄")}}async createPortfolio(e){try{return await new Promise(e=>setTimeout(e,400)),{id:`portfolio_${Date.now()}`,name:e.name,description:e.description,userId:e.userId,totalValue:"0",totalCost:0,totalGainLoss:0,totalGainLossPercent:0,dayChange:0,dayChangePercent:0,holdings:[],transactions:[],createdAt:new Date().toISOString(),isDefault:e.isDefault||!1}}catch(e){throw console.error("Error creating portfolio:",e),Error("無法創建投資組合")}}async updatePortfolio(e,t){try{await new Promise(e=>setTimeout(e,300));let i=await this.getPortfolioById(e);if(!i)throw Error("投資組合不存在");return{...i,...t,updatedAt:new Date().toISOString()}}catch(e){throw console.error("Error updating portfolio:",e),Error("無法更新投資組合")}}async deletePortfolio(e){try{await new Promise(e=>setTimeout(e,200)),console.log(`Portfolio ${e} deleted`)}catch(e){throw console.error("Error deleting portfolio:",e),Error("無法刪除投資組合")}}async addTransaction(e){try{return await new Promise(e=>setTimeout(e,300)),{id:`tx_${Date.now()}`,date:e.date,type:"buy"===e.type?"買入":"賣出",symbol:e.symbol,name:e.symbol,quantity:e.quantity,price:e.price.toString(),total:(e.quantity*e.price).toString(),note:e.notes}}catch(e){throw console.error("Error adding transaction:",e),Error("無法新增交易記錄")}}async getPortfolioPerformance(e,t="1y"){try{return await new Promise(e=>setTimeout(e,400)),(e=>{let t=new Date,i=[],s=[],a=0;switch(e){case"1m":a=30;break;case"3m":a=90;break;case"6m":a=180;break;default:a=365}let r=1e6;for(let e=0;e<a;e++){let n=new Date(t.getTime()-(a-1-e)*864e5);i.push(n.toISOString().split("T")[0]);let l=(Math.random()-.5)*.03;r*=1+l,s.push(Math.round(r))}return{labels:i,portfolio:s}})(t)}catch(e){throw console.error("Error fetching portfolio performance:",e),Error("無法獲取投資組合績效")}}async getAssetAllocation(){try{return await new Promise(e=>setTimeout(e,200)),[{name:"科技股",category:"科技股",value:75e4,percentage:60,color:"#3B82F6"},{name:"金融股",category:"金融股",value:25e4,percentage:20,color:"#10B981"},{name:"傳統產業",category:"傳統產業",value:15e4,percentage:12,color:"#F59E0B"},{name:"現金",category:"現金",value:1e5,percentage:8,color:"#6B7280"}]}catch(e){throw console.error("Error fetching asset allocation:",e),Error("無法獲取資產配置")}}async getPortfolioAnalysis(e){try{await new Promise(e=>setTimeout(e,300));let t=await this.getPortfolioHoldings(e),i=t.reduce((e,t)=>e+(t.marketValue||0),0),s=t.reduce((e,t)=>e+(t.costBasis||0),0),a=i-s,r=t.reduce((e,t)=>e+(t.dayChange||0),0),n=[...t].sort((e,t)=>(t.gainLossPercent||0)-(e.gainLossPercent||0)),l=n[0],o=n[n.length-1];return{totalValue:i,totalCost:s,totalGainLoss:a,totalGainLossPercent:a/s*100,dayChange:r,dayChangePercent:r/i*100,bestPerformer:{symbol:l.symbol,gainLoss:l.gainLoss||0,gainLossPercent:l.gainLossPercent||0},worstPerformer:{symbol:o.symbol,gainLoss:o.gainLoss||0,gainLossPercent:o.gainLossPercent||0}}}catch(e){throw console.error("Error analyzing portfolio:",e),Error("無法分析投資組合")}}async searchTransactions(e){try{await new Promise(e=>setTimeout(e,200));let t=await this.getPortfolioTransactions();if(e.symbol&&(t=t.filter(t=>t.symbol===e.symbol)),e.type){let i="buy"===e.type?"買入":"賣出";t=t.filter(e=>e.type===i)}return t}catch(e){throw console.error("Error searching transactions:",e),Error("無法搜索交易記錄")}}}class rs extends re.BaseController{static instance;portfolioModel;portfolioService;constructor(){super(),this.portfolioModel=a9.PortfolioModel.getInstance(),this.portfolioService=ri.getInstance()}static getInstance(){return rs.instance||(rs.instance=new rs),rs.instance}convertServicePortfolioToModel(e){return{id:e.id,userId:e.userId,totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdings:e.holdings.map(e=>this.convertServiceHoldingToModel(e)),allocation:e.allocation?.map(e=>this.convertServiceAllocationToModel(e))||[],performance:this.convertServicePerformanceToModel(e.performance),transactions:e.transactions?.map(e=>this.convertServiceTransactionToModel(e))||[],risk:{riskScore:5,volatility:15,beta:1,sharpeRatio:1,maxDrawdown:-10,riskLevel:"medium"},overview:{totalValue:"string"==typeof e.totalValue?parseFloat(e.totalValue.replace(/,/g,"")):0,totalReturn:e.totalGainLoss||0,dayChange:e.dayChange||0,dayChangePercent:e.dayChangePercent||0,holdingsCount:e.holdings.length,lastUpdated:e.updatedAt||new Date().toISOString()},aiRecommendations:[]}}convertServiceHoldingToModel(e){return{symbol:e.symbol,name:e.name,price:e.currentPrice,priceChange:e.dayChange||0,quantity:e.quantity.toString(),marketValue:e.totalValue||"0",costBasis:(e.costBasis||0).toString(),totalReturn:{value:e.unrealizedReturn||"0",percentage:e.unrealizedReturnPercent||"0%"},weight:e.weight?`${e.weight}%`:"0%"}}convertServiceAllocationToModel(e){return{category:e.category||e.name,percentage:e.percentage,value:e.value,color:e.color}}convertServicePerformanceToModel(e){return e?{labels:e.labels,portfolioValue:Array.isArray(e.values)?e.values.map(e=>"string"==typeof e?parseFloat(e):e):[],benchmarkValue:e.benchmarkValues?e.benchmarkValues.map(e=>"string"==typeof e?parseFloat(e):e):[],timeRange:"1M"}:{labels:[],portfolioValue:[],benchmarkValue:[],timeRange:"1M"}}convertServiceTransactionToModel(e){return{id:e.id,symbol:e.symbol,type:"買入"===e.type?"buy":"sell",quantity:"string"==typeof e.quantity?parseFloat(e.quantity):e.quantity,price:parseFloat(e.price.replace(/[^\d.-]/g,"")),amount:parseFloat(e.total.replace(/[^\d.-]/g,"")),date:e.date,fee:0,status:"completed"}}async getPortfolio(e){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");try{let t=await this.portfolioService.getUserPortfolios(e),i=t.find(e=>e.isDefault)||t[0];if(i)return this.convertServicePortfolioToModel(i)}catch(e){console.warn("服務層獲取失敗，使用模型層:",e)}let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t},"獲取投資組合")}async getUserPortfolios(e){return this.executeWithErrorHandling(async()=>(this.validateRequired(e,"用戶ID"),(await this.portfolioService.getUserPortfolios(e)).map(e=>this.convertServicePortfolioToModel(e))),"獲取用戶投資組合列表")}async addTransaction(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID"),this.validateRequired(t.symbol,"股票代碼"),this.validatePositiveNumber(t.quantity,"數量"),this.validatePositiveNumber(t.price,"價格");let i={portfolioId:t.portfolioId||`${e}_default`,symbol:t.symbol,type:t.type,quantity:t.quantity,price:t.price,date:t.date||new Date().toISOString(),fees:t.fees,notes:t.notes},s=await this.portfolioService.addTransaction(i);return this.convertServiceTransactionToModel(s)},"新增交易記錄")}async getPortfolioPerformance(e,t="1M"){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let i=await this.getPortfolio(e),s=await this.portfolioService.getPortfolioPerformance(i.id,t.toLowerCase());return this.convertServicePerformanceToModel(s)},"獲取投資組合績效")}async getAssetAllocation(e){return this.executeWithErrorHandling(async()=>(this.validateRequired(e,"用戶ID"),(await this.portfolioService.getAssetAllocation()).map(e=>this.convertServiceAllocationToModel(e))),"獲取資產配置")}async getTransactionHistory(e,t){return this.executeWithErrorHandling(async()=>{this.validateRequired(e,"用戶ID");let i=(await this.portfolioService.getPortfolioTransactions()).map(e=>this.convertServiceTransactionToModel(e));return t?i.slice(0,t):i},"獲取交易歷史")}async updateHolding(e,t){try{return await this.portfolioModel.updateHolding(e,t.symbol,t.updates)}catch(e){throw Error(`更新持股失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async getPortfolioSummary(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let i=t.holdings.length>0?t.holdings.reduce((e,t)=>parseFloat(e.marketValue.replace(",",""))>parseFloat(t.marketValue.replace(",",""))?e:t):null;return{totalValue:t.totalValue,totalReturn:t.totalReturn,dayChange:t.dayChange,dayChangePercent:t.dayChangePercent,holdingsCount:t.holdings.length,topHolding:i}}catch(e){throw Error(`獲取投資組合摘要失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async getPerformanceAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");return t.performance}catch(e){throw Error(`獲取績效分析失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async getRiskAnalysis(e){try{let t=await this.portfolioModel.getPortfolio(e);if(!t)throw Error("投資組合不存在");let i=this.generateRiskRecommendations(t.risk.riskLevel);return{riskScore:t.risk.riskScore,riskLevel:t.risk.riskLevel,volatility:t.risk.volatility,sharpeRatio:t.risk.sharpeRatio,maxDrawdown:t.risk.maxDrawdown,beta:t.risk.beta,recommendations:i}}catch(e){throw Error(`獲取風險分析失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async exportPortfolioReport(e,t="pdf"){try{if(!await this.portfolioModel.getPortfolio(e))throw Error("投資組合不存在");let i=`portfolio_report_${e}_${new Date().toISOString().split("T")[0]}.${t}`;return{downloadUrl:`/api/reports/${i}`,fileName:i}}catch(e){throw Error(`匯出投資組合報表失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async getAllocation(e){return this.getAssetAllocation(e)}async exportReport(e,t="pdf"){return this.exportPortfolioReport(e,t)}generateRiskRecommendations(e){switch(e){case"low":return["您的投資組合風險較低，適合穩健型投資者","可考慮增加一些成長型股票以提升報酬率","建議維持適當的現金比例"];case"medium":return["您的投資組合風險適中，配置較為均衡","建議定期檢視並調整資產配置","可考慮分散投資至不同產業"];case"high":return["您的投資組合風險較高，請注意風險控制","建議增加防御性資產的比例","考慮設定停損點以控制損失"];default:return["建議諮詢專業理財顧問"]}}}var ra=e.i(90639);sE.register(sF,a_,ao,aj,aT,s0);let rr=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(139, 92, 246, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(156, 163, 175, 0.7)"],rn=["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(139, 92, 246, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(156, 163, 175, 1)"],rl=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)","rgba(236, 72, 153, 0.7)","rgba(20, 184, 166, 0.7)","rgba(34, 197, 94, 0.7)"],ro=["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(139, 92, 246, 1)","rgba(236, 72, 153, 1)","rgba(20, 184, 166, 1)","rgba(34, 197, 94, 1)"],rh=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)"],rd=["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(139, 92, 246, 1)"],rc=({data:e})=>{let[t,i]=(0,a.useState)("assetClass"),[n,l]=(0,a.useState)(!1),o=rs.getInstance(),{data:d,execute:c}=(0,ra.useMvcController)(),u=(0,a.useCallback)(async()=>{await c(async()=>{let e=await o.getAssetAllocation("user_001");return console.log("資產配置載入成功:",e),e})},[c,o]);(0,a.useEffect)(()=>{e&&e.byAssetClass&&0!==e.byAssetClass.length||u().catch(e=>{e instanceof Error?console.error("載入資產配置失敗:",e.message):console.error("載入資產配置失敗:",e)})},[e,u]);let m=async()=>{try{let e=await o.getRiskAnalysis("user_001");console.log("重新平衡分析:",e)}catch(e){console.error("重新平衡分析失敗:",e)}},p=(0,a.useMemo)(()=>d&&d.length>0?{byAssetClass:d.map(e=>({name:e.category,percentage:e.percentage})),bySector:[],byRegion:[],recommendations:[]}:e,[d,e]),x=[{name:"股票",percentage:60},{name:"ETF",percentage:25},{name:"債券",percentage:10},{name:"加密貨幣",percentage:3},{name:"現金",percentage:2}],{chartData:f,targetData:b}=(e=>{let t,i;switch(e){case"assetClass":t={labels:(p.byAssetClass||[]).map(e=>e.name),datasets:[{data:(p.byAssetClass||[]).map(e=>e.percentage),backgroundColor:[...rr],borderColor:[...rn],borderWidth:2}]},n&&(i={labels:(p.byAssetClass||[]).map(e=>e.name),datasets:[{label:"目前配置",data:(p.byAssetClass||[]).map(e=>e.percentage),backgroundColor:["rgba(59, 130, 246, 0.7)"],borderColor:["rgba(59, 130, 246, 1)"],borderWidth:1},{label:"推薦配置",data:x.map(e=>e.percentage),backgroundColor:["rgba(16, 185, 129, 0.7)"],borderColor:["rgba(16, 185, 129, 1)"],borderWidth:1}]});break;case"sector":t={labels:(p.bySector||[]).map(e=>e.name),datasets:[{data:(p.bySector||[]).map(e=>e.percentage),backgroundColor:[...rl],borderColor:[...ro],borderWidth:2}]};break;case"region":t={labels:(p.byRegion||[]).map(e=>e.name),datasets:[{data:(p.byRegion||[]).map(e=>e.percentage),backgroundColor:[...rh],borderColor:[...rd],borderWidth:2}]};break;default:t={labels:[],datasets:[{data:[],backgroundColor:[],borderColor:[],borderWidth:2}]}}return{chartData:t,targetData:i}})(t),y=("assetClass"!==t?[]:(p.byAssetClass||[]).map(e=>{let t=x.find(t=>t.name===e.name)||{name:e.name,percentage:0},i=Number((e.percentage-t.percentage).toFixed(1));return{name:e.name,current:e.percentage,target:t.percentage,deviation:i,status:i>5?"過高":i<-5?"過低":"適中"}})).filter(e=>Math.abs(e.deviation)>5),w=(0,a.useCallback)(e=>{i(e)},[]),_=(0,a.useCallback)(()=>{l(e=>!e)},[]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-100/30 to-indigo-100/30 rounded-full blur-3xl -translate-y-32 translate-x-32"}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:(0,s.jsx)(r,{className:"h-7 w-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"資產配置分析"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合多元化配置概況"})]})]}),(0,s.jsx)("div",{className:"flex space-x-3",children:(0,s.jsxs)("button",{onClick:_,className:`flex items-center px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 ${n?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(0,s.jsx)(g,{className:"h-4 w-4 mr-2"}),"對比目標配置"]})})]}),(0,s.jsxs)("div",{className:"flex border-b border-gray-200 mb-8 relative z-10",children:[(0,s.jsx)("button",{onClick:()=>w("assetClass"),className:`py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ${"assetClass"===t?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r,{className:"h-5 w-5 mr-2"}),"按資產類別"]})}),(0,s.jsx)("button",{onClick:()=>w("sector"),className:`py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ${"sector"===t?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a2,{className:"h-5 w-5 mr-2"}),"按產業分布"]})}),(0,s.jsx)("button",{onClick:()=>w("region"),className:`py-3 px-6 font-medium text-sm border-b-2 transition-all duration-200 ${"region"===t?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a5,{className:"h-5 w-5 mr-2"}),"按地區分布"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 relative z-10",children:[(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50",children:(0,s.jsx)("div",{className:"h-80",children:n&&"assetClass"===t&&b?(0,s.jsx)(aJ,{data:b,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{position:"top",labels:{font:{size:13,weight:500},usePointStyle:!0,pointStyle:"circle",color:"#374151"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:12,callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),t+=e.parsed.x+"%"}}}},scales:{x:{stacked:!1,title:{display:!0,text:"資產配置百分比",font:{size:12,weight:500},color:"#6B7280"},ticks:{callback:function(e){return e+"%"},color:"#6B7280"},grid:{color:"rgba(156, 163, 175, 0.2)"}},y:{stacked:!1,ticks:{color:"#374151",font:{size:12,weight:500}},grid:{display:!1}}}}}):(0,s.jsx)(a0,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:13,weight:500},padding:20,usePointStyle:!0,pointStyle:"circle",color:"#374151"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"white",bodyColor:"white",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:12,callbacks:{label:function(e){let t=e.label||"";return t&&(t+=": "),t+=e.parsed+"%"}}}},cutout:"65%"}})})}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,s.jsx)(a4.SparklesIcon,{className:"h-5 w-5 text-blue-500 mr-2"}),"配置明細"]}),(0,s.jsxs)("div",{className:"space-y-3",children:["assetClass"===t&&(0,s.jsx)("div",{className:"overflow-hidden bg-white rounded-xl shadow-sm",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"資產類別"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"目前配置"}),n&&(0,s.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"目標配置"}),n&&(0,s.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"差異"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(p.byAssetClass||[]).map((e,t)=>{let i=n?x.find(t=>t.name===e.name)||{name:e.name,percentage:0}:null,a=n&&i?Number((e.percentage-i.percentage).toFixed(1)):0;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:rr[t%rr.length]}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,s.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:[e.percentage,"%"]}),n&&i&&(0,s.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-600",children:[i.percentage,"%"]}),n&&(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:(0,s.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${a>0?"bg-red-100 text-red-800":a<0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[a>0?"+":"",a,"%"]})})]},`${e.name}-${t}`)})})]})}),"sector"===t&&(0,s.jsx)("div",{className:"space-y-3",children:(p.bySector||[]).map((e,t)=>{let i;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:(i=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(139, 92, 246, 0.7)","rgba(236, 72, 153, 0.7)","rgba(20, 184, 166, 0.7)","rgba(34, 197, 94, 0.7)"])[t%i.length]}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]}),(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded-full",children:[e.percentage,"%"]})]},`sector-${e.name}-${t}`)})}),"region"===t&&(0,s.jsx)("div",{className:"space-y-3",children:(p.byRegion||[]).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:rh[t%rh.length]}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]}),(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded-full",children:[e.percentage,"%"]})]},`region-${e.name}-${t}`))})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-red-100/40 to-orange-100/40 rounded-full blur-2xl -translate-y-16 -translate-x-16"}),(0,s.jsxs)("div",{className:"flex items-center mb-6 relative z-10",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl mr-3",children:(0,s.jsx)(a6,{className:"h-6 w-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"配置風險分析"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合風險評估"})]})]}),(0,s.jsxs)("div",{className:"space-y-4 relative z-10",children:[(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"集中度風險"}),(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-200 text-yellow-900",children:[(0,s.jsx)(a7.ExclamationTriangleIcon,{className:"h-3 w-3 mr-1"}),"中等"]})]}),(0,s.jsx)("div",{className:"w-full bg-yellow-200 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all duration-1000",style:{width:"60%"}})}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"科技股佔比57.8%，高於建議的35%上限"})]}),(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"區域風險"}),(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-900",children:[(0,s.jsx)(a8,{className:"h-3 w-3 mr-1"}),"適中"]})]}),(0,s.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-1000",style:{width:"55%"}})}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"台灣市場佔比40%，地域集中度較高"})]}),(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl border border-red-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"通膨抵禦力"}),(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-200 text-red-900",children:[(0,s.jsx)(a7.ExclamationTriangleIcon,{className:"h-3 w-3 mr-1"}),"較低"]})]}),(0,s.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 h-2 rounded-full transition-all duration-1000",style:{width:"30%"}})}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"抗通膨資產配置僅占8%，建議至少15%"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-100/40 to-blue-100/40 rounded-full blur-2xl -translate-y-16 translate-x-16"}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-500 to-blue-500 rounded-xl mr-3",children:(0,s.jsx)(a3,{className:"h-6 w-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"配置優化建議"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"AI智能調整方案"})]})]}),(0,s.jsxs)("button",{onClick:m,className:"flex items-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-xl transition-all duration-200",children:[(0,s.jsx)(h.ArrowPathIcon,{className:"h-4 w-4 mr-1"}),"再平衡"]})]}),(0,s.jsx)("div",{className:"relative z-10",children:n&&y.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[y.map((e,t)=>(0,s.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-200 hover:shadow-md transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,s.jsx)("span",{className:`ml-3 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.deviation>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:e.status})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["現在:"," ",(0,s.jsxs)("span",{className:"font-medium",children:[e.current,"%"]})," | 目標:"," ",(0,s.jsxs)("span",{className:"font-medium",children:[e.target,"%"]})," | 差異:"," ",(0,s.jsxs)("span",{className:`font-medium ${e.deviation>0?"text-red-600":"text-green-600"}`,children:[e.deviation>0?"+":"",e.deviation,"%"]})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("button",{className:`text-xs px-3 py-1 rounded-lg font-medium transition-colors ${e.deviation>0?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:e.deviation>0?"減持":"增持"})})]})},t)),(0,s.jsx)("div",{className:"pt-4 mt-4 border-t border-gray-200",children:(0,s.jsxs)("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg",children:[(0,s.jsx)(v,{className:"h-4 w-4 inline mr-2"}),"生成AI再平衡計畫"]})})]}):(0,s.jsx)("div",{className:"space-y-3",children:(p.recommendations||[]).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-4 rounded-xl border border-gray-200 hover:bg-gray-50 transition-all duration-200",children:[(0,s.jsx)("span",{className:`flex-shrink-0 p-2 rounded-lg mt-0.5 ${"positive"===e.type?"bg-green-100":"neutral"===e.type?"bg-yellow-100":"bg-red-100"}`,children:(0,s.jsx)("span",{className:`block w-2 h-2 rounded-full ${"positive"===e.type?"bg-green-500":"neutral"===e.type?"bg-yellow-500":"bg-red-500"}`})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.text}),"negative"===e.type&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("button",{className:"text-xs px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium transition-colors",children:"查看調整方案"})})]})]},t))})})]})]})]})};var ru=e.i(24608),rg=e.i(42248),rm=e.i(50146),rp=e.i(13053);let rx=({data:e,color:t="#6366f1"})=>{let i=(0,a.useMemo)(()=>{if(!e||0===e.length)return[];let t=Math.min(...e),i=Math.max(...e)-t;return 0===i?e.map(()=>50):e.map(e=>100-Math.round((e-t)/i*100))},[e]);if(!i.length)return(0,s.jsx)("div",{className:"h-10"});let r=i.map((e,t)=>{let s=t/(i.length-1)*80;return`${s},${e/100*30}`}).join(" "),n=i[0]>i[i.length-1]?"down":"up";return(0,s.jsx)("svg",{width:60,height:20,className:"overflow-visible",children:(0,s.jsx)("polyline",{points:r,fill:"none",stroke:"up"===n?t||"#10B981":"#EF4444",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},rf=({holdings:e,onSelectHolding:t,selectedHolding:i})=>{let r=e&&e.length>0?e:[{symbol:"2330",name:"台積電",price:"NT$ 585.00",priceChange:1.75,quantity:"1000",marketValue:"NT$ 585,000",totalReturn:{value:"NT$ 85,000",percentage:"+17.0%"},costBasis:"NT$ 500,000",assetType:"tw_stock"},{symbol:"NVDA",name:"輝達",price:"US$ 875.28",priceChange:3.25,quantity:"50",marketValue:"NT$ 1,360,850",totalReturn:{value:"NT$ 485,350",percentage:"+55.4%"},costBasis:"NT$ 875,500",assetType:"us_stock"},{symbol:"AAPL",name:"蘋果公司",price:"US$ 192.35",priceChange:2.43,quantity:"100",marketValue:"NT$ 598,400",totalReturn:{value:"NT$ 76,200",percentage:"+14.6%"},costBasis:"NT$ 522,200",assetType:"us_stock"},{symbol:"VTI",name:"Vanguard整體股市ETF",price:"US$ 245.73",priceChange:.82,quantity:"200",marketValue:"NT$ 1,528,530",totalReturn:{value:"NT$ 228,530",percentage:"+17.6%"},costBasis:"NT$ 1,300,000",assetType:"etf"},{symbol:"MSFT",name:"微軟",price:"US$ 424.73",priceChange:1.18,quantity:"80",marketValue:"NT$ 1,056,280",totalReturn:{value:"NT$ 156,280",percentage:"+17.4%"},costBasis:"NT$ 900,000",assetType:"us_stock"},{symbol:"BTC",name:"比特幣",price:"US$ 67,542.30",priceChange:4.75,quantity:"25.5",marketValue:"NT$ 1,050,690",totalReturn:{value:"NT$ 200,690",percentage:"+23.6%"},costBasis:"NT$ 850,000",assetType:"crypto"},{symbol:"META",name:"Meta Platforms",price:"US$ 502.31",priceChange:1.67,quantity:"70",marketValue:"NT$ 1,093,540",totalReturn:{value:"NT$ 143,540",percentage:"+15.1%"},costBasis:"NT$ 950,000",assetType:"us_stock"},{symbol:"SPY",name:"SPDR S&P 500 ETF",price:"US$ 521.23",priceChange:.95,quantity:"100",marketValue:"NT$ 1,620,830",totalReturn:{value:"NT$ 220,830",percentage:"+15.8%"},costBasis:"NT$ 1,400,000",assetType:"etf"},{symbol:"GOOGL",name:"Alphabet",price:"US$ 166.54",priceChange:1.35,quantity:"150",marketValue:"NT$ 777,030",totalReturn:{value:"NT$ 77,030",percentage:"+11.0%"},costBasis:"NT$ 700,000",assetType:"us_stock"},{symbol:"TLT",name:"iShares 20年期美國公債ETF",price:"US$ 94.27",priceChange:-.45,quantity:"400",marketValue:"NT$ 1,171,836",totalReturn:{value:"NT$ 71,836",percentage:"+6.5%"},costBasis:"NT$ 1,100,000",assetType:"bond"},{symbol:"VNQ",name:"Vanguard Real Estate ETF",price:"US$ 89.45",priceChange:.78,quantity:"300",marketValue:"NT$ 833,850",totalReturn:{value:"NT$ 83,850",percentage:"+11.2%"},costBasis:"NT$ 750,000",assetType:"reit"},{symbol:"AMD",name:"超微半導體",price:"US$ 158.73",priceChange:4.12,quantity:"120",marketValue:"NT$ 592,248",totalReturn:{value:"NT$ 92,248",percentage:"+18.4%"},costBasis:"NT$ 500,000",assetType:"us_stock"},{symbol:"2317",name:"鴻海",price:"NT$ 108.50",priceChange:-.92,quantity:"2000",marketValue:"NT$ 217,000",totalReturn:{value:"NT$ 17,000",percentage:"+8.5%"},costBasis:"NT$ 200,000",assetType:"tw_stock"},{symbol:"TSLA",name:"特斯拉",price:"US$ 248.42",priceChange:-2.15,quantity:"60",marketValue:"NT$ 463,235",totalReturn:{value:"-NT$ 36,765",percentage:"-7.4%"},costBasis:"NT$ 500,000",assetType:"us_stock"},{symbol:"2454",name:"聯發科",price:"NT$ 765.00",priceChange:-1.42,quantity:"300",marketValue:"NT$ 229,500",totalReturn:{value:"-NT$ 10,500",percentage:"-4.4%"},costBasis:"NT$ 240,000",assetType:"tw_stock"},{symbol:"ETH",name:"以太坊",price:"US$ 3,845.67",priceChange:2.89,quantity:"2",marketValue:"NT$ 239,200",totalReturn:{value:"NT$ 39,200",percentage:"+19.6%"},costBasis:"NT$ 200,000",assetType:"crypto"},{symbol:"2882",name:"國泰金",price:"NT$ 61.80",priceChange:.65,quantity:"3000",marketValue:"NT$ 185,400",totalReturn:{value:"NT$ 15,400",percentage:"+9.1%"},costBasis:"NT$ 170,000",assetType:"tw_stock"},{symbol:"DOT",name:"波卡幣",price:"US$ 6.82",priceChange:-2.18,quantity:"2000",marketValue:"NT$ 424,240",totalReturn:{value:"-NT$ 75,760",percentage:"-15.2%"},costBasis:"NT$ 500,000",assetType:"crypto"},{symbol:"2308",name:"台達電",price:"NT$ 312.00",priceChange:1.95,quantity:"500",marketValue:"NT$ 156,000",totalReturn:{value:"NT$ 6,000",percentage:"+4.0%"},costBasis:"NT$ 150,000",assetType:"tw_stock"},{symbol:"0050",name:"元大台灣50",price:"NT$ 142.30",priceChange:.35,quantity:"1000",marketValue:"NT$ 142,300",totalReturn:{value:"NT$ 17,300",percentage:"+13.8%"},costBasis:"NT$ 125,000",assetType:"etf"},{symbol:"2002",name:"中鋼",price:"NT$ 30.15",priceChange:-1.15,quantity:"5000",marketValue:"NT$ 150,750",totalReturn:{value:"-NT$ 14,250",percentage:"-8.6%"},costBasis:"NT$ 165,000",assetType:"tw_stock"},{symbol:"1216",name:"統一",price:"NT$ 68.50",priceChange:1.48,quantity:"1500",marketValue:"NT$ 102,750",totalReturn:{value:"NT$ 12,750",percentage:"+14.2%"},costBasis:"NT$ 90,000",assetType:"tw_stock"},{symbol:"006208",name:"富邦台50",price:"NT$ 85.40",priceChange:.47,quantity:"1200",marketValue:"NT$ 102,480",totalReturn:{value:"NT$ 12,480",percentage:"+13.9%"},costBasis:"NT$ 90,000",assetType:"etf"},{symbol:"2412",name:"中華電",price:"NT$ 124.50",priceChange:-.4,quantity:"800",marketValue:"NT$ 99,600",totalReturn:{value:"NT$ 4,600",percentage:"+4.8%"},costBasis:"NT$ 95,000",assetType:"tw_stock"},{symbol:"2891",name:"中信金",price:"NT$ 35.85",priceChange:-.28,quantity:"2500",marketValue:"NT$ 89,625",totalReturn:{value:"NT$ 4,625",percentage:"+5.4%"},costBasis:"NT$ 85,000",assetType:"tw_stock"},{symbol:"ADA",name:"艾達幣",price:"US$ 0.48",priceChange:3.45,quantity:"10000",marketValue:"NT$ 149,280",totalReturn:{value:"NT$ 29,280",percentage:"+24.4%"},costBasis:"NT$ 120,000",assetType:"crypto"},{symbol:"00679B",name:"元大美債20年",price:"NT$ 36.78",priceChange:.22,quantity:"3000",marketValue:"NT$ 110,340",totalReturn:{value:"NT$ 10,340",percentage:"+10.3%"},costBasis:"NT$ 100,000",assetType:"bond"},{symbol:"2883",name:"開發金REIT",price:"NT$ 14.85",priceChange:-.34,quantity:"5000",marketValue:"NT$ 74,250",totalReturn:{value:"NT$ 4,250",percentage:"+6.1%"},costBasis:"NT$ 70,000",assetType:"reit"},{symbol:"1301",name:"台塑",price:"NT$ 85.20",priceChange:-.93,quantity:"800",marketValue:"NT$ 68,160",totalReturn:{value:"NT$ 3,160",percentage:"+4.9%"},costBasis:"NT$ 65,000",assetType:"tw_stock"},{symbol:"GLD",name:"SPDR黃金ETF",price:"US$ 198.42",priceChange:2.15,quantity:"150",marketValue:"NT$ 925,950",totalReturn:{value:"NT$ 125,950",percentage:"+15.7%"},costBasis:"NT$ 800,000",assetType:"commodity"},{symbol:"USO",name:"美國原油基金",price:"US$ 72.18",priceChange:-1.85,quantity:"200",marketValue:"NT$ 448,518",totalReturn:{value:"-NT$ 51,482",percentage:"-10.3%"},costBasis:"NT$ 500,000",assetType:"commodity"}],[n,l]=(0,a.useState)("marketValue"),[o,h]=(0,a.useState)("desc"),[d,c]=(0,a.useState)(""),[u,g]=(0,a.useState)("all"),[p,x]=(0,a.useState)(1),f=(0,a.useMemo)(()=>{let e=r.reduce((e,t)=>e+parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),0);return r.map(t=>{let i=parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),s=e>0?(i/e*100).toFixed(1)+"%":"0.0%";return{...t,weight:s}})},[r]),b=(0,a.useMemo)(()=>f.reduce((e,t)=>{let i=parseFloat(t.totalReturn.percentage),s=i>=0,a=[],r=100,n=t.symbol.split("").reduce((e,t)=>e+t.charCodeAt(0),0),l=e=>{let t=1e4*Math.sin(n+e);return t-Math.floor(t)};for(let e=0;e<15;e++){let t=Math.abs(i)/10;t=Math.max(.5,Math.min(3,t));let n=(l(e)-.5)*t*2;s?n+=.3:n-=.3,n+=.5*Math.sin(e/3),r+=n,r=Math.max(70,Math.min(130,r)),a.push(r)}return e[t.symbol]=a,e},{}),[f]),y=(0,a.useMemo)(()=>{let e={all:{label:"全部",count:f.length},stock:{label:"股票",count:0},etf:{label:"ETF",count:0},crypto:{label:"加密貨幣",count:0},bond:{label:"債券",count:0},reit:{label:"REIT",count:0},commodity:{label:"商品",count:0}};return f.forEach(t=>{switch(t.assetType){case"tw_stock":case"us_stock":default:e.stock.count++;break;case"etf":e.etf.count++;break;case"crypto":e.crypto.count++;break;case"bond":e.bond.count++;break;case"reit":e.reit.count++;break;case"commodity":e.commodity.count++}}),e},[f]),v=e=>{e===n?h("asc"===o?"desc":"asc"):(l(e),h("desc"))},w=(0,a.useMemo)(()=>[...f].filter(e=>{let t=e.name.toLowerCase().includes(d.toLowerCase())||e.symbol.toLowerCase().includes(d.toLowerCase()),i=!0;if("all"!==u)switch(u){case"stock":i="tw_stock"===e.assetType||"us_stock"===e.assetType;break;case"etf":i="etf"===e.assetType;break;case"crypto":i="crypto"===e.assetType;break;case"bond":i="bond"===e.assetType;break;case"reit":i="reit"===e.assetType;break;case"commodity":i="commodity"===e.assetType;break;default:i=!0}return t&&i}).sort((e,t)=>{if(["marketValue","totalReturn","weight","price","quantity","costBasis"].includes(n))if("totalReturn"===n){let i=parseFloat(e.totalReturn.percentage),s=parseFloat(t.totalReturn.percentage);return"asc"===o?i-s:s-i}else{let i=e[n],s=t[n],a="string"==typeof i&&i.includes("%")?parseFloat(i):parseFloat(String(i).replace(/[^0-9.-]+/g,"")),r="string"==typeof s&&s.includes("%")?parseFloat(s):parseFloat(String(s).replace(/[^0-9.-]+/g,""));return"asc"===o?a-r:r-a}let i=e[n],s=t[n];return"asc"===o?i.localeCompare(s):s.localeCompare(i)}),[f,n,o,d,u]),_=({field:e})=>n!==e?null:"asc"===o?(0,s.jsx)(rm.ArrowUpIcon,{className:"h-4 w-4 ml-1 inline"}):(0,s.jsx)(rp.ArrowDownIcon,{className:"h-4 w-4 ml-1 inline"}),N=Math.ceil(w.length/15),j=Math.min(15*p,w.length);a.default.useEffect(()=>{x(1)},[d,u]);let k=(0,a.useMemo)(()=>{let e=(p-1)*15;return w.slice(e,e+15)},[w,p,15]);return(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"持倉明細"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[w.length," 項資產"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:Object.entries(y).map(([e,t])=>{let i=u===e,a=((e,t)=>{if(!t)return{style:"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"};switch(e){case"all":return{style:"bg-blue-600 text-white border-blue-600"};case"stock":return{style:"bg-indigo-500 text-white border-indigo-500"};case"etf":return{style:"bg-purple-500 text-white border-purple-500"};case"crypto":return{style:"bg-orange-500 text-white border-orange-500"};case"bond":return{style:"bg-green-500 text-white border-green-500"};case"reit":return{style:"bg-red-500 text-white border-red-500"};case"commodity":return{style:"bg-yellow-500 text-white border-yellow-500"};default:return{style:"bg-gray-500 text-white border-gray-500"}}})(e,i);return(0,s.jsxs)("button",{onClick:()=>g(e),className:`px-3 py-1.5 text-sm rounded-full border transition-all duration-200 ${a.style}`,children:[t.label," (",t.count,")"]},e)})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"搜尋...",className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm w-48",value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)(rg.MagnifyingGlassIcon,{className:"h-4 w-4 text-gray-400 absolute left-3 top-2.5"}),d&&(0,s.jsx)("button",{className:"absolute right-2 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>c(""),children:(0,s.jsx)(ru.XMarkIcon,{className:"h-4 w-4"})})]})]})]})}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full table-fixed",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-60",children:"資產"}),(0,s.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-32",onClick:()=>v("price"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["價格",(0,s.jsx)(_,{field:"price"})]})}),(0,s.jsx)("th",{className:"text-left py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"趨勢"}),(0,s.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-40",onClick:()=>v("marketValue"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["市值",(0,s.jsx)(_,{field:"marketValue"})]})}),(0,s.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-32",onClick:()=>v("totalReturn"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["收益",(0,s.jsx)(_,{field:"totalReturn"})]})}),(0,s.jsx)("th",{className:"text-right py-3 px-6 text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700 w-28",onClick:()=>v("weight"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["權重",(0,s.jsx)(_,{field:"weight"})]})})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-50",children:k.map(e=>{var a,r;let n,l,o=(e=>{switch(e.assetType){case"etf":return{color:"text-purple-600",bg:"bg-purple-50",dot:"bg-purple-500",label:"ETF",labelBg:"bg-purple-100",labelText:"text-purple-700"};case"crypto":return{color:"text-orange-600",bg:"bg-orange-50",dot:"bg-orange-500",label:"加密貨幣",labelBg:"bg-orange-100",labelText:"text-orange-700"};case"bond":return{color:"text-green-600",bg:"bg-green-50",dot:"bg-green-500",label:"債券",labelBg:"bg-green-100",labelText:"text-green-700"};case"reit":return{color:"text-red-600",bg:"bg-red-50",dot:"bg-red-500",label:"REIT",labelBg:"bg-red-100",labelText:"text-red-700"};case"commodity":return{color:"text-yellow-600",bg:"bg-yellow-50",dot:"bg-yellow-500",label:"商品",labelBg:"bg-yellow-100",labelText:"text-yellow-700"};case"us_stock":return{color:"text-blue-600",bg:"bg-blue-50",dot:"bg-blue-500",label:"美股",labelBg:"bg-blue-100",labelText:"text-blue-700"};case"tw_stock":return{color:"text-indigo-600",bg:"bg-indigo-50",dot:"bg-indigo-500",label:"台股",labelBg:"bg-indigo-100",labelText:"text-indigo-700"};default:return{color:"text-gray-600",bg:"bg-gray-50",dot:"bg-gray-500",label:"其他",labelBg:"bg-gray-100",labelText:"text-gray-700"}}})(e),h=parseFloat(e.totalReturn.percentage)>=0;return(0,s.jsxs)("tr",{className:`hover:bg-gray-50 cursor-pointer transition-colors ${i===e.symbol?"bg-blue-50":""}`,onClick:()=>t(e.symbol),children:[(0,s.jsx)("td",{className:"py-4 px-6 w-60",children:(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded-md font-medium ${o.labelBg} ${o.labelText} whitespace-nowrap`,children:o.label}),(0,s.jsx)("span",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.symbol})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate mt-1",title:e.name,children:e.name})]})})}),(0,s.jsx)("td",{className:"py-4 px-6 w-32",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:((e,t)=>{let i=e.replace(/^(NT\$|US\$)\s*/,"");switch(t){case"tw_stock":case"etf":case"bond":case"reit":return`NT$ ${i}`;case"us_stock":case"commodity":case"crypto":return`US$ ${i}`;default:return e.includes("$")?e:`NT$ ${i}`}})(e.price,e.assetType)}),(0,s.jsxs)("div",{className:`text-sm whitespace-nowrap ${e.priceChange>=0?"text-green-600":"text-red-600"}`,children:[e.priceChange>=0?"+":"",e.priceChange.toFixed(2),"%"]})]})}),(0,s.jsx)("td",{className:"py-4 px-6 w-24",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(rx,{data:b[e.symbol],color:b[e.symbol]&&b[e.symbol][0]<b[e.symbol][b[e.symbol].length-1]?"#10b981":"#ef4444"})})}),(0,s.jsxs)("td",{className:"py-4 px-6 text-right w-40",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.marketValue.replace("NT$ ","NT$ ")}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:["持有:"," ",(a=e.quantity,r=e.assetType,n=parseFloat(a),l=(e=>{switch(e){case"tw_stock":case"us_stock":return"股";case"etf":case"bond":return"張";case"crypto":return"顆";default:return"單位"}})(r),"crypto"!==r?`${Math.floor(n).toLocaleString()} ${l}`:n<1?`${n.toFixed(4)} ${l}`:n<100?`${n.toFixed(2)} ${l}`:`${Math.floor(n).toLocaleString()} ${l}`)]})]}),(0,s.jsxs)("td",{className:"py-4 px-6 text-right w-32",children:[(0,s.jsx)("div",{className:`font-medium whitespace-nowrap ${h?"text-green-600":"text-red-600"}`,children:e.totalReturn.percentage}),(0,s.jsx)("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:e.totalReturn.value})]}),(0,s.jsxs)("td",{className:"py-4 px-6 text-right w-28",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 whitespace-nowrap",children:e.weight}),(0,s.jsx)("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full ml-auto mt-1",children:(0,s.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${Math.min(parseFloat(e.weight),100)}%`}})})]})]},e.symbol)})})]}),0===w.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.ChartBarIcon,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:d||"all"!==u?"找不到符合的資產":"尚無持倉"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:d||"all"!==u?"試試其他搜尋條件":"開始建立您的投資組合"})]})]}),N>1&&(0,s.jsx)("div",{className:"bg-white px-6 py-4 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["顯示 ",(p-1)*15+1," 到 ",j," 筆，共 ",w.length," ","筆資料"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>x(Math.max(1,p-1)),disabled:1===p,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一頁"}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:N},(e,t)=>t+1).map(e=>1===e||e===N||e>=p-1&&e<=p+1?(0,s.jsx)("button",{onClick:()=>x(e),className:`px-3 py-1 text-sm rounded-md ${p===e?"bg-blue-500 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:e},e):e===p-2||e===p+2?(0,s.jsx)("span",{className:"px-2 text-gray-400",children:"..."},e):null)}),(0,s.jsx)("button",{onClick:()=>x(Math.min(N,p+1)),disabled:p===N,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一頁"})]})]})}),(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:["總市值:"," ",(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["NT$"," ",r.reduce((e,t)=>e+parseFloat(t.marketValue.replace(/[^0-9.-]+/g,"")),0).toLocaleString()]})]}),(0,s.jsxs)("span",{className:"text-gray-600",children:["總收益:"," ",(0,s.jsxs)("span",{className:`font-semibold ${r.reduce((e,t)=>e+parseFloat(t.totalReturn.value.replace(/[^0-9.-]+/g,"")),0)>=0?"text-green-600":"text-red-600"}`,children:["NT$"," ",r.reduce((e,t)=>e+parseFloat(t.totalReturn.value.replace(/[^0-9.-]+/g,"")),0).toLocaleString()]})]})]})})]})};sE.register(aj,aT,sZ,sU,s0,ad,a_,ao,aa);let rb=({data:e,timeRange:t,showBenchmark:i=!1,showDetails:r=!1})=>{let[l,o]=(0,a.useState)("line"),[h,c]=(0,a.useState)(["benchmark"]),[u,g]=(0,a.useState)(!1),[p]=(0,a.useState)(!1),[x,f]=(0,a.useState)(t),b=(0,a.useMemo)(()=>[{id:"benchmark",name:"大盤指數",color:"rgb(255, 99, 132)"},{id:"sp500",name:"S&P 500",color:"rgb(54, 162, 235)"},{id:"nasdaq",name:"納斯達克",color:"rgb(255, 206, 86)"},{id:"peers",name:"同類型投資者",color:"rgb(75, 192, 192)"}],[]),v=(0,a.useMemo)(()=>({"1W":{labels:["6/10","6/11","6/12","6/13","6/14","6/15","6/16"],portfolio:[2450600,2456800,2463200,2458900,2465400,2471800,2475300],benchmark:[18500,18520,18545,18532,18558,18575,18583],return:"+1.01%",isPositive:!0},"1M":{labels:["5/17","5/24","5/31","6/7","6/14","6/16"],portfolio:[2385e3,2398500,2415600,2435800,2455200,2475300],benchmark:[18200,18280,18350,18420,18520,18583],return:"+3.79%",isPositive:!0},"3M":{labels:["4月","5月","6月"],portfolio:[228e4,2385e3,2475300],benchmark:[17800,18200,18583],return:"+8.56%",isPositive:!0},"6M":{labels:["1月","2月","3月","4月","5月","6月"],portfolio:[215e4,2195e3,2245e3,228e4,2385e3,2475300],benchmark:[17200,17350,17500,17800,18200,18583],return:"+15.13%",isPositive:!0},"1Y":{labels:["2023/6","2023/9","2023/12","2024/3","2024/6"],portfolio:[2e6,2088e3,2156e3,2245e3,2475300],benchmark:[16500,16800,17100,17500,18583],return:"+23.77%",isPositive:!0},ALL:{labels:["2022","2023","2024"],portfolio:[18e5,2156e3,2475300],benchmark:[15800,17100,18583],return:"+37.52%",isPositive:!0}}),[]),w=(0,a.useMemo)(()=>{let t=v[x];if(t)return{labels:t.labels,portfolio:t.portfolio,benchmark:t.benchmark};let i=e?.daily?.labels||[],s=e?.daily?.portfolio||[],a=e?.daily?.benchmark;switch(x){case"1W":return{labels:i.slice(-7),portfolio:s.slice(-7),benchmark:a?a.slice(-7):[]};case"1M":return{labels:i.slice(-30),portfolio:s.slice(-30),benchmark:a?a.slice(-30):[]};case"3M":return{labels:i.slice(-90),portfolio:s.slice(-90),benchmark:a?a.slice(-90):[]};case"6M":case"1Y":return e?.weekly||{labels:[],portfolio:[]};case"YTD":return{labels:i.slice(-150),portfolio:s.slice(-150),benchmark:a?a.slice(-150):[]};default:return e?.monthly||{labels:[],portfolio:[]}}},[e,x,v]),_=(0,a.useMemo)(()=>{let e=v[x];return[{title:"總回報率",value:e?.return||"+0.00%",isPositive:e?.isPositive||!1,description:`${x}期間表現`,icon:e?.isPositive?n.ArrowTrendingUpIcon:y.ArrowTrendingDownIcon},{title:"年化收益率",value:"+22.4%",isPositive:!0,description:"折算年度表現",icon:n.ArrowTrendingUpIcon},{title:"最大回撤",value:"-8.2%",isPositive:!1,description:"最大下跌幅度",icon:y.ArrowTrendingDownIcon},{title:"波動率",value:"15.3%",isPositive:null,description:"風險水平指標",icon:m.ChartBarIcon}]},[x,v]),N=(0,a.useMemo)(()=>{let e=w.portfolio;if(0===e.length)return{drawdown:"0.0",volatility:"0.0",totalReturn:"0.0",annualizedReturn:"0.0",highest:"0",lowest:"0",current:"0"};let t=Math.max(...e),i=Math.min(...e),s=e[e.length-1],a=e[0],r=((s-a)/a*100).toFixed(1),n=0,l=e[0];for(let t of e)t>l&&(l=t),n=Math.max(n,(l-t)/l*100);let o=e.slice(1).map((t,i)=>(t-e[i])/e[i]),h=o.reduce((e,t)=>e+t,0)/o.length,d=Math.sqrt(o.reduce((e,t)=>e+Math.pow(t-h,2),0)/o.length)*Math.sqrt(252)*100,c=Math.pow(s/a,365/e.length)-1;return{drawdown:n.toFixed(1),volatility:d.toFixed(1),totalReturn:r,annualizedReturn:(100*c).toFixed(1),highest:t.toLocaleString(),lowest:i.toLocaleString(),current:s.toLocaleString()}},[w]),j={labels:w.labels,datasets:[{label:"投資組合",data:w.portfolio,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,yAxisID:"y"},{label:"台股加權指數",data:w.benchmark||[],borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",borderWidth:2,fill:!1,tension:.4,borderDash:[5,5],yAxisID:"y1"}]};return(0,s.jsxs)("div",{className:`bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden ${p?"fixed inset-0 z-50 overflow-auto":""}`,children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-green-100/30 to-blue-100/30 rounded-full blur-3xl -translate-y-32 -translate-x-32"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4 lg:mb-0",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl shadow-lg",children:(0,s.jsx)(d,{className:"h-7 w-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 bg-clip-text",children:"績效走勢分析"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"投資組合歷史表現追蹤"})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"1週",value:"1W"},{label:"1月",value:"1M"},{label:"3月",value:"3M"},{label:"6月",value:"6M"},{label:"1年",value:"1Y"},{label:"全部",value:"ALL"}].map(e=>(0,s.jsx)("button",{onClick:()=>f(e.value),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${x===e.value?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.label},e.value))})})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 relative z-10",children:_.map((e,t)=>{let i=e.icon;return(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-white/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,s.jsx)(i,{className:`h-5 w-5 ${!0===e.isPositive?"text-green-500":!1===e.isPositive?"text-red-500":"text-gray-500"}`})]}),(0,s.jsx)("div",{className:`text-2xl font-bold mb-1 ${!0===e.isPositive?"text-green-600":!1===e.isPositive?"text-red-600":"text-gray-800"}`,children:e.value}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},t)})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 relative z-10",children:[(0,s.jsxs)("div",{className:"flex space-x-2 mb-2 sm:mb-0",children:[(0,s.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,s.jsx)("button",{type:"button",onClick:()=>o("line"),className:`px-4 py-2 text-xs font-medium rounded-l-lg ${"line"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:"線圖"}),(0,s.jsx)("button",{type:"button",onClick:()=>o("area"),className:`px-4 py-2 text-xs font-medium ${"area"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border-t border-b border-gray-300"}`,children:"區域圖"}),(0,s.jsx)("button",{type:"button",onClick:()=>o("bar"),className:`px-4 py-2 text-xs font-medium rounded-r-lg ${"bar"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:"柱狀圖"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>g(!u),className:`px-3 py-2 text-xs font-medium rounded-lg flex items-center ${u?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:[(0,s.jsx)(a3,{className:"h-4 w-4 mr-1"}),"顯示關鍵時期"]})]}),i&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map(e=>(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(h.includes(t)?c(h.filter(e=>e!==t)):c([...h,t]))},className:`px-3 py-1 text-xs font-medium rounded-full flex items-center ${h.includes(e.id)?"bg-blue-100 text-blue-700 border border-blue-200":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-1",style:{backgroundColor:e.color}}),e.name]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"投資組合 vs 基準指數"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-gray-600",children:"投資組合"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-0.5 bg-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-gray-600",children:"台股加權指數"})]})]})]}),(0,s.jsx)("div",{className:"h-[400px]",children:(0,s.jsx)(aQ,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let t=e.dataset.label||"";t&&(t+=": ");let i=e.parsed,s=null;if(null==i)s=null;else if("number"==typeof i)s=i;else if("object"==typeof i&&"y"in i){let e=i.y;s="number"==typeof e?e:null}else s=null;return null==s?t+="N/A":0===e.datasetIndex?t+="NT$"+Number(s).toLocaleString():t+=Number(s).toLocaleString(),t}}}},scales:{x:{grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"投資組合價值 (NT$)"},ticks:{callback:function(e){return"NT$"+(Number(e)/1e6).toFixed(1)+"M"}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"基準指數"},grid:{drawOnChartArea:!1}}},interaction:{mode:"nearest",axis:"x",intersect:!1}},data:j})}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"期間回報率"}),(0,s.jsx)("div",{className:"text-lg font-bold text-green-600",children:v[x]?.return||"+0.00%"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"超額回報率"}),(0,s.jsx)("div",{className:"text-lg font-bold text-blue-600",children:"+5.2%"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500",children:"夏普比率"}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-800",children:"1.65"})]})]})})]}),(0,s.jsx)("div",{className:"mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 relative z-10",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,s.jsx)(m.ChartBarIcon,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-base font-semibold text-blue-900 mb-2",children:"績效分析洞察"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-blue-800 mb-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"✓ 表現優異："}),"您的投資組合在",x,"期間表現優於市場基準指數5.2%，顯示良好的選股和配置策略。"]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-blue-800",children:[(0,s.jsx)("span",{className:"font-medium",children:"→ 風險控制："}),"夏普比率1.65表示在承擔相對風險下獲得了不錯的回報，風險調整後收益表現良好。"]})})]})]})]})}),r&&(0,s.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6 relative z-10",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"績效詳細數據"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-blue-700 font-medium mb-1",children:"總回報率"}),(0,s.jsxs)("div",{className:`text-2xl font-bold ${Number(N.totalReturn)>=0?"text-green-600":"text-red-600"}`,children:[Number(N.totalReturn)>=0?"+":"",N.totalReturn,"%"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"期間累計收益"})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-green-700 font-medium mb-1",children:"年化報酬"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",N.annualizedReturn,"%"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"年度化收益率"})]}),(0,s.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-red-700 font-medium mb-1",children:"最大回撤"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["-",N.drawdown,"%"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"從最高點下跌"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-700 font-medium mb-1",children:"波動率"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:[N.volatility,"%"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"年化標準差"})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h5",{className:"text-lg font-medium text-gray-900",children:"統計數據"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"指標"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"投資組合"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"基準指數"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"超額表現"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"風險指標"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"總回報率"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:["+",N.totalReturn,"%"]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["+",(Number(N.totalReturn)-21.5).toFixed(1),"%"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:"+18.3%"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:"1.65"})]})})]})})]})]}),r&&(0,s.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6 relative z-10",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,s.jsx)(m.ChartBarIcon,{className:"h-5 w-5 text-blue-600 mr-2"}),"投資成本影響分析"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"管理費用影響"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"目前投資組合的加權平均管理費率為 1.2%，略高於建議的 0.8%。"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"年度費用影響:"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"-0.4%"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"長期影響 (10年):"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"-7.02%"})]})]}),(0,s.jsx)("div",{className:"mt-3 text-xs text-blue-600 font-medium",children:"建議: 考慮將部分主動式基金轉為低費率ETF"})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-700 mb-3",children:"再平衡效益分析"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"定期再平衡可以維持您的風險水平，同時可能提高長期回報率。"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"上次再平衡:"}),(0,s.jsx)("span",{className:"font-medium text-gray-800",children:"30天前"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"建議頻率:"}),(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"每季度"})]})]}),(0,s.jsx)("div",{className:"mt-3 text-xs text-green-600 font-medium",children:"下次建議再平衡: 2024年9月15日"})]})]})]})]})};sE.register(aj,aT,sZ,s0,sU,sF,ad,a_,ao,aa);let ry=({transactions:e})=>{let t=rs.getInstance(),i=(0,a.useMemo)(()=>[{id:"tx_001",date:"2024-06-15",type:"買入",symbol:"2330",name:"台積電",quantity:1e3,price:"NT$ 585.00",total:"NT$ 585,000",exchange:"台灣證券交易所",note:"分批建倉第一筆"},{id:"tx_002",date:"2024-06-10",type:"買入",symbol:"2317",name:"鴻海",quantity:2e3,price:"NT$ 108.50",total:"NT$ 217,000",exchange:"台灣證券交易所",note:"看好電動車趨勢"},{id:"tx_003",date:"2024-06-08",type:"賣出",symbol:"AAPL",name:"蘋果公司",quantity:50,price:"US$ 195.89",total:"NT$ 304,850",exchange:"NASDAQ",note:"獲利了結"},{id:"tx_004",date:"2024-06-05",type:"買入",symbol:"0050",name:"元大台灣50",quantity:1e3,price:"NT$ 142.30",total:"NT$ 142,300",exchange:"台灣證券交易所",note:"定期定額投資"},{id:"tx_005",date:"2024-06-03",type:"買入",symbol:"NVDA",name:"輝達",quantity:20,price:"US$ 1,208.88",total:"NT$ 751,500",exchange:"NASDAQ",note:"看好AI晶片前景"},{id:"tx_006",date:"2024-05-28",type:"賣出",symbol:"2454",name:"聯發科",quantity:500,price:"NT$ 765.00",total:"NT$ 382,500",exchange:"台灣證券交易所",note:"減倉操作"},{id:"tx_007",date:"2024-05-25",type:"買入",symbol:"MSFT",name:"微軟",quantity:30,price:"US$ 424.73",total:"NT$ 396,050",exchange:"NASDAQ",note:"長期持有"},{id:"tx_008",date:"2024-05-20",type:"買入",symbol:"2882",name:"國泰金",quantity:3e3,price:"NT$ 61.80",total:"NT$ 185,400",exchange:"台灣證券交易所",note:"金融股配息"},{id:"tx_009",date:"2024-05-15",type:"買入",symbol:"TSLA",name:"特斯拉",quantity:25,price:"US$ 178.79",total:"NT$ 138,950",exchange:"NASDAQ",note:"電動車龍頭"},{id:"tx_010",date:"2024-05-10",type:"賣出",symbol:"2308",name:"台達電",quantity:800,price:"NT$ 312.00",total:"NT$ 249,600",exchange:"台灣證券交易所",note:"技術分析賣點"},{id:"tx_011",date:"2024-05-05",type:"買入",symbol:"6505",name:"台塑化",quantity:2e3,price:"NT$ 95.50",total:"NT$ 191,000",exchange:"台灣證券交易所",note:"傳產價值投資"},{id:"tx_012",date:"2024-05-01",type:"買入",symbol:"GOOGL",name:"Alphabet",quantity:15,price:"US$ 166.54",total:"NT$ 77,630",exchange:"NASDAQ",note:"科技股布局"},{id:"tx_013",date:"2024-04-28",type:"買入",symbol:"2891",name:"中信金",quantity:2500,price:"NT$ 35.85",total:"NT$ 89,625",exchange:"台灣證券交易所",note:"金融股分散"},{id:"tx_014",date:"2024-04-25",type:"賣出",symbol:"2412",name:"中華電",quantity:1e3,price:"NT$ 124.50",total:"NT$ 124,500",exchange:"台灣證券交易所",note:"電信股整理"},{id:"tx_015",date:"2024-04-20",type:"買入",symbol:"SPY",name:"SPDR S&P 500 ETF",quantity:20,price:"US$ 521.23",total:"NT$ 324,150",exchange:"NYSE",note:"美股ETF配置"},{id:"tx_016",date:"2024-04-15",type:"買入",symbol:"1303",name:"南亞",quantity:1500,price:"NT$ 78.90",total:"NT$ 118,350",exchange:"台灣證券交易所",note:"化工類股"},{id:"tx_017",date:"2024-04-10",type:"買入",symbol:"META",name:"Meta Platforms",quantity:12,price:"US$ 502.31",total:"NT$ 187,350",exchange:"NASDAQ",note:"社群媒體龍頭"},{id:"tx_018",date:"2024-04-05",type:"賣出",symbol:"2881",name:"富邦金",quantity:2e3,price:"NT$ 82.70",total:"NT$ 165,400",exchange:"台灣證券交易所",note:"金融股調整"},{id:"tx_019",date:"2024-04-01",type:"買入",symbol:"2002",name:"中鋼",quantity:5e3,price:"NT$ 30.15",total:"NT$ 150,750",exchange:"台灣證券交易所",note:"鋼鐵股逢低承接"},{id:"tx_020",date:"2024-03-28",type:"買入",symbol:"AMD",name:"超微半導體",quantity:35,price:"US$ 180.72",total:"NT$ 196,550",exchange:"NASDAQ",note:"半導體競爭者"}],[]),{data:r,execute:n}=(0,ra.useMvcController)(),[l]=(0,a.useState)("date"),[o]=(0,a.useState)("desc"),[h,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("all"),[g,m]=(0,a.useState)(1),[p,x]=(0,a.useState)("all"),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),w=(0,a.useCallback)(async()=>{await n(async()=>{if(e&&e.length>0)return e;try{return(await t.getTransactionHistory("user_001")).map(e=>({...e,name:e.symbol+" 股票",total:`NT$ ${(e.quantity*e.price).toLocaleString()}`,price:`NT$ ${e.price.toLocaleString()}`,type:"buy"===e.type?"買入":"賣出"}))}catch{return console.log("使用模擬交易數據"),i}})},[n,e,i,t]);(0,a.useEffect)(()=>{e&&e.length>0||w()},[e,w]);let _=r||i,N=(0,a.useMemo)(()=>{let e=r||_;if(!e||0===e.length)return _;let t=(e=>{let t=new Date,i=new Date;switch(e){case"last7days":i.setDate(t.getDate()-7);break;case"last30days":i.setDate(t.getDate()-30);break;case"last90days":i.setDate(t.getDate()-90);break;case"thisYear":i=new Date(t.getFullYear(),0,1);break;default:return()=>!0}return e=>{let s=new Date(e.date);return s>=i&&s<=t}})(p);return[...e].filter(e=>{let i=""===h||e.symbol.toLowerCase().includes(h.toLowerCase())||e.name.toLowerCase().includes(h.toLowerCase()),s="all"===c||e.type===c,a=t(e);return i&&s&&a}).sort((e,t)=>{if("date"===l){let i=new Date(e.date),s=new Date(t.date);return"asc"===o?i.getTime()-s.getTime():s.getTime()-i.getTime()}if(["quantity","price","total"].includes(l)){let i="string"==typeof e[l]?parseFloat(e[l].replace(/[^0-9.-]+/g,"")):Number(e[l]),s="string"==typeof t[l]?parseFloat(t[l].replace(/[^0-9.-]+/g,"")):Number(t[l]);return"asc"===o?i-s:s-i}let i=String(e[l]),s=String(t[l]);return"asc"===o?i.localeCompare(s):s.localeCompare(i)})},[r,_,l,o,h,c,p]),j=Math.ceil(N.length/10),k=N.slice((g-1)*10,10*g);(0,a.useEffect)(()=>{m(1)},[h,c,p]);let M=(0,a.useMemo)(()=>{let e=r||_;if(!e||0===e.length)return{basic:{買入:{count:0,total:0},賣出:{count:0,total:0}},monthly:[],symbols:[],netCashFlow:0};let t={買入:{count:0,total:0},賣出:{count:0,total:0}},i={},s={};return e.forEach(e=>{let a=e.type,r=parseFloat(e.total.replace(/[^0-9.-]+/g,"")),n=new Date(e.date),l=`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}`,o=e.symbol;t[a].count+=1,t[a].total+=r,i[l]||(i[l]={買入:0,賣出:0}),i[l][a]+=r,s[o]||(s[o]={name:e.name,買入:0,賣出:0,count:0}),s[o][a]+=r,s[o].count+=1}),{basic:t,monthly:Object.entries(i).sort(([e],[t])=>e.localeCompare(t)).slice(-12),symbols:Object.entries(s).map(([e,t])=>({symbol:e,...t})).sort((e,t)=>t.count-e.count).slice(0,10),netCashFlow:t.賣出.total-t.買入.total}},[r,_]),T=(0,a.useMemo)(()=>({monthlyChart:{labels:M.monthly.map(([e])=>e),datasets:[{label:"買入",data:M.monthly.map(([,e])=>e.買入),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)"},{label:"賣出",data:M.monthly.map(([,e])=>e.賣出),backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgb(239, 68, 68)"}]},symbolChart:{labels:M.symbols.slice(0,5).map(e=>e.symbol),datasets:[{label:"交易金額",data:M.symbols.slice(0,5).map(e=>e.買入+e.賣出),backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:"rgba(0, 0, 0, 0.1)"}]}}),[M]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"交易歷史"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"投資交易記錄與統計"})]}),(0,s.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"全部時間"}),(0,s.jsx)("option",{value:"last7days",children:"最近7天"}),(0,s.jsx)("option",{value:"last30days",children:"最近30天"}),(0,s.jsx)("option",{value:"last90days",children:"最近90天"}),(0,s.jsx)("option",{value:"thisYear",children:"本年度"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"總交易"}),(0,s.jsx)("div",{className:"text-xl font-bold text-gray-900 mt-1",children:N.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"買入總額"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-green-600 mt-1",children:[(M.basic.買入.total/1e3).toFixed(0),"K"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"賣出總額"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-red-600 mt-1",children:[(M.basic.賣出.total/1e3).toFixed(0),"K"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-gray-500 text-xs font-medium",children:"淨現金流"}),(0,s.jsxs)("div",{className:`text-xl font-bold mt-1 ${M.netCashFlow>=0?"text-green-600":"text-red-600"}`,children:[M.netCashFlow>=0?"+":"",(M.netCashFlow/1e3).toFixed(0),"K"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"月度交易趨勢"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(aJ,{data:T.monthlyChart,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{callback:function(e){return Number(e).toLocaleString()}}}}}})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"交易記錄"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[N.length," 筆"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"text-sm border border-gray-300 rounded px-3 py-1",children:[(0,s.jsx)("option",{value:"all",children:"全部"}),(0,s.jsx)("option",{value:"買入",children:"買入"}),(0,s.jsx)("option",{value:"賣出",children:"賣出"})]}),(0,s.jsx)("input",{type:"text",placeholder:"搜尋...",className:"text-sm border border-gray-300 rounded px-3 py-1 w-32 focus:outline-none focus:ring-1 focus:ring-blue-500",value:h,onChange:e=>d(e.target.value)})]})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"日期"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"類型"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"股票"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"數量"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"價格"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"總額"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"操作"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[k.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.date}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded ${"買入"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.type})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.symbol}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.name})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.quantity.toLocaleString()}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.price}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.total}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsx)("button",{onClick:()=>{v(e),b(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"查看"})})]},e.id)),0===k.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"沒有找到交易記錄"})})]})]})}),j>1&&(0,s.jsxs)("div",{className:"px-6 py-3 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["第 ",g," 頁，共 ",j," 頁"]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("button",{onClick:()=>m(Math.max(1,g-1)),disabled:1===g,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",children:"上一頁"}),(0,s.jsx)("button",{onClick:()=>m(Math.min(j,g+1)),disabled:g===j,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",children:"下一頁"})]})]})]}),f&&y&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"交易詳情"}),(0,s.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"交易日期"}),(0,s.jsx)("div",{className:"font-medium",children:y.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"交易類型"}),(0,s.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded ${"買入"===y.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"股票代號"}),(0,s.jsx)("div",{className:"font-medium",children:y.symbol})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"股票名稱"}),(0,s.jsx)("div",{className:"font-medium",children:y.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"數量"}),(0,s.jsx)("div",{className:"font-medium",children:y.quantity.toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"價格"}),(0,s.jsx)("div",{className:"font-medium",children:y.price})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"總額"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:y.total})]})]}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"關閉"})})]})]})})]})};var rv=e.i(83721),rw=e.i(5455),r_=e.i(79058);function rN(e){return!!e&&"object"==typeof e&&"overview"in e&&"allocation"in e&&"performance"in e&&"transactions"in e}e.s(["default",0,()=>{var e,t;let[i,g]=(0,a.useState)(null),[m,p]=(0,a.useState)("overview"),[x,f]=(0,a.useState)(new Date),{isLoading:b,isInitialized:y,error:v}=(0,r_.useAppInitialization)({enableCache:!0,enableMockData:!0}),w=(0,a.useMemo)(()=>rs.getInstance(),[]),_=(0,a.useMemo)(()=>rw.UserController.getInstance(),[]),{data:N,loading:j,errors:k,isComplete:M,reload:T}=(0,ra.usePreloadData)({user:()=>_.getUserProfile("user_001"),portfolio:()=>w.getPortfolio("user_001"),portfolios:()=>w.getUserPortfolios("user_001"),performance:()=>w.getPortfolioPerformance("user_001","1M"),allocation:()=>w.getAssetAllocation("user_001"),transactions:()=>w.getTransactionHistory("user_001",10)},{priority:["user","portfolio","allocation","performance","portfolios","transactions"],concurrent:!1,onProgress:(e,t)=>{console.log(`數據預加載進度: ${e}/${t}`)}}),{data:C,loading:P,error:S,retry:D}=(0,ra.useControllerWithRetry)((0,a.useCallback)(()=>w.getPortfolio("user_001"),[w]),{maxRetries:2,retryDelay:5e3,retryCondition:e=>e.message.includes("網路")||e.message.includes("timeout"),onRetry:(e,t)=>{console.log(`重試第 ${e} 次，錯誤:`,t.message)},cacheKey:"portfolio_realtime",cacheTTL:6e4,enabled:y&&M}),A=(0,a.useMemo)(()=>[{id:"overview",name:"投資組合概覽",icon:d,description:"總體資產狀況與關鍵指標"},{id:"allocation",name:"資產配置",icon:r,description:"資產類別與地區分布分析"},{id:"holdings",name:"持倉明細",icon:l,description:"個股持倉詳細資訊"},{id:"performance",name:"績效分析",icon:n.ArrowTrendingUpIcon,description:"投資報酬與績效評估"},{id:"transactions",name:"交易歷史",icon:o,description:"歷史交易紀錄與分析"},{id:"risk",name:"風險與建議",icon:c.ShieldCheckIcon,description:"風險評估與AI智能建議"}],[]),L=(0,a.useCallback)(async()=>{try{f(new Date),await T(),S&&await D()}catch(e){console.error("手動刷新失敗:",e)}},[T,D,S]);(0,a.useEffect)(()=>{let e=()=>{document.hidden?console.log("頁面隱藏，暫停實時更新"):(console.log("頁面顯示，恢復實時更新"),f(new Date))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]);let E=(0,a.useMemo)(()=>{let{user:e,portfolio:t,allocation:i,performance:s,transactions:a}=N;return{user:e,portfolio:C||t,allocation:i,performance:s,transactions:a}},[N,C]);return b?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"正在初始化應用程式..."}),v&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-4 bg-red-50 px-4 py-2 rounded-lg inline-block",children:v})]})}):j&&!M?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"載入投資組合數據中..."})]})}):Object.keys(k).length>0?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 shadow-xl relative overflow-hidden",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:"投資組合管理"}),(0,s.jsx)("p",{className:"text-red-200 mt-4 text-lg",children:"載入過程中發生錯誤"})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-red-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"載入失敗"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("ul",{className:"space-y-2 mb-6",children:Object.entries(k).map(([e,t])=>(0,s.jsxs)("li",{className:"flex items-center text-red-700 bg-red-50 px-3 py-2 rounded-lg",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),(0,s.jsxs)("span",{className:"font-medium",children:[e,":"]}),(0,s.jsx)("span",{className:"ml-2",children:t})]},e))}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 transform hover:scale-105",children:"重新載入"})]})]})})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 shadow-xl relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full",children:[(0,s.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white opacity-5 rounded-full"}),(0,s.jsx)("div",{className:"absolute bottom-10 right-20 w-32 h-32 bg-white opacity-5 rounded-full"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-radial from-white/10 to-transparent rounded-full"})]}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"mb-8 lg:mb-0",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm mr-4",children:(0,s.jsx)(u,{className:"h-8 w-8 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white tracking-tight",children:"投資組合管理"}),(0,s.jsxs)("p",{className:"text-blue-100 mt-2",children:["歡迎回來，",(0,s.jsx)("span",{className:"font-semibold text-white ml-1",children:"object"==typeof N.user&&N.user&&"name"in N.user&&"string"==typeof N.user.name?N.user.name:"投資者"})]})]})]}),(0,s.jsx)("p",{className:"text-blue-100 text-lg max-w-2xl",children:"智能投資組合管理系統，追蹤績效表現、風險評估，並提供最佳化建議"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[P&&(0,s.jsxs)("div",{className:"flex items-center bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-full border border-white/20",children:[(0,s.jsx)(h.ArrowPathIcon,{className:"w-4 h-4 mr-2 animate-spin"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"更新中..."})]}),S&&(0,s.jsxs)("button",{onClick:D,className:"text-red-200 hover:text-white text-sm flex items-center bg-red-500/20 hover:bg-red-500/30 px-4 py-2 rounded-full border border-red-300/30 transition-all duration-200",children:[(0,s.jsx)(h.ArrowPathIcon,{className:"w-4 h-4 mr-1"}),"重試"]}),(0,s.jsxs)("button",{onClick:L,className:"text-white/80 hover:text-white text-sm flex items-center bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full border border-white/20 transition-all duration-200",title:"手動刷新數據",children:[(0,s.jsx)(h.ArrowPathIcon,{className:"w-4 h-4 mr-1"}),"刷新"]}),(0,s.jsxs)("div",{className:"text-white/60 text-xs",children:["最後更新: ",x.toLocaleTimeString("zh-TW")]})]})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("nav",{className:"flex space-x-6 overflow-x-auto pb-2 scrollbar-hide",children:A.map(e=>{let t=e.icon;return(0,s.jsxs)("button",{onClick:()=>p(e.id),className:`flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap transition-all duration-200 ${m===e.id?"bg-white text-indigo-700 shadow-lg":"text-white hover:bg-white/10 hover:text-white"}`,title:e.description,children:[(0,s.jsx)(t,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]},e.id)})})})]})]}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"space-y-8",children:["overview"===m&&(0,s.jsx)("div",{className:"space-y-8 animate-fadeIn",children:rN(E.portfolio)?(0,s.jsx)(a1,{data:E.portfolio.overview}):(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mx-auto"})]})})}),"allocation"===m&&(0,s.jsx)("div",{className:"animate-fadeIn",children:(e=E.allocation)&&"object"==typeof e&&Array.isArray(e.byAssetClass)&&Array.isArray(e.bySector)&&Array.isArray(e.byRegion)&&Array.isArray(e.recommendations)?(0,s.jsx)(rc,{data:E.allocation}):(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"w-32 h-32 bg-gray-200 rounded-full mx-auto mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mx-auto"})]})})}),"holdings"===m&&(0,s.jsx)("div",{className:"animate-fadeIn",children:(0,s.jsx)(rf,{holdings:rN(E.portfolio)&&Array.isArray(E.portfolio.holdings)?E.portfolio.holdings:[],onSelectHolding:g,selectedHolding:i||void 0})}),"performance"===m&&(0,s.jsx)("div",{className:"animate-fadeIn space-y-8",children:(0,s.jsx)(rb,{data:rN(E.portfolio)&&E.performance&&(t=E.performance)&&"object"==typeof t&&"daily"in t&&"weekly"in t&&"monthly"in t&&"returns"in t?E.performance:{daily:{labels:[],portfolio:[]},weekly:{labels:[],portfolio:[]},monthly:{labels:[],portfolio:[]},returns:{}},timeRange:"1M",showDetails:!0,showBenchmark:!0})}),"transactions"===m&&(0,s.jsx)("div",{className:"animate-fadeIn",children:(0,s.jsx)(ry,{transactions:E.transactions&&Array.isArray(E.transactions)?E.transactions:[]})}),"risk"===m&&(0,s.jsx)("div",{className:"animate-fadeIn"})]})}),(0,s.jsx)(rv.default,{})]})}],41406)},38968,(e,t,i)=>{let s="/portfolio";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(41406)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})}]);