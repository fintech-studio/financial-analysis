(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20955,(e,t,r)=>{var s={229:function(e){var t,r,s,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new g(e,t)),1!==l.length||c||i(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},o=!0;try{s[e](r,r.exports,n),o=!1}finally{o&&delete a[e]}return r.exports}n.ab="/ROOT/node_modules/next/dist/compiled/process/",t.exports=n(229)},50461,(e,t,r)=>{"use strict";var s,a;t.exports=(null==(s=e.g.process)?void 0:s.env)&&"object"==typeof(null==(a=e.g.process)?void 0:a.env)?e.g.process:e.r(20955)},8481,(e,t,r)=>{"use strict";var s=Symbol.for("react.transitional.element");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var n in r={},t)"key"!==n&&(r[n]=t[n]);else r=t;return{$$typeof:s,type:e,key:a,ref:void 0!==(t=r.ref)?t:null,props:r}}r.Fragment=Symbol.for("react.fragment"),r.jsx=a,r.jsxs=a},91398,(e,t,r)=>{"use strict";t.exports=e.r(8481)},61556,(e,t,r)=>{"use strict";var s=e.i(50461),a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function v(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}function E(){}function S(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=v.prototype;var w=S.prototype=new E;w.constructor=S,b(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray;function N(){}var T={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function C(e,t,r){var s=r.ref;return{$$typeof:a,type:e,key:t,ref:void 0!==s?s:null,props:r}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g;function O(e,t){var r,s;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,s={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return s[e]})):t.toString(36)}function k(e,t,r){if(null==e)return e;var s=[],o=0;return!function e(t,r,s,o,i){var l,c,u,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var f=!1;if(null===t)f=!0;else switch(d){case"bigint":case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case a:case n:f=!0;break;case h:return e((f=t._init)(t._payload),r,s,o,i)}}if(f)return i=i(t),f=""===o?"."+O(t,0):o,_(i)?(s="",null!=f&&(s=f.replace(A,"$&/")+"/"),e(i,r,s,"",function(e){return e})):null!=i&&(R(i)&&(l=i,c=s+(null==i.key||t&&t.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+f,i=C(l.type,c,l.props)),r.push(i)),1;f=0;var g=""===o?".":o+":";if(_(t))for(var m=0;m<t.length;m++)d=g+O(o=t[m],m),f+=e(o,r,s,d,i);else if("function"==typeof(m=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=y&&u[y]||u["@@iterator"])?u:null))for(t=m.call(t),m=0;!(o=t.next()).done;)d=g+O(o=o.value,m++),f+=e(o,r,s,d,i);else if("object"===d){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,s,o,i);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return f}(e,s,"","",function(e){return t.call(r,e,o++)}),s}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof s.default&&"function"==typeof s.default.emit)return void s.default.emit("uncaughtException",e);console.error(e)};r.Activity=m,r.Children={map:k,forEach:function(e,t,r){k(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},r.Component=v,r.Fragment=o,r.Profiler=l,r.PureComponent=S,r.StrictMode=i,r.Suspense=f,r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,r.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},r.cache=function(e){return function(){return e.apply(null,arguments)}},r.cacheSignal=function(){return null},r.cloneElement=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var s=b({},e.props),a=e.key;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)j.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&("ref"!==n||void 0!==t.ref)&&(s[n]=t[n]);var n=arguments.length-2;if(1===n)s.children=r;else if(1<n){for(var o=Array(n),i=0;i<n;i++)o[i]=arguments[i+2];s.children=o}return C(e.type,a,s)},r.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:c,_context:e},e},r.createElement=function(e,t,r){var s,a={},n=null;if(null!=t)for(s in void 0!==t.key&&(n=""+t.key),t)j.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(a[s]=t[s]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var i=Array(o),l=0;l<o;l++)i[l]=arguments[l+2];a.children=i}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===a[s]&&(a[s]=o[s]);return C(e,n,a)},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:d,render:e}},r.isValidElement=R,r.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},r.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},r.startTransition=function(e){var t=T.T,r={};T.T=r;try{var s=e(),a=T.S;null!==a&&a(r,s),"object"==typeof s&&null!==s&&"function"==typeof s.then&&s.then(N,P)}catch(e){P(e)}finally{null!==t&&null!==r.types&&(t.types=r.types),T.T=t}},r.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},r.use=function(e){return T.H.use(e)},r.useActionState=function(e,t,r){return T.H.useActionState(e,t,r)},r.useCallback=function(e,t){return T.H.useCallback(e,t)},r.useContext=function(e){return T.H.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},r.useEffect=function(e,t){return T.H.useEffect(e,t)},r.useEffectEvent=function(e){return T.H.useEffectEvent(e)},r.useId=function(){return T.H.useId()},r.useImperativeHandle=function(e,t,r){return T.H.useImperativeHandle(e,t,r)},r.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},r.useMemo=function(e,t){return T.H.useMemo(e,t)},r.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},r.useReducer=function(e,t,r){return T.H.useReducer(e,t,r)},r.useRef=function(e){return T.H.useRef(e)},r.useState=function(e){return T.H.useState(e)},r.useSyncExternalStore=function(e,t,r){return T.H.useSyncExternalStore(e,t,r)},r.useTransition=function(){return T.H.useTransition()},r.version="19.2.0"},91788,(e,t,r)=>{"use strict";t.exports=e.r(61556)},31640,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},71650,(e,t,r)=>{"use strict";function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}},89129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return p},MiddlewareNotFoundError:function(){return E},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return x},SP:function(){return m},ST:function(){return y},WEB_VITALS:function(){return n},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return g},stringifyError:function(){return S}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function g(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&f(r))return s;if(!s)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let m="undefined"!=typeof performance,y=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class b extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class E extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function S(e){return JSON.stringify({message:e.message,stack:e.stack})}},13584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return s}});let s=e.r(31640)._(e.r(91788)).default.createContext({})},94470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},17431,(e,t,r)=>{"use strict";var s=e.r(91788);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal"),l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,r.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},r.flushSync=function(e){var t=l.T,r=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=r,o.d.f()}},r.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,o.d.C(e,t))},r.prefetchDNS=function(e){"string"==typeof e&&o.d.D(e)},r.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,s=c(r,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,n="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:n}):"script"===r&&o.d.X(e,{crossOrigin:s,integrity:a,fetchPriority:n,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},r.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},r.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,s=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:s,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},r.preloadModule=function(e,t){if("string"==typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},r.requestFormReset=function(e){o.d.r(e)},r.unstable_batchedUpdates=function(e,t){return e(t)},r.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},r.useFormStatus=function(){return l.H.useHostTransitionStatus()},r.version="19.2.0"},30943,(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=e.r(17431)},15125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=["default","imgix","cloudinary","akamai","custom"],o={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},13521,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let s=e.r(31640)._(e.r(91788)),a=e.r(15125),n=s.default.createContext(a.imageConfigDefault)},7168,e=>{"use strict";class t{handleServiceError(e,t){let r=e instanceof Error?e.message:"服務錯誤";throw console.error(`[${t}] Service Error:`,e),Error(`${t}: ${r}`)}validateServiceInput(e,t){if(null==e)throw Error(`${t} 不能為空`)}async executeWithRetry(e,t=3,r=1e3){for(let s=0;s<t;s++)try{return await e()}catch(e){if(s===t-1)throw e;await new Promise(e=>setTimeout(e,r*(s+1)))}throw Error("操作失敗")}}class r{static instance;services=new Map;static getInstance(){return r.instance||(r.instance=new r),r.instance}getService(e){let t=e.name;return this.services.has(t)||this.services.set(t,new e),this.services.get(t)}clearServices(){this.services.clear()}}e.s(["BaseService",()=>t,"ServiceFactory",()=>r])},97680,e=>{"use strict";var t=e.i(7168);class r extends t.BaseService{static instance;enableLog=!0;static getInstance(){return r.instance||(r.instance=new r),r.instance}constructor(){super()}logInfo(e,t){this.enableLog&&console.log(`[DatabaseService] ${e}`,t||"")}logError(e,t){this.enableLog&&console.error(`[DatabaseService] ${e}`,t||"")}getApiBaseUrl(){return window.location.origin}extractError(e){return e.error||e.message||"操作失敗"}validateConnectionConfig(e){if(!e.server)throw Error("伺服器地址不能為空");if(!e.user||!e.password)throw Error("SQL Server 驗證模式需要提供用戶名和密碼")}async testConnection(e){try{this.logInfo("開始測試數據庫連接",{server:e.server,database:e.database||"預設",user:e.user}),this.validateConnectionConfig(e);let t=this.getApiBaseUrl(),r=await fetch(`${t}/api/database/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();if(s.success)return this.logInfo("數據庫連接測試成功",s.message),s;return this.logError("數據庫連接測試失敗",s.message),s}catch(e){return this.logError("數據庫連接測試發生錯誤",e),{success:!1,message:`連接失敗：${e instanceof Error?e.message:"網路錯誤"}`}}}async executeQuery(e,t,r){try{if(this.logInfo("開始執行 SQL 查詢",{query:t.substring(0,100)+"..."}),!t||!t.trim())return{success:!1,error:"SQL 查詢語句不能為空"};let s=this.getApiBaseUrl(),a=await fetch(`${s}/api/database/execute-query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e,query:t,params:r})}),n=await a.json();if(n.success)return this.logInfo("SQL 查詢執行成功",{recordCount:n.data?.length||0}),{success:!0,data:n.data||[],count:n.data?.length||0,message:n.message};return this.logError("SQL 查詢執行失敗",this.extractError(n)),{success:!1,error:this.extractError(n)}}catch(e){return this.logError("SQL 查詢執行發生錯誤",e),{success:!1,error:`查詢失敗：${e instanceof Error?e.message:"網路錯誤"}`}}}async getTableList(e){try{this.logInfo("開始獲取數據庫表列表");let t=await this.executeQuery(e,"SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME");if(t.success&&t.data){let e=t.data.map(e=>e.TABLE_NAME);return this.logInfo("成功獲取表列表",{tableCount:e.length}),e}{let e=this.extractError(t);if(e.includes("登入失敗"))return this.logError("登入失敗：請檢查使用者名稱、密碼，或確認帳號是否有存取該資料庫的權限。如有疑問請聯絡資料庫管理員。",e),[];return this.logError("獲取表列表失敗",e),[]}}catch(e){return this.logError("獲取表列表失敗",e),[]}}async getTableSchema(e,t){try{this.logInfo("開始獲取表結構",{tableName:t});let r=await this.executeQuery(e,"SELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE, COLUMN_DEFAULT, CHARACTER_MAXIMUM_LENGTH, NUMERIC_PRECISION, NUMERIC_SCALE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName ORDER BY ORDINAL_POSITION",{tableName:t});if(r.success&&r.data)return this.logInfo("成功獲取表結構",{columnCount:r.data.length}),r.data;throw Error(this.extractError(r))}catch(e){throw this.logError("獲取表結構失敗",e),Error(e instanceof Error?e.message:"獲取表結構失敗")}}async getDatabaseList(e){try{this.logInfo("開始獲取資料庫列表");let t={...e,database:"master"},r=await this.executeQuery(t,"SELECT name FROM sys.databases WHERE database_id > 4 ORDER BY name");if(r.success&&r.data){let e=r.data.map(e=>e.name);return this.logInfo("成功獲取資料庫列表",{databaseCount:e.length}),e}throw Error(this.extractError(r))}catch(e){throw this.logError("獲取資料庫列表失敗",e),Error(e instanceof Error?e.message:"獲取資料庫列表失敗")}}}e.s(["DatabaseService",()=>r])},90639,e=>{"use strict";var t=e.i(91788);function r(e,s={}){let[a,n]=(0,t.useState)({}),[o,i]=(0,t.useState)({}),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)({loaded:0,total:Object.keys(e).length}),[f,g]=(0,t.useState)(!1),h=(0,t.useRef)(e);h.current=e;let m=(0,t.useRef)(s);m.current=s;let y=(0,t.useCallback)(async()=>{let e=m.current,t=h.current;i(()=>{let e={};return Object.keys(t).forEach(t=>{e[t]=!0}),e}),c({}),d({loaded:0,total:Object.keys(t).length});let r=Object.keys(t),s=0,a=await Promise.allSettled(r.map(async e=>{try{let r=await t[e]();return{key:e,result:r,success:!0}}catch(t){return{key:e,error:t instanceof Error?t.message:"未知錯誤",success:!1}}})),o={},l={},u={};a.forEach((e,t)=>{let a=r[t];if(u[a]=!1,"fulfilled"===e.status&&e.value.success)o[a]=e.value.result,s++;else{let t="fulfilled"===e.status&&e.value.error||"載入失敗";l[a]=t,console.warn(`載入 ${String(a)} 失敗:`,t)}}),n(e=>({...e,...o})),c(l),i(u),d({loaded:s,total:r.length}),g(!0),e.onProgress?.(s,r.length)},[]),p=(0,t.useRef)(!1);(0,t.useEffect)(()=>{p.current||(p.current=!0,y())},[y]);let b=Object.keys(l).length>0;return{data:a,loading:o,errors:l,progress:u,isComplete:f,hasErrors:b,reload:y}}function s(e){let[r,s]=(0,t.useState)(e||null),[a,n]=(0,t.useState)(!1),[o,i]=(0,t.useState)(null),l=(0,t.useRef)(!1),c=(0,t.useRef)(!0);return(0,t.useEffect)(()=>(c.current=!0,()=>{c.current=!1}),[]),{data:r,loading:a,error:o,execute:(0,t.useCallback)(async e=>{if(!l.current&&c.current)try{l.current=!0,n(!0),i(null);let t=await e();c.current&&s(t)}catch(e){c.current&&i(e instanceof Error?e.message:"發生未知錯誤")}finally{c.current&&n(!1),l.current=!1}},[])}}function a(e,r={}){let[s,n]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,f]=(0,t.useState)(0),{maxRetries:g=3,retryDelay:h=1e3,retryCondition:m=()=>!0,onRetry:y,enabled:p=!0,cacheKey:b,cacheTTL:x=3e5,...v}=r,E=(0,t.useRef)(e);E.current=e;let S=(0,t.useRef)(!0),w=(0,t.useRef)(!1);(0,t.useEffect)(()=>(S.current=!0,()=>{S.current=!1}),[]);let _=(0,t.useCallback)(async()=>{if(w.current||!S.current||!p)return;if(b){let e=i.get(b);if(e)return void n(e)}w.current=!0,l(!0),u(null),f(0);let e=async t=>{try{let e=await E.current();S.current&&(n(e),b&&i.set(b,e,x),v.onSuccess?.(e))}catch(s){let r=s instanceof Error?s:Error("Unknown error");if(t<g&&m(r)&&S.current)return f(t+1),y?.(t+1,r),await new Promise(e=>setTimeout(e,h)),e(t+1);S.current&&(u(r),v.onError?.(r))}};await e(0),S.current&&l(!1),w.current=!1},[p,g,h,m,y,b,x,v]),N=(0,t.useCallback)(()=>{p&&_()},[_,p]),T=(0,t.useRef)(!1);return(0,t.useEffect)(()=>{p&&!1!==v.autoStart&&!T.current&&(T.current=!0,_())},[p,v.autoStart,_]),{data:s,loading:o,error:c,retryCount:d,execute:_,retry:N}}function n(e,r,s){let[a,n]=(0,t.useState)(e),[o,i]=(0,t.useState)({}),[l,c]=(0,t.useState)(!1),u=(0,t.useCallback)((e,t)=>{n(r=>({...r,[e]:t})),o[e]&&i(t=>({...t,[e]:null}))},[o]),d=(0,t.useCallback)(async()=>{if(s){let e=s(a);if(Object.values(e).some(e=>null!==e))return void i(e)}c(!0),i({});try{await r(a)}catch(e){console.error("表單提交失敗:",e)}finally{c(!1)}},[a,s,r]);return{values:a,errors:o,submitting:l,setValue:u,handleSubmit:d,reset:(0,t.useCallback)(()=>{n(e),i({})},[e])}}class o{cache=new Map;set(e,t,r=3e5){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r})}get(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}clear(){this.cache.clear()}delete(e){this.cache.delete(e)}}let i=new o;e.s(["globalCacheManager",0,i,"useControllerWithRetry",()=>a,"useFormController",()=>n,"useMvcController",()=>s,"usePreloadData",()=>r])},94604,e=>{"use strict";class t{static instance;users=new Map;static getInstance(){return t.instance||(t.instance=new t,t.instance.initializeDefaultUsers()),t.instance}initializeDefaultUsers(){let e={id:"user_001",name:"張小明",email:"zhang@example.com",phone:"0912-345-678",bio:"熱愛投資理財的軟體工程師",riskLevel:"中等風險",avatar:"https://via.placeholder.com/100",level:"進階投資者",location:"台北",joinDate:"2023年1月加入",preferences:{theme:"light",language:"zh-TW",notifications:{email:!0,push:!0,priceAlerts:!0,newsAlerts:!1},riskTolerance:"moderate"},portfolio:{totalValue:125e4,totalReturn:125e3,monthlyReturn:8.5}},t={id:"user_002",name:"李小華",email:"li@example.com",phone:"0987-654-321",bio:"投資新手，正在學習基礎知識",riskLevel:"保守型",level:"新手投資者",location:"台中",joinDate:"2024年3月加入",preferences:{theme:"dark",language:"zh-TW",notifications:{email:!0,push:!1,priceAlerts:!0,newsAlerts:!0},riskTolerance:"conservative"},portfolio:{totalValue:35e4,totalReturn:15e3,monthlyReturn:4.2}};this.users.set(e.id,e),this.users.set(t.id,t)}async getUserById(e){return this.users.get(e)||null}async updateUser(e,t){let r=this.users.get(e);if(!r)throw Error("User not found");let s={...r,...t};return this.users.set(e,s),s}async createUser(e){let t=Date.now().toString(),r={id:t,...e};return this.users.set(t,r),r}async getUserActivities(){return[{id:"1",action:"買入",target:"台積電",amount:"50,000",time:"2小時前",type:"buy",bgColor:"bg-green-50",color:"text-green-600",icon:"ArrowUpIcon"}]}}e.s(["UserModel",()=>t])},20766,9456,e=>{"use strict";var t,r=e.i(94604);class s{static instance;portfolios=new Map;static getInstance(){return s.instance||(s.instance=new s),s.instance}async getPortfolio(e){let t=`portfolio_${e}`;if(this.portfolios.has(t))return this.portfolios.get(t);let r={id:t,userId:e,totalValue:125e4,totalReturn:125e3,dayChange:15e3,dayChangePercent:1.2,holdings:[{symbol:"2330",name:"台積電",price:"580.00",priceChange:1.75,quantity:"100",marketValue:"580,000",costBasis:"550,000",totalReturn:{value:"+30,000",percentage:"+5.45%"},weight:"46.4%"}],allocation:[{category:"科技股",percentage:60,value:75e4,color:"bg-blue-500"},{category:"金融股",percentage:25,value:312500,color:"bg-green-500"},{category:"現金",percentage:15,value:187500,color:"bg-gray-500"}],performance:{labels:["1月","2月","3月","4月","5月","6月"],portfolioValue:[1e6,105e4,11e5,115e4,12e5,125e4],benchmarkValue:[1e6,103e4,108e4,112e4,118e4,122e4],timeRange:"6M"},transactions:[{id:"tx_001",symbol:"2330",type:"buy",quantity:100,price:550,amount:55e3,date:"2024-06-01",fee:100,status:"completed"}],risk:{riskScore:6.5,volatility:15.2,beta:1.1,sharpeRatio:1.3,maxDrawdown:-8.5,riskLevel:"medium"},overview:{totalValue:125e4,totalReturn:125e3,dayChange:15e3,dayChangePercent:1.2,holdingsCount:1,lastUpdated:"2024-06-30"},aiRecommendations:[{id:"rec_001",type:"buy",symbol:"2330",title:"Buy 台積電",description:"Based on recent performance and market trends.",confidence:.85,reasoning:["Strong quarterly earnings","Positive industry outlook","Technicals indicate upward momentum"],expectedReturn:.1,riskLevel:"medium",priority:"high",createdAt:"2024-06-30"}]};return this.portfolios.set(t,r),r}async addTransaction(e,t){let r=await this.getPortfolio(e);if(!r)throw Error("Portfolio not found");let s={...t,id:`tx_${Date.now()}`};return r.transactions.push(s),this.portfolios.set(r.id,r),s}async updateHolding(e,t,r){let s=await this.getPortfolio(e);if(!s)throw Error("Portfolio not found");let a=s.holdings.findIndex(e=>e.symbol===t);if(-1===a)throw Error("Holding not found");return s.holdings[a]={...s.holdings[a],...r},this.portfolios.set(s.id,s),s.holdings[a]}async calculatePortfolioMetrics(e){let t=await this.getPortfolio(e);if(!t)throw Error("Portfolio not found");return{totalValue:t.totalValue,totalReturn:t.totalReturn,riskScore:t.risk.riskScore}}}e.s(["PortfolioModel",()=>s],9456),(t={}).SUCCESS="success",t.ERROR="error",t.LOADING="loading",t.IDLE="idle";class a{logInfo(e,t){console.log(`[INFO] ${e}`,t||"")}logError(e,t){console.error(`[ERROR] ${e}`,t||"")}logWarning(e,t){console.warn(`[WARNING] ${e}`,t||"")}handleError(e,t){let r=e instanceof Error?e.message:"未知錯誤";if(console.error(`[${t}] Error Details:`,{message:r,stack:e instanceof Error?e.stack:void 0,timestamp:new Date().toISOString(),context:t}),e instanceof TypeError)throw Error(`${t}: 數據格式錯誤，請檢查輸入數據`);if(e instanceof ReferenceError)throw Error(`${t}: 系統參考錯誤，請聯繫技術支援`);if(r.includes("網路")||r.includes("network")||"object"==typeof e&&null!==e&&"code"in e&&"ECONNREFUSED"===e.code)throw Error(`${t}: 網路連線異常，請檢查網路設定並稍後重試`);if(r.includes("權限")||r.includes("permission")||r.includes("unauthorized"))throw Error(`${t}: 權限不足，請重新登入或聯繫管理員`);if(r.includes("Login failed")||r.includes("database"))throw Error(`${t}: 資料庫連接失敗，請檢查設定或聯繫技術支援`);throw Error(`${t}: ${r}`)}async executeWithErrorHandling(e,t){try{return await e()}catch(e){this.handleError(e,t)}}validateRequired(e,t){if(null==e||""===e)throw Error(`${t} 是必填欄位`)}validatePositiveNumber(e,t){if("number"!=typeof e||e<=0)throw Error(`${t} 必須是正數`)}validateEmail(e){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw Error("電子郵件格式不正確")}}class n{static instance;services=new Map;factories=new Map;static getInstance(){return n.instance||(n.instance=new n),n.instance}registerSingleton(e,t){this.factories.set(e,t)}registerInstance(e,t){this.services.set(e,t)}get(e){if(this.services.has(e))return this.services.get(e);if(this.factories.has(e)){let t=this.factories.get(e)();return this.services.set(e,t),t}throw Error(`Service ${e} not found`)}clear(){this.services.clear(),this.factories.clear()}}function o(){let e=n.getInstance();e.registerSingleton("UserModel",()=>r.UserModel.getInstance()),e.registerSingleton("PortfolioModel",()=>s.getInstance())}e.s(["BaseController",()=>a,"DIContainer",()=>n,"initializeDIContainer",()=>o],20766)},62737,e=>{"use strict";var t=e.i(91398),r=e.i(91788),s=e.i(20766),a=e.i(97680);class n extends s.BaseController{databaseService;constructor(){super(),this.databaseService=a.DatabaseService.getInstance()}validateConfig(e){return e.server&&e.user&&e.password?null:"請提供完整的連接資訊：伺服器地址、使用者名稱和密碼"}failResult(e){return{success:!1,message:e,data:[],count:0}}async testConnection(e){try{this.logInfo("開始測試資料庫連接",{server:e.server,user:e.user,database:e.database||"預設"});let t=this.validateConfig(e);if(t)return{success:!1,message:t};let r=await this.databaseService.testConnection(e);return this.logInfo("資料庫連接測試完成",{success:r.success}),r}catch(e){return this.logError("資料庫連接測試失敗",e),{success:!1,message:e instanceof Error?e.message:"資料庫連接測試失敗，請檢查連接設定"}}}async executeQuery(e,t,r){try{if(this.logInfo("開始執行 SQL 查詢",{server:e.server,user:e.user,queryLength:t?.length||0}),!t||!t.trim())return this.failResult("SQL 查詢語句不能為空");let s=await this.databaseService.executeQuery(e,t,r);return this.logInfo("SQL 查詢執行完成",{success:s.success,recordCount:s.count||0}),s}catch(e){return this.logError("SQL 查詢執行失敗",e),this.failResult(e instanceof Error?e.message:"SQL 查詢執行失敗")}}async getTableList(e){try{this.logInfo("開始獲取表列表",{server:e.server,database:e.database});let t=await this.databaseService.getTableList(e);return this.logInfo("獲取表列表完成",{tableCount:t.length}),{success:!0,data:t,count:t.length}}catch(e){return this.logError("獲取表列表失敗",e),this.failResult(e instanceof Error?e.message:"獲取表列表失敗")}}async getTableSchema(e,t){try{if(this.logInfo("開始獲取表結構",{server:e.server,database:e.database,tableName:t}),!t||!t.trim())return this.failResult("表名不能為空");let r=await this.databaseService.getTableSchema(e,t);return this.logInfo("獲取表結構完成",{columnCount:r.length}),{success:!0,data:r,count:r.length}}catch(e){return this.logError("獲取表結構失敗",e),this.failResult(e instanceof Error?e.message:"獲取表結構失敗")}}async getDatabaseList(e){try{this.logInfo("開始獲取資料庫列表",{server:e.server,user:e.user});let t=await this.databaseService.getDatabaseList(e);return this.logInfo("獲取資料庫列表完成",{databaseCount:t.length}),{success:!0,data:t,count:t.length}}catch(e){return this.logError("獲取資料庫列表失敗",e),this.failResult(e instanceof Error?e.message:"獲取資料庫列表失敗")}}}var o=e.i(90639);let i=(0,r.memo)(({label:e,type:r="text",value:s,onChange:a,placeholder:n,required:o=!1,...i})=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e," ",o&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:r,value:s,onChange:a,placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...i})]}));i.displayName="InputField";let l=(0,r.memo)(({label:e,value:r,onChange:s,showPassword:a,onToggle:n,required:o=!1,...i})=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e," ",o&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:a?"text":"password",value:r,onChange:s,placeholder:"密碼",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...i}),(0,t.jsx)("button",{type:"button",onClick:n,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?"隱藏":"顯示"})]})]}));l.displayName="PasswordField";let c=(0,r.memo)(({databaseList:e,selected:r,onSelect:s})=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"選擇資料庫"}),(0,t.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded",children:e.map(e=>(0,t.jsx)("button",{onClick:()=>s(e),className:`w-full text-left px-3 py-2 text-sm border-b border-gray-100 hover:bg-gray-50 ${r===e?"bg-blue-50 text-blue-900":""}`,children:e},e))})]}));c.displayName="DatabaseList";let u=({onLoginSuccess:e})=>{let[s,a]=(0,r.useState)({user:"",password:"",server:"localhost",database:"",port:1433,options:{encrypt:!1,trustServerCertificate:!0}}),[u,d]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[h,m]=(0,r.useState)([]),y=(0,r.useMemo)(()=>new n,[]),{loading:p,execute:b}=(0,o.useMvcController)(),{loading:x,execute:v}=(0,o.useMvcController)(),E=(0,r.useCallback)(()=>{a({user:"webtest",password:"webtestPass123!",server:"localhost",database:"TEST_DATABASE",port:1433,options:{encrypt:!1,trustServerCertificate:!0}})},[]),S=(0,r.useCallback)((e=s)=>e.server?!!e.user&&!!e.password||(alert("請填寫使用者名稱和密碼"),!1):(alert("請填寫伺服器地址"),!1),[s]),w=(0,r.useCallback)(async()=>{let t={...s,database:s.database&&s.database.trim()?s.database:"master"};S(t)&&await b(async()=>{let r=await y.testConnection(t);return g(r),r.success&&setTimeout(()=>{e(t)},1e3),r})},[s,b,e,y,S]),_=(0,r.useCallback)(async()=>{s.server?s.user&&s.password?await v(async()=>{try{let e=await y.getDatabaseList(s);return m(Array.isArray(e.data)?e.data:[]),Array.isArray(e.data)?e.data:[]}catch(t){let e="獲取資料庫列表失敗";throw t&&"object"==typeof t&&"message"in t&&(e=`獲取資料庫列表失敗: ${t.message}`),alert(e),t}}):alert("請填寫使用者名稱和密碼"):alert("請先填寫伺服器地址")},[s,v,y]),N=(0,r.useCallback)(e=>{a(t=>({...t,database:e}))},[]);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-8 shadow-sm",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"資料庫登入"}),(0,t.jsx)("p",{className:"text-gray-600",children:"請輸入您的 SQL Server 連接資訊"})]}),(0,t.jsx)("div",{className:"mb-6 p-3 bg-blue-50 border border-blue-200 rounded",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"開發模式"}),(0,t.jsx)("p",{className:"text-xs text-blue-700",children:"快速填入測試登入資訊"})]}),(0,t.jsx)("button",{onClick:E,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"快速登入"})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(i,{label:"伺服器地址",required:!0,value:s.server,onChange:e=>a({...s,server:e.target.value}),placeholder:"localhost"}),(0,t.jsx)(i,{label:"連接埠號",type:"number",value:s.port,onChange:e=>a({...s,port:parseInt(e.target.value)||1433}),placeholder:"1433"})]}),(0,t.jsx)(i,{label:"使用者名稱",required:!0,value:s.user||"",onChange:e=>a({...s,user:e.target.value}),placeholder:"SQL Server 帳號"}),(0,t.jsx)(l,{label:"密碼",required:!0,value:s.password||"",onChange:e=>a({...s,password:e.target.value}),showPassword:u,onToggle:()=>d(e=>!e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"資料庫名稱 *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:s.database||"",onChange:e=>a({...s,database:e.target.value}),placeholder:"資料庫名稱",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("button",{onClick:_,disabled:x,className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded disabled:opacity-50",children:x?"...":"📋"})]})]}),h.length>0&&(0,t.jsx)(c,{databaseList:h,selected:s.database||"",onSelect:N}),f&&(0,t.jsx)("div",{className:`p-3 rounded ${f.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:(0,t.jsx)("div",{className:`text-sm ${f.success?"text-green-800":"text-red-800"}`,children:f.message})}),(0,t.jsx)("button",{onClick:w,disabled:p,className:"w-full bg-blue-600 text-white px-4 py-3 rounded hover:bg-blue-700 disabled:opacity-50 font-medium",children:p?"連接中...":"登入資料庫"})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"連接提示"}),(0,t.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,t.jsx)("li",{children:"• 確保 SQL Server 服務已啟動"}),(0,t.jsx)("li",{children:"• 預設連接埠號為 1433"}),(0,t.jsx)("li",{children:"• 需要啟用 SQL Server 驗證模式"}),(0,t.jsx)("li",{children:"• 確認帳戶有資料庫連接權限"})]})]})]})})})};class d{static instance;currentUser=null;token=null;static getInstance(){return d.instance||(d.instance=new d),d.instance}constructor(){this.loadAuthFromStorage()}async login(e){try{if(await new Promise(e=>setTimeout(e,1e3)),"demo@example.com"===e.email&&"demo123"===e.password){let t={id:"user_001",name:"示範用戶",email:e.email,avatar:"https://example.com/avatar.jpg",role:"user",isVerified:!0,createdAt:"2024-01-01T00:00:00Z",lastLoginAt:new Date().toISOString()},r={accessToken:`mock_token_${Date.now()}`,refreshToken:`mock_refresh_${Date.now()}`,expiresIn:3600,tokenType:"Bearer"};return this.currentUser=t,this.token=r.accessToken,this.saveAuthToStorage(t,r.accessToken),{user:t,token:r}}throw Error("帳號或密碼錯誤")}catch(e){throw console.error("Login error:",e),e}}async register(e){try{if(await new Promise(e=>setTimeout(e,1500)),e.password!==e.confirmPassword)throw Error("密碼確認不相符");if(!e.agreeToTerms)throw Error("請同意服務條款");let t={id:`user_${Date.now()}`,name:e.name,email:e.email,role:"user",isVerified:!1,createdAt:new Date().toISOString()},r={accessToken:`mock_token_${Date.now()}`,refreshToken:`mock_refresh_${Date.now()}`,expiresIn:3600,tokenType:"Bearer"};return this.currentUser=t,this.token=r.accessToken,this.saveAuthToStorage(t,r.accessToken),{user:t,token:r}}catch(e){throw console.error("Registration error:",e),e}}async logout(){try{await new Promise(e=>setTimeout(e,500)),this.currentUser=null,this.token=null,this.clearAuthFromStorage()}catch(e){throw console.error("Logout error:",e),e}}async refreshToken(){try{await new Promise(e=>setTimeout(e,300));let e={accessToken:`mock_token_${Date.now()}`,refreshToken:`mock_refresh_${Date.now()}`,expiresIn:3600,tokenType:"Bearer"};return this.token=e.accessToken,this.currentUser&&this.saveAuthToStorage(this.currentUser,e.accessToken),e}catch(e){throw console.error("Token refresh error:",e),e}}async resetPassword(e){try{await new Promise(e=>setTimeout(e,1e3)),console.log(`Password reset email sent to: ${e.email}`)}catch(e){throw console.error("Reset password error:",e),e}}async changePassword(e){try{if(await new Promise(e=>setTimeout(e,800)),e.newPassword!==e.confirmPassword)throw Error("新密碼確認不相符");console.log("Password changed successfully")}catch(e){throw console.error("Change password error:",e),e}}async verifyEmail(){try{await new Promise(e=>setTimeout(e,500)),this.currentUser&&(this.currentUser.isVerified=!0,this.saveAuthToStorage(this.currentUser,this.token))}catch(e){throw console.error("Email verification error:",e),e}}async resendVerificationEmail(){try{await new Promise(e=>setTimeout(e,300)),console.log("Verification email sent")}catch(e){throw console.error("Resend verification error:",e),e}}getCurrentUser(){return this.currentUser}getToken(){return this.token}isAuthenticated(){return null!==this.currentUser&&null!==this.token}isAdmin(){return this.currentUser?.role==="admin"}isAnalyst(){return this.currentUser?.role==="analyst"||this.currentUser?.role==="admin"}saveAuthToStorage(e,t){try{localStorage.setItem("auth_user",JSON.stringify(e)),localStorage.setItem("auth_token",t)}catch(e){console.error("Error saving auth to storage:",e)}}loadAuthFromStorage(){try{{let e=localStorage.getItem("auth_user"),t=localStorage.getItem("auth_token");e&&t&&(this.currentUser=JSON.parse(e),this.token=t)}}catch(e){console.error("Error loading auth from storage:",e),this.clearAuthFromStorage()}}clearAuthFromStorage(){try{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token")}catch(e){console.error("Error clearing auth from storage:",e)}}getAuthHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization=`Bearer ${this.token}`),e}}let f=[{label:"系統表",query:"SELECT TOP 10 *\nFROM sys.tables",category:"system",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{label:"資料庫",query:"SELECT name\nFROM sys.databases",category:"system",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{label:"查詢最新",query:"SELECT TOP 100 *\nFROM stock_data_1D\nWHERE symbol = 'AAPL' ORDER BY datetime DESC;",category:"query",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{label:"RSI 比較",query:"SELECT TOP 100 symbol, datetime, rsi_14, close_price\nFROM stock_data_1D\nWHERE datetime = (SELECT MAX(datetime) FROM stock_data_1D)\nORDER BY datetime DESC, symbol;",category:"analysis",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{label:"日期範圍",query:"SELECT TOP 100 *\nFROM stock_data_1H\nWHERE datetime BETWEEN '2025-06-20T09:00:00' AND '2025-12-31'\nORDER BY datetime ASC;",category:"query",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{label:"特定股票",query:"SELECT TOP 100 *\nFROM stock_data_1D\nWHERE symbol = 'AAPL'\nORDER BY datetime DESC;",category:"query",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{label:"技術指標異常",query:"SELECT SYMBOL, DATETIME, OPEN_PRICE, HIGH_PRICE, LOW_PRICE, CLOSE_PRICE, VOLUME, RSI_14\nFROM stock_data_1D\nWHERE datetime = (SELECT MAX(datetime) FROM stock_data_1D) AND (rsi_14 < 30 OR rsi_14 > 70)\nORDER BY datetime DESC;",category:"analysis",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{label:"統計股票數量",query:"SELECT symbol, COUNT(*) as record_count\nFROM stock_data_1D\nGROUP BY symbol\nORDER BY symbol ASC;",category:"stats",color:"bg-green-100 hover:bg-green-200 text-green-700"},{label:"⚠️ 修改數據",query:"-- 危險操作 --\nUPDATE TABLE_NAME\nSET open_price='0.00', high_price='0.00', low_price='0.00', close_price='0.00', volume='0'\nWHERE id = 0",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 新增數據",query:"-- 危險操作 --\nINSERT INTO TABLE_NAME (symbol, datetime, open_price, high_price, low_price, close_price, volume)\nVALUES ('SYMBOL', '2030-01-01T00:00:00', '0.00', '0.00', '0.00', '0.00', '0');",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 刪除數據",query:"-- 危險操作 --\nDELETE FROM TABLE_NAME\nWHERE id = 0",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 新增資料表",query:"-- 危險操作 --\nCREATE TABLE TABLE_NAME (\n  id INT PRIMARY KEY,\n  symbol VARCHAR(10),\n  datetime DATETIME,\n  open_price DECIMAL(10, 2),\n  high_price DECIMAL(10, 2),\n  low_price DECIMAL(10, 2),\n  close_price DECIMAL(10, 2),\n  volume INT\n);",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 清空資料表",query:"-- 危險操作 --\nTRUNCATE TABLE TABLE_NAME",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 刪除資料表",query:"-- 危險操作 --\nDROP TABLE IF EXISTS TABLE_NAME",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 新增資料庫",query:"-- 危險操作 --\nCREATE DATABASE DATABASE_NAME;",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"⚠️ 刪除資料庫",query:"-- 危險操作 --\nDROP DATABASE IF EXISTS DATABASE_NAME",category:"danger",color:"bg-red-100 hover:bg-red-200 text-red-700 border-red-300"},{label:"統計資料表大小",query:"SELECT t.name AS table_name,\n       SUM(p.rows) AS row_count,\n       SUM(a.total_pages) * 8 AS total_size_kb,\n       SUM(a.used_pages) * 8 AS used_size_kb,\n       (SUM(a.total_pages) - SUM(a.used_pages)) * 8 AS unused_size_kb\nFROM sys.tables t\nINNER JOIN sys.indexes i ON t.object_id = i.object_id\nINNER JOIN sys.partitions p ON i.object_id = p.object_id AND i.index_id = p.index_id\nINNER JOIN sys.allocation_units a ON p.partition_id = a.container_id\nWHERE t.is_ms_shipped = 0 AND i.type <= 1\nGROUP BY t.name\nORDER BY total_size_kb DESC;",category:"stats",color:"bg-green-100 hover:bg-green-200 text-green-700"},{label:"查詢資料庫大小",query:"SELECT DB_NAME(database_id) AS DatabaseName,\n       Name AS Logical_Name,\n       type_desc,\n       Physical_Name,\n       size * 8 / 1024 AS size_mb,\n       (size - FILEPROPERTY(name, 'SpaceUsed')) * 8 / 1024 AS free_space_mb\nFROM sys.master_files\nORDER BY size_mb DESC;",category:"stats",color:"bg-green-100 hover:bg-green-200 text-green-700"},{label:"查詢資料庫屬性",query:"select  * from sys.database_files",category:"stats",color:"bg-green-100 hover:bg-green-200 text-green-700"}],g=(0,r.memo)(({templates:e,onSelect:r})=>(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(e=>(0,t.jsx)("button",{type:"button",className:`px-3 py-1 rounded text-xs font-medium border ${e.color}`,onClick:()=>r(e.query),children:e.label},e.label))}));g.displayName="QueryTemplates";let h=(0,r.memo)(({tables:e,selected:r,onSelect:s})=>(0,t.jsx)("div",{className:"max-h-80 overflow-y-auto space-y-1",children:e.map(e=>(0,t.jsx)("button",{onClick:()=>s(e),className:`w-full text-left px-3 py-2 rounded border border-gray-100 hover:bg-blue-50 ${r===e?"bg-blue-100 font-bold":""}`,children:e},e))}));h.displayName="TableList";let m=(0,r.memo)(({data:e})=>{if(!e||0===e.length)return(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暫無數據"});let r=Object.keys(e[0]);return(0,t.jsxs)("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:[(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsx)("tr",{children:r.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,100).map((e,s)=>(0,t.jsx)("tr",{className:s%2==0?"bg-white":"bg-gray-50",children:r.map(r=>(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:null===e[r]?(0,t.jsx)("span",{className:"text-gray-400 italic",children:"NULL"}):"boolean"==typeof e[r]?(0,t.jsx)("span",{className:e[r]?"text-green-600":"text-red-600",children:e[r]?"TRUE":"FALSE"}):String(e[r])},r))},s))})]}),e.length>100&&(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-2 text-sm text-gray-600 border-t",children:["顯示前 100 筆記錄，總共 ",e.length," 筆"]})]})});m.displayName="ResultTable";let y=({config:e,onLogout:s})=>{let a={...e,database:e.database&&e.database.trim()?e.database:"master"},[i,l]=(0,r.useState)("SELECT TOP 10 * FROM sys.tables"),[c,u]=(0,r.useState)([]),[y,p]=(0,r.useState)(""),[,b]=(0,r.useState)(!1),[x,v]=(0,r.useState)([]),[E,S]=(0,r.useState)(a),[w,_]=(0,r.useState)(1),N=d.getInstance().getCurrentUser(),T=(0,r.useMemo)(()=>new n,[]),{data:j,loading:C,error:R,execute:A}=(0,o.useMvcController)(),{loading:O,execute:k,error:L}=(0,o.useMvcController)(),P=(0,r.useCallback)(async()=>{i.trim()?(_(1),await A(async()=>{let e=await T.executeQuery(E,i.trim());return{...e,data:Array.isArray(e.data)?e.data:[]}})):alert("請輸入 SQL 查詢語句")},[i,E,A,T]);r.default.useEffect(()=>{k(async()=>{let e=await T.getTableList(E);return u(Array.isArray(e.data)?e.data:[]),Array.isArray(e.data)?e.data:[]})},[E,k,T]);let I=(0,r.useCallback)(async()=>{await k(async()=>{let e=await T.getTableList(E);return u(Array.isArray(e.data)?e.data:[]),Array.isArray(e.data)?e.data:[]})},[E,k,T]),M=(0,r.useCallback)(e=>{p(e),_(1),l(t=>{if(!t.trim()||/^SELECT TOP 10 \* FROM \[?.*\]?$/i.test(t.trim()))return`SELECT TOP 10 * FROM [${e}]`;let r=/FROM\s+\[?([\w.]+)\]?/i;if(r.test(t))return t.replace(r,`FROM [${e}]`);let s=t.match(/(SELECT[\s\S]*?)(WHERE|ORDER BY|GROUP BY|$)/i);if(s){let[r]=s;return t.replace(r,`${r} FROM [${e}] `)}return`SELECT TOP 10 * FROM [${e}]`})},[]),D=(0,r.useCallback)(e=>{l(e)},[]),$=(0,r.useCallback)(async()=>{try{let e=await T.getDatabaseList(E);v(Array.isArray(e.data)?e.data:[]),b(!0)}catch{alert("獲取資料庫列表失敗")}},[E,T]),U=(0,r.useCallback)(e=>{S(t=>({...t,database:e||"master"})),b(!1),u([]),p(""),l("SELECT TOP 10 * FROM sys.tables")},[]),B=r.default.useMemo(()=>{if(!j?.data)return[];let e=(w-1)*25;return j.data.slice(e,e+25)},[j,w,25]),F=j?.data?.length||0,H=Math.ceil(F/25)||1;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"SQL Server 資料庫管理"}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:["已連接到: ",E.server,":",E.port," /"," ",E.database]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"資料庫帳號:"}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:E.user})]}),N&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"登入用戶:"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:N.name}),(0,t.jsxs)("span",{className:"text-gray-400",children:["(",N.email,")"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:I,disabled:O,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 w-36",children:O?"載入中...":"重新載入資料表"}),(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"登出"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SQL 查詢"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"快速模板"}),(0,t.jsx)(g,{templates:f,onSelect:D})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SQL 語句"}),(0,t.jsx)("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"輸入 SQL 查詢語句...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm"})]}),(0,t.jsx)("button",{onClick:P,disabled:C,className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 font-medium",children:C?"執行中...":"執行查詢"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"目前資料庫："}),(0,t.jsx)("span",{className:"font-semibold text-blue-700",children:E.database}),(0,t.jsx)("button",{onClick:$,className:"ml-2 px-2 py-1 text-xs bg-yellow-100 hover:bg-yellow-200 rounded border border-yellow-300 text-yellow-800",children:"變更"})]}),x.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:x.map(e=>(0,t.jsx)("button",{onClick:()=>U(e),className:`px-2 py-1 rounded text-xs border ${E.database===e?"bg-blue-100 border-blue-400 font-bold":"bg-gray-50 border-gray-200"}`,children:e},e))})]}),(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["資料表列表 (",c.length,")"]}),L&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-2 mb-2 text-red-700 text-xs",children:["載入資料表失敗：",L]}),0===c.length?(0,t.jsx)("div",{className:"text-center py-4 text-gray-400",children:"尚未載入"}):(0,t.jsx)(h,{tables:c,selected:y,onSelect:M})]})})]}),(j||C||R)&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"查詢結果"}),C?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("div",{className:"text-gray-500",children:"正在執行查詢..."})}):R?(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:(0,t.jsxs)("div",{className:"text-red-800 text-sm",children:["查詢失敗: ",R]})}):j?.success?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-3 mb-4",children:(0,t.jsxs)("div",{className:"text-green-800 text-sm",children:["查詢成功，返回 ",j.data?.length??0," 筆記錄",j.executionTime&&(0,t.jsxs)("span",{className:"ml-2",children:["・執行時間: ",j.executionTime,"ms"]})]})}),(0,t.jsx)(m,{data:B}),F>25&&(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,t.jsx)("button",{className:"px-2 py-1 rounded border text-xs bg-gray-100 hover:bg-gray-200 disabled:opacity-50",onClick:()=>_(1),disabled:1===w,children:"首頁"}),(0,t.jsx)("button",{className:"px-2 py-1 rounded border text-xs bg-gray-100 hover:bg-gray-200 disabled:opacity-50",onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===w,children:"上一頁"}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:["第 ",w," / ",H," 頁"]}),(0,t.jsx)("button",{className:"px-2 py-1 rounded border text-xs bg-gray-100 hover:bg-gray-200 disabled:opacity-50",onClick:()=>_(e=>Math.min(H,e+1)),disabled:w===H,children:"下一頁"}),(0,t.jsx)("button",{className:"px-2 py-1 rounded border text-xs bg-gray-100 hover:bg-gray-200 disabled:opacity-50",onClick:()=>_(H),disabled:w===H,children:"末頁"})]})]}):j?(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:(0,t.jsx)("div",{className:"text-red-800 text-sm",children:j.error||j.message||"查詢失敗: 未知錯誤"})}):null]})]})})},p=()=>{let[e,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),o=(0,r.useCallback)(e=>{n(e),s(!0)},[]),i=(0,r.useCallback)(()=>{s(!1),n(null)},[]);return e&&a?(0,t.jsx)(y,{config:a,onLogout:i}):(0,t.jsx)(u,{onLoginSuccess:o})};e.s(["default",0,()=>(0,t.jsx)(p,{})],62737)},86212,(e,t,r)=>{let s="/test/database";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(62737)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/bc605f86bb4166d2.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/700022329b1c82af.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);